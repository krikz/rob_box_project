# LED Matrix Animations - rob_box

–ù–∞–±–æ—Ä –∞–Ω–∏–º–∞—Ü–∏–π –¥–ª—è LED –º–∞—Ç—Ä–∏—Ü —Ä–æ–±–æ—Ç–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–∞–Ω–µ–ª–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
animations/
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ manifests/          # –ú–∞–Ω–∏—Ñ–µ—Å—Ç—ã –∞–Ω–∏–º–∞—Ü–∏–π (YAML)
‚îÇ   ‚îú‚îÄ‚îÄ police.yaml
‚îÇ   ‚îú‚îÄ‚îÄ road_service.yaml
‚îÇ   ‚îú‚îÄ‚îÄ ambulance.yaml
‚îÇ   ‚îú‚îÄ‚îÄ idle.yaml
‚îÇ   ‚îú‚îÄ‚îÄ charging.yaml
‚îÇ   ‚îú‚îÄ‚îÄ mission_received.yaml
‚îÇ   ‚îú‚îÄ‚îÄ mission_active.yaml
‚îÇ   ‚îú‚îÄ‚îÄ mission_complete.yaml
‚îÇ   ‚îú‚îÄ‚îÄ startup.yaml
‚îÇ   ‚îî‚îÄ‚îÄ shutdown.yaml
‚îî‚îÄ‚îÄ frames/             # –ö–∞–¥—Ä—ã –∞–Ω–∏–º–∞—Ü–∏–π (PNG)
    ‚îú‚îÄ‚îÄ police/
    ‚îú‚îÄ‚îÄ road_service/
    ‚îú‚îÄ‚îÄ ambulance/
    ‚îú‚îÄ‚îÄ idle/
    ‚îú‚îÄ‚îÄ charging/
    ‚îú‚îÄ‚îÄ mission_received/
    ‚îú‚îÄ‚îÄ mission_active/
    ‚îú‚îÄ‚îÄ mission_complete/
    ‚îú‚îÄ‚îÄ startup/
    ‚îî‚îÄ‚îÄ shutdown/
```

## üé¨ –§–æ—Ä–º–∞—Ç –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞

```yaml
name: "police_lights"
description: "–ú–∏–≥–∞–ª–∫–∏ –ø–æ–ª–∏—Ü–µ–π—Å–∫–æ–π –º–∞—à–∏–Ω—ã"
version: "1.0"
author: "rob_box"
duration_ms: 1000        # –û–±—â–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ü–∏–∫–ª–∞
loop: true               # –ó–∞—Ü–∏–∫–ª–∏–≤–∞—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é
fps: 10                  # –ß–∞—Å—Ç–æ—Ç–∞ –∫–∞–¥—Ä–æ–≤

# –ü–∞–Ω–µ–ª–∏ —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏
panels:
  # –ü–µ—Ä–µ–¥–Ω–∏–µ —Ñ–∞—Ä—ã (–≥–ª–∞–∑–∞)
  - logical_group: "headlight_front_left"
    frames:
      - image: "frames/police/front_left_001.png"
        duration_ms: 100
      - image: "frames/police/front_left_002.png"
        duration_ms: 100
      # ...
  
  - logical_group: "headlight_front_right"
    frames:
      - image: "frames/police/front_right_001.png"
        duration_ms: 100
      - image: "frames/police/front_right_002.png"
        duration_ms: 100
  
  # –ó–∞–¥–Ω–∏–µ —Ñ–∞—Ä—ã
  - logical_group: "headlight_rear_left"
    frames:
      - image: "frames/police/rear_left_001.png"
        duration_ms: 100
  
  - logical_group: "headlight_rear_right"
    frames:
      - image: "frames/police/rear_right_001.png"
        duration_ms: 100
  
  # –†–æ—Ç (–≥–ª–∞–≤–Ω—ã–π –¥–∏—Å–ø–ª–µ–π)
  - logical_group: "main_display"
    frames:
      - image: "frames/police/mouth_001.png"
        duration_ms: 100
      - image: "frames/police/mouth_002.png"
        duration_ms: 100

# –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
metadata:
  priority: "high"       # –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∞–Ω–∏–º–∞—Ü–∏–∏
  category: "emergency"  # –ö–∞—Ç–µ–≥–æ—Ä–∏—è
  tags: ["police", "emergency", "lights"]
```

## üé® –§–æ—Ä–º–∞—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### –†–∞–∑–º–µ—Ä—ã –ø–∞–Ω–µ–ª–µ–π
- **–ü–µ—Ä–µ–¥–Ω–∏–µ/–∑–∞–¥–Ω–∏–µ —Ñ–∞—Ä—ã:** 8√ó8 –ø–∏–∫—Å–µ–ª–µ–π (RGB)
- **–ì–ª–∞–≤–Ω—ã–π –¥–∏—Å–ø–ª–µ–π (—Ä–æ—Ç):** 5√ó25 –ø–∏–∫—Å–µ–ª–µ–π (RGB)

### –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–æ–≤
- **–¢–∏–ø:** PNG
- **–¶–≤–µ—Ç–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ:** RGB (–±–µ–∑ –∞–ª—å—Ñ–∞-–∫–∞–Ω–∞–ª–∞)
- **–ì–ª—É–±–∏–Ω–∞ —Ü–≤–µ—Ç–∞:** 8 –±–∏—Ç –Ω–∞ –∫–∞–Ω–∞–ª
- **–ò–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤:** `{panel}_{frame_number:03d}.png`

### –ü—Ä–∏–º–µ—Ä
```
frames/police/
‚îú‚îÄ‚îÄ front_left_001.png   # 8√ó8, –∫—Ä–∞—Å–Ω—ã–π
‚îú‚îÄ‚îÄ front_left_002.png   # 8√ó8, —Å–∏–Ω–∏–π
‚îú‚îÄ‚îÄ front_right_001.png  # 8√ó8, —Å–∏–Ω–∏–π
‚îú‚îÄ‚îÄ front_right_002.png  # 8√ó8, –∫—Ä–∞—Å–Ω—ã–π
‚îú‚îÄ‚îÄ mouth_001.png        # 5√ó25, —Ç–µ–∫—Å—Ç "POLICE"
‚îî‚îÄ‚îÄ mouth_002.png        # 5√ó25, –ø—É—Å—Ç–æ–π
```

## üö® –°–ø–∏—Å–æ–∫ –∞–Ω–∏–º–∞—Ü–∏–π

### –≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ —Å–ª—É–∂–±—ã

#### 1. police_lights (–ü–æ–ª–∏—Ü–∏—è)
- **–ü–µ—Ä–µ–¥–Ω–∏–µ:** –°–∏–Ω–∏–π-–∫—Ä–∞—Å–Ω—ã–π —á–µ—Ä–µ–¥—É—é—Ç—Å—è Left‚ÜîRight
- **–ó–∞–¥–Ω–∏–µ:** –°–∏–Ω–∏–π-–∫—Ä–∞—Å–Ω—ã–π —á–µ—Ä–µ–¥—É—é—Ç—Å—è Left‚ÜîRight
- **–†–æ—Ç:** "POLICE" –º–∏–≥–∞–µ—Ç

#### 2. road_service (–î–æ—Ä–æ–∂–Ω–∞—è —Å–ª—É–∂–±–∞)
- **–ü–µ—Ä–µ–¥–Ω–∏–µ:** –ñ–µ–ª—Ç—ã–π –≤—Ä–∞—â–∞—é—â–∏–π—Å—è –º–∞—è–∫
- **–ó–∞–¥–Ω–∏–µ:** –ñ–µ–ª—Ç—ã–π –≤—Ä–∞—â–∞—é—â–∏–π—Å—è –º–∞—è–∫
- **–†–æ—Ç:** "ROAD SERVICE" –±–µ–≥—É—â–∞—è —Å—Ç—Ä–æ–∫–∞

#### 3. ambulance (–°–∫–æ—Ä–∞—è –ø–æ–º–æ—â—å)
- **–ü–µ—Ä–µ–¥–Ω–∏–µ:** –ö—Ä–∞—Å–Ω—ã–π –º–∏–≥–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
- **–ó–∞–¥–Ω–∏–µ:** –ö—Ä–∞—Å–Ω—ã–π –º–∏–≥–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
- **–†–æ—Ç:** –ö—Ä–∞—Å–Ω—ã–π –∫—Ä–µ—Å—Ç + "AMBULANCE"

### –°–æ—Å—Ç–æ—è–Ω–∏—è —Ä–æ–±–æ—Ç–∞

#### 4. idle (–ü—Ä–æ—Å—Ç–æ–π)
- **–ü–µ—Ä–µ–¥–Ω–∏–µ:** –ú—è–≥–∫–æ–µ –¥—ã—Ö–∞–Ω–∏–µ –±–µ–ª—ã–º —Å–≤–µ—Ç–æ–º
- **–ó–∞–¥–Ω–∏–µ:** –¢—É—Å–∫–ª–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ –∫—Ä–∞—Å–Ω—ã–º
- **–†–æ—Ç:** –ó–∞–∫—Ä—ã—Ç—ã–π —Ä–æ—Ç ‚Üí –º–µ–¥–ª–µ–Ω–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ

#### 5. charging (–ó–∞—Ä—è–¥–∫–∞)
- **–ü–µ—Ä–µ–¥–Ω–∏–µ:** –ó–µ–ª–µ–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —É—Ä–æ–≤–Ω—è –∑–∞—Ä—è–¥–∞
- **–ó–∞–¥–Ω–∏–µ:** –í—ã–∫–ª—é—á–µ–Ω—ã
- **–†–æ—Ç:** –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞—Ç–∞—Ä–µ–∏ —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ

#### 6. mission_received (–ó–∞–¥–∞–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–æ)
- **–ü–µ—Ä–µ–¥–Ω–∏–µ:** –ë—ã—Å—Ç—Ä–æ–µ –º–∏–≥–∞–Ω–∏–µ –∑–µ–ª–µ–Ω—ã–º
- **–ó–∞–¥–Ω–∏–µ:** –ë—ã—Å—Ç—Ä–æ–µ –º–∏–≥–∞–Ω–∏–µ –∑–µ–ª–µ–Ω—ã–º
- **–†–æ—Ç:** –£–¥–∏–≤–ª–µ–Ω–Ω—ã–π —Ä–æ—Ç + "!" —Å–∏–º–≤–æ–ª

#### 7. mission_active (–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–¥–∞–Ω–∏–µ)
- **–ü–µ—Ä–µ–¥–Ω–∏–µ:** –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –±–µ–ª—ã–π —Å–≤–µ—Ç
- **–ó–∞–¥–Ω–∏–µ:** –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –∫—Ä–∞—Å–Ω—ã–π —Å–≤–µ—Ç
- **–†–æ—Ç:** –†–µ—à–∏—Ç–µ–ª—å–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ (–ø—Ä—è–º–∞—è –ª–∏–Ω–∏—è)

#### 8. mission_complete (–ó–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ)
- **–ü–µ—Ä–µ–¥–Ω–∏–µ:** –ó–µ–ª–µ–Ω–∞—è –≥–∞–ª–æ—á–∫–∞ ‚úì
- **–ó–∞–¥–Ω–∏–µ:** –ó–µ–ª–µ–Ω–∞—è –≥–∞–ª–æ—á–∫–∞ ‚úì
- **–†–æ—Ç:** –£–ª—ã–±–∫–∞ + "DONE"

### –°–∏—Å—Ç–µ–º–Ω—ã–µ

#### 9. startup (–ó–∞–ø—É—Å–∫)
- **–ü–µ—Ä–µ–¥–Ω–∏–µ:** –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑
- **–ó–∞–¥–Ω–∏–µ:** –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑
- **–†–æ—Ç:** –õ–æ–≥–æ—Ç–∏–ø rob_box –ø–æ—è–≤–ª—è–µ—Ç—Å—è

#### 10. shutdown (–í—ã–∫–ª—é—á–µ–Ω–∏–µ)
- **–ü–µ—Ä–µ–¥–Ω–∏–µ:** –û–ø—É—Å—Ç–æ—à–µ–Ω–∏–µ —Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö
- **–ó–∞–¥–Ω–∏–µ:** –û–ø—É—Å—Ç–æ—à–µ–Ω–∏–µ —Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö
- **–†–æ—Ç:** "BYE" –∏—Å—á–µ–∑–∞–µ—Ç

## üéÆ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏

```python
from rob_box_animations import AnimationPlayer

player = AnimationPlayer()
player.load_manifest('manifests/police.yaml')
player.play()
```

### CLI
```bash
ros2 run rob_box_animations player --manifest manifests/police.yaml
```

## üîß –°–æ–∑–¥–∞–Ω–∏–µ —Å–≤–æ–µ–π –∞–Ω–∏–º–∞—Ü–∏–∏

1. **–°–æ–∑–¥–∞–π—Ç–µ –∫–∞–¥—Ä—ã** –≤ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ (GIMP/Photoshop)
   - –†–∞–∑–º–µ—Ä—ã: 8√ó8 –¥–ª—è —Ñ–∞—Ä, 5√ó25 –¥–ª—è —Ä—Ç–∞
   - –§–æ—Ä–º–∞—Ç: PNG RGB
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤ `frames/my_animation/`

2. **–°–æ–∑–¥–∞–π—Ç–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç** `manifests/my_animation.yaml`
   ```yaml
   name: "my_animation"
   description: "–ú–æ—è –∫—Ä—É—Ç–∞—è –∞–Ω–∏–º–∞—Ü–∏—è"
   loop: true
   fps: 10
   panels:
     - logical_group: "main_display"
       frames:
         - image: "frames/my_animation/mouth_001.png"
           duration_ms: 100
   ```

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ**
   ```bash
   ros2 run rob_box_animations player --manifest manifests/my_animation.yaml
   ```

## üìä –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∞–Ω–∏–º–∞—Ü–∏–π

–ü—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞–Ω–∏–º–∞—Ü–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:

1. **critical** - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (–∞–≤–∞—Ä–∏–π–Ω—ã–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏)
2. **high** - –í—ã—Å–æ–∫–∏–π (—ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ —Å–ª—É–∂–±—ã)
3. **normal** - –û–±—ã—á–Ω—ã–π (—Å–æ—Å—Ç–æ—è–Ω–∏—è —Ä–æ–±–æ—Ç–∞)
4. **low** - –ù–∏–∑–∫–∏–π (idle —Ä–µ–∂–∏–º)

## üéØ Roadmap

- [ ] –°–æ–∑–¥–∞—Ç—å –≤—Å–µ 10 –±–∞–∑–æ–≤—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π
- [ ] –†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å Animation Player Node
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å robot state machine
- [ ] –î–æ–±–∞–≤–∏—Ç—å transitions –º–µ–∂–¥—É –∞–Ω–∏–º–∞—Ü–∏—è–º–∏
- [ ] Web-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- [ ] –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∞–Ω–∏–º–∞—Ü–∏–π –∏–∑ JSON
- [ ] –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –≥–æ—Ç–æ–≤—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ (–ø—É–ª—å—Å–∞—Ü–∏—è, –≤—Ä–∞—â–µ–Ω–∏–µ, –≤–æ–ª–Ω—ã)

## üìö –°—Å—ã–ª–∫–∏

- [LED Matrix Integration](../docs/reference/LED_MATRIX_INTEGRATION.md)
- [ros2leds Repository](https://github.com/krikz/ros2leds)
