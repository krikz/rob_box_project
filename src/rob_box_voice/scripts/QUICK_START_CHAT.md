# üöÄ ROBBOX Chat - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

## –ó–∞–ø—É—Å–∫ —á–∞—Ç–∞

```bash
cd ~/rob_box_project
source src/rob_box_voice/.env.secrets
cd src/rob_box_voice/scripts
python3 robbox_chat.py
```

## –ü—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤

```
üë§ –í—ã: –ø—Ä–∏–≤–µ—Ç —Ä–∞—Å—Å–∫–∞–∂–∏ –æ —Å–µ–±–µ
üë§ –í—ã: –ø–æ–µ–∑–∂–∞–π –≤–ø–µ—Ä—ë–¥ –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ 0.5
üë§ –í—ã: —Å—Ç–æ–ø –æ—Å—Ç–∞–Ω–æ–≤–∏—Å—å
üë§ –í—ã: –≤–∫–ª—é—á–∏ —Å—á–∞—Å—Ç–ª–∏–≤—ã–µ —ç–º–æ—Ü–∏–∏
üë§ –í—ã: —Ä–∞—Å—Å–∫–∞–∂–∏ —Å—Ç—Ä–∞—à–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é
üë§ –í—ã: —á—Ç–æ —Ç—ã –≤–∏–¥–∏—à—å –≤–æ–∫—Ä—É–≥?
üë§ –í—ã: —Å–¥–µ–ª–∞–π –∫—Ä—É–≥–æ–≤–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
```

## –ö–æ–º–∞–Ω–¥—ã —á–∞—Ç–∞

- `/quit` - –≤—ã—Ö–æ–¥
- `/clear` - –æ—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é
- `/history` - –ø–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é

## –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏

1. **DeepSeek –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç JSON:**
```json
{
  "text": "–•–æ—Ä–æ—à–æ, –µ–¥—É –≤–ø–µ—Ä—ë–¥.",
  "ssml": "<speak>–•–æ—Ä–æ—à–æ,<break time='300ms'/>–µ–¥—É –≤–ø–µ—Ä—ë–¥.</speak>",
  "commands": ["move_forward:0.5", "led_emotion:neutral"],
  "emotion": "neutral"
}
```

2. **Text Normalizer –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:**
   - –£–±–∏—Ä–∞–µ—Ç markdown
   - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç —á–∏—Å–ª–∞: `0.5` ‚Üí `–Ω–æ–ª—å —Ç–æ—á–∫–∞ –ø—è—Ç—å`
   - –¢—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∏—Ä—É–µ—Ç: `ROBBOX` ‚Üí `–†–û–ë–ë–û–ö–°`
   - –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã

3. **CommandExecutor –≤—ã–ø–æ–ª–Ω—è–µ—Ç:**
   - `ü§ñ –ö–û–ú–ê–ù–î–ê: move_forward [0.5]`
   - `ü§ñ –ö–û–ú–ê–ù–î–ê: led_emotion [neutral]`

4. **Silero TTS –æ–∑–≤—É—á–∏–≤–∞–µ—Ç:**
   - –°–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏: `aidar` voice, `x-slow` rate
   - Pitch shift 2.0x (—Ä–µ–∂–∏–º "–ë—É—Ä—É–Ω–¥—É–∫")
   - –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ: 24kHz ‚Üí 48kHz

5. **SSML –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–∞—É–∑—ã:**
   - `üîä –ì–æ–≤–æ—Ä—é: –•–æ—Ä–æ—à–æ,`
   - `‚è∏Ô∏è –ü–∞—É–∑–∞ 300ms...`
   - `üîä –ì–æ–≤–æ—Ä—é: –µ–¥—É –≤–ø–µ—Ä—ë–¥.`

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### –ò–∑–º–µ–Ω–∏—Ç—å –≥–æ–ª–æ—Å

–í `robbox_chat.py`:
```python
self.tts.synthesize_and_play(
    text,
    speaker='aidar',     # aidar, baya, kseniya, xenia
    rate='x-slow',       # x-slow, slow, medium, fast
    pitch='medium'       # low, medium, high, x-high
)
```

### –û—Ç–∫–ª—é—á–∏—Ç—å "–ë—É—Ä—É–Ω–¥—É–∫"

```python
self.tts = SileroTTS(
    sample_rate=24000,
    chipmunk_mode=False  # –û—Ç–∫–ª—é—á–∏—Ç—å pitch shift
)
```

### –ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É DeepSeek

```python
response = self.client.chat.completions.create(
    model="deepseek-chat",
    temperature=0.7,  # 0.0 = —Å—Ç—Ä–æ–≥–æ, 1.0 = –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ
    max_tokens=500
)
```

## –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–º–æ—Ç—Ä–∏: `ROBBOX_CHAT_README.md`

## –¢–µ—Å—Ç—ã

```bash
# –¢–µ—Å—Ç –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä–∞
python3 text_normalizer_v2.py

# –¢–µ—Å—Ç GUI —Å TTS
python3 silero_tts_gui.py
```
