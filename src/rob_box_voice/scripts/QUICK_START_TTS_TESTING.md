# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ TTS –≥–æ–ª–æ—Å–æ–≤

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### –ë–∞–∑–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–¥–ª—è –≤—Å–µ—Ö)

```bash
# ALSA –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∑–≤—É–∫–∞
sudo apt-get install alsa-utils

# Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install numpy
```

### –í–∞—Ä–∏–∞–Ω—Ç 1: –¢–æ–ª—å–∫–æ Piper (–ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π)

```bash
pip install piper-tts
```

**–†–∞–∑–º–µ—Ä:** ~10 MB  
**–ì–æ–ª–æ—Å–∞:** 2 (dmitri M, irina F)  
**–ú–æ–¥–µ–ª–∏:** 63 MB –∫–∞–∂–¥–∞—è

### –í–∞—Ä–∏–∞–Ω—Ç 2: –¢–æ–ª—å–∫–æ Silero (–º–Ω–æ–≥–æ –≥–æ–ª–æ—Å–æ–≤)

```bash
pip install torch torchaudio omegaconf
```

**–†–∞–∑–º–µ—Ä:** ~300 MB (PyTorch)  
**–ì–æ–ª–æ—Å–∞:** 4 (aidar M, baya F, kseniya F, xenia F)  
**–ú–æ–¥–µ–ª—å:** ~100 MB (–æ–¥–Ω–∞ –¥–ª—è –≤—Å–µ—Ö –≥–æ–ª–æ—Å–æ–≤)

### –í–∞—Ä–∏–∞–Ω—Ç 3: –í—Å—ë (–¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è)

```bash
# Piper
pip install piper-tts

# Silero
pip install torch torchaudio omegaconf

# RHVoice (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è)
sudo apt-get install rhvoice rhvoice-russian
```

---

## üé§ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
cd /home/ros2/rob_box_project/src/rob_box_voice/scripts
python3 test_tts_voices.py
```

**–ß—Ç–æ –±—É–¥–µ—Ç:**
1. –í—ã–±–∏—Ä–∞–µ—Ç–µ –¥–≤–∏–∂–æ–∫ (Piper / Silero / RHVoice)
2. –°–∫–∞—á–∏–≤–∞—é—Ç—Å—è –º–æ–¥–µ–ª–∏ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–π —Ä–∞–∑)
3. –í—ã–±–∏—Ä–∞–µ—Ç–µ –≥–æ–ª–æ—Å –∏–∑ —Å–ø–∏—Å–∫–∞
4. –°–ª—É—à–∞–µ—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é —Ñ—Ä–∞–∑—É
5. –ú–æ–∂–µ—Ç–µ –º–µ–Ω—è—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å, —Ñ—Ä–∞–∑—É, –≥–æ–ª–æ—Å

### –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–≤–∏–∂–æ–∫

```bash
# –¢–æ–ª—å–∫–æ Piper
python3 test_tts_voices.py --engine piper

# –¢–æ–ª—å–∫–æ Silero (—Å –∏–∑–º–µ—Ä–µ–Ω–∏–µ–º RTF!)
python3 test_tts_voices.py --engine silero

# –¢–æ–ª—å–∫–æ RHVoice
python3 test_tts_voices.py --engine rhvoice
```

---

## üìä –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –î–ª—è —Ä–æ–±–æ—Ç–∞ –≤–∞–∂–Ω–æ:

1. **–†–∞–∑–±–æ—Ä—á–∏–≤–æ—Å—Ç—å** - —Ö–æ—Ä–æ—à–æ –ª–∏ —Å–ª—ã—à–Ω–æ —Å–ª–æ–≤–∞?
2. **–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å** - –∑–≤—É—á–∏—Ç –ª–∏ –≥–æ–ª–æ—Å –∂–∏–≤–æ?
3. **–°–∫–æ—Ä–æ—Å—Ç—å** - –∫–∞–∫ –±—ã—Å—Ç—Ä–æ —Å–∏–Ω—Ç–µ–∑–∏—Ä—É–µ—Ç—Å—è?
4. **–ò–Ω—Ç–æ–Ω–∞—Ü–∏–∏** - –µ—Å—Ç—å –ª–∏ —ç–º–æ—Ü–∏–∏ –≤ –≥–æ–ª–æ—Å–µ?

### –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ—Ä–∞–∑—ã

–°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 6 —Ñ—Ä–∞–∑:

```
1. "–ü—Ä–∏–≤–µ—Ç! –Ø –≥–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Ä–æ–±–æ—Ç–∞ –†–æ–±–±–æ–∫—Å."
2. "–ï–¥—É –≤–ø–µ—Ä—ë–¥. –°–∫–æ—Ä–æ—Å—Ç—å –ø–æ–ª–º–µ—Ç—Ä–∞ –≤ —Å–µ–∫—É–Ω–¥—É."
3. "–ó–∞—Ä—è–¥ –±–∞—Ç–∞—Ä–µ–∏ —Å–µ–º—å–¥–µ—Å—è—Ç –≤–æ—Å–µ–º—å –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤."
4. "–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ –æ–¥–∏–Ω –º–µ—Ç—Ä."
5. "–ü–æ–≤–æ—Ä–∞—á–∏–≤–∞—é –Ω–∞–ª–µ–≤–æ –Ω–∞ –¥–µ–≤—è–Ω–æ—Å—Ç–æ –≥—Ä–∞–¥—É—Å–æ–≤."
6. "–°–∏—Å—Ç–µ–º–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –≥–æ—Ç–æ–≤–∞. –û–∂–∏–¥–∞—é –∫–æ–º–∞–Ω–¥—ã."
```

–ú–æ–∂–µ—Ç–µ –º–µ–Ω—è—Ç—å —Ñ—Ä–∞–∑—É –ø—Ä—è–º–æ –≤ –º–µ–Ω—é (`p`).

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏

–í –º–µ–Ω—é –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å (`s`):
- 0.5 - –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–±–æ—Ä—á–∏–≤–æ—Å—Ç–∏)
- 1.0 - –Ω–æ—Ä–º–∞–ª—å–Ω–æ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- 1.2 - –±—ã—Å—Ç—Ä–µ–µ (–¥–ª—è –¥–∏–Ω–∞–º–∏—á–Ω—ã—Ö –∫–æ–º–∞–Ω–¥)
- 1.5 - –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ

**–î–ª—è —Ä–æ–±–æ—Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 0.9-1.1**

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤—ã–±–æ—Ä—É

### Piper - dmitri (male)

**–î–ª—è –∫–æ–≥–æ:** –°—Ç—Ä–æ–≥–∏–π, –¥–µ–ª–æ–≤–æ–π —Ä–æ–±–æ—Ç  
**–ü–ª—é—Å—ã:**
- ‚úÖ –û—á–µ–Ω—å —á—ë—Ç–∫–∞—è –¥–∏–∫—Ü–∏—è
- ‚úÖ –°–ø–æ–∫–æ–π–Ω—ã–π —Ç–æ–Ω
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π (<0.5s)
- ‚úÖ –ú–∞–ª—ã–π —Ä–∞–∑–º–µ—Ä (63 MB)

**–ú–∏–Ω—É—Å—ã:**
- ‚ö†Ô∏è –ú–æ–Ω–æ—Ç–æ–Ω–Ω—ã–π (–º–∞–ª–æ —ç–º–æ—Ü–∏–π)
- ‚ö†Ô∏è –ú–æ–∂–µ—Ç –∑–≤—É—á–∞—Ç—å —Å–∫—É—á–Ω–æ

### Piper - irina (female)

**–î–ª—è –∫–æ–≥–æ:** –î—Ä—É–∂–µ–ª—é–±–Ω—ã–π —Ä–æ–±–æ—Ç-–ø–æ–º–æ—â–Ω–∏–∫  
**–ü–ª—é—Å—ã:**
- ‚úÖ –¢—ë–ø–ª—ã–π –≥–æ–ª–æ—Å
- ‚úÖ –ü—Ä–∏—è—Ç–Ω—ã–π —Ç–æ–Ω
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π (<0.5s)

**–ú–∏–Ω—É—Å—ã:**
- ‚ö†Ô∏è –¢–∞–∫–∂–µ –º–æ–Ω–æ—Ç–æ–Ω–Ω—ã–π

### Silero - aidar (male) ‚≠ê –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø

**–î–ª—è –∫–æ–≥–æ:** –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç  
**–ü–ª—é—Å—ã:**
- ‚úÖ **–ë–´–°–¢–†–´–ô!** (RTF 0.3-0.5 –Ω–∞ Pi 5)
- ‚úÖ –•–æ—Ä–æ—à–∏–µ –∏–Ω—Ç–æ–Ω–∞—Ü–∏–∏
- ‚úÖ –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≥–æ–ª–æ—Å
- ‚úÖ –ú—É–∂—Å–∫–æ–π –≥–æ–ª–æ—Å (–∫–∞–∫ —É dmitri)
- ‚úÖ –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

**–ú–∏–Ω—É—Å—ã:**
- ‚ö†Ô∏è –ë–æ–ª—å—à–∏–π —Ä–∞–∑–º–µ—Ä (100 MB –º–æ–¥–µ–ª—å + 300 MB PyTorch)

### Silero - baya (female)

**–î–ª—è –∫–æ–≥–æ:** –¢—ë–ø–ª—ã–π –∂–µ–Ω—Å–∫–∏–π —Ä–æ–±–æ—Ç  
**–ü–ª—é—Å—ã:**
- ‚úÖ –û—á–µ–Ω—å –ø—Ä–∏—è—Ç–Ω—ã–π –≥–æ–ª–æ—Å
- ‚úÖ –•–æ—Ä–æ—à–∏–µ –∏–Ω—Ç–æ–Ω–∞—Ü–∏–∏
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π (–∫–∞–∫ aidar)

**–ú–∏–Ω—É—Å—ã:**
- ‚ö†Ô∏è –†–∞–∑–º–µ—Ä (–∫–∞–∫ —É aidar)

### Silero - kseniya, xenia (female)

**–î–ª—è –∫–æ–≥–æ:** –ë–æ–ª–µ–µ –º–æ–ª–æ–¥–æ–π/—ç–Ω–µ—Ä–≥–∏—á–Ω—ã–π —Ä–æ–±–æ—Ç  
**–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–∞–º–∏!**

---

## üìà –ò–∑–º–µ—Ä–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### RTF (Real Time Factor)

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–º–µ—Ä—è–µ—Ç RTF –¥–ª—è Silero:

```
RTF = –≤—Ä–µ–º—è_—Å–∏–Ω—Ç–µ–∑–∞ / –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å_–∞—É–¥–∏–æ

RTF < 1 = –±—ã—Å—Ç—Ä–µ–µ realtime
RTF > 1 = –º–µ–¥–ª–µ–Ω–Ω–µ–µ realtime
```

**–û–∂–∏–¥–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ Raspberry Pi 5:**

| –î–≤–∏–∂–æ–∫ | RTF | –°–∫–æ—Ä–æ—Å—Ç—å |
|--------|-----|----------|
| Piper | ~0.3-0.5 | **2-3x –±—ã—Å—Ç—Ä–µ–µ** |
| Silero (1 –ø–æ—Ç–æ–∫) | ~0.3-0.5 | **2-3x –±—ã—Å—Ç—Ä–µ–µ** |
| Silero (4 –ø–æ—Ç–æ–∫–∞) | ~0.2-0.3 | **3-5x –±—ã—Å—Ç—Ä–µ–µ** |

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
‚úì –°–∏–Ω—Ç–µ–∑ –∑–∞–≤–µ—Ä—à—ë–Ω –∑–∞ 0.68s
‚Ñπ –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞—É–¥–∏–æ: 2.04s
‚Ñπ RTF (Real Time Factor): 0.33
‚úì ‚ö° –ë—ã—Å—Ç—Ä–µ–µ realtime –≤ 3.0x —Ä–∞–∑!
```

---

## üîß Troubleshooting

### –ù–µ—Ç –∑–≤—É–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å ALSA —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
aplay -l

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –∑–∞–Ω—è—Ç–æ
lsof /dev/snd/*

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥—Ä–æ–º–∫–æ—Å—Ç—å
alsamixer
```

### PyTorch –¥–æ–ª–≥–æ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è

```bash
# –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, ~300 MB
# –ú–æ–∂–Ω–æ —É—Å–∫–æ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑—É—è –∑–µ—Ä–∫–∞–ª–æ:
pip install torch torchaudio -i https://pypi.tuna.tsinghua.edu.cn/simple
```

### Silero –º–æ–¥–µ–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
ping github.com

# –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à torch hub
rm -rf ~/.cache/torch/hub/snakers4_silero-models_master

# –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
python3 test_tts_voices.py --engine silero
```

### –û—à–∏–±–∫–∞ "Import torch could not be resolved"

–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –≤ VS Code –µ—Å–ª–∏ PyTorch –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≥–ª–æ–±–∞–ª—å–Ω–æ.  
–°–∫—Ä–∏–ø—Ç –≤—Å—ë —Ä–∞–≤–Ω–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!

---

## üí° –ò—Ç–æ–≥–æ–≤–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

### –î–ª—è ROBBOX —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

**–û—Å–Ω–æ–≤–Ω–æ–π:** **Silero - aidar** (–º—É–∂—Å–∫–æ–π, –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π)
- –û—Ç–ª–∏—á–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ
- –ë—ã—Å—Ç—Ä–µ–µ realtime –Ω–∞ Pi 5
- –•–æ—Ä–æ—à–∏–µ –∏–Ω—Ç–æ–Ω–∞—Ü–∏–∏
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ä–æ–±–æ—Ç–∞

**–ó–∞–ø–∞—Å–Ω–æ–π:** **Piper - dmitri** (–º—É–∂—Å–∫–æ–π, —Å–ø–æ–∫–æ–π–Ω—ã–π)
- –õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π
- –ë—ã—Å—Ç—Ä—ã–π
- –ï—Å–ª–∏ –≤–∞–∂–Ω–∞ —ç–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```yaml
tts_node:
  primary: "silero"
  fallback: "piper"
  
  silero:
    model: "v4_ru"
    speaker: "aidar"
    sample_rate: 48000
    threads: 4
    
  piper:
    model: "ru_RU-dmitri-medium.onnx"
    voice_speed: 1.0
```

---

## üé¨ –ù–∞—á–∏–Ω–∞–µ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ!

```bash
cd /home/ros2/rob_box_project/src/rob_box_voice/scripts

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Silero (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
pip install torch torchaudio omegaconf

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
python3 test_tts_voices.py --engine silero
```

**–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ–ª–æ—Å –∏ –ø–æ—Å–ª—É—à–∞–π—Ç–µ!** üéß

–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–∏—Ç–µ –∫–∞–∫–æ–π –≥–æ–ª–æ—Å –≤–∞–º –±–æ–ª—å—à–µ –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è üòä

---

**–î–∞—Ç–∞:** 2025-01-12  
**–ê–≤—Ç–æ—Ä:** GitHub Copilot  
**–í–µ—Ä—Å–∏—è —Å–∫—Ä–∏–ø—Ç–∞:** 2.0 (—Å Silero v4 + RTF measurement)
