# üé§ Phase 3: Speech-to-Text Testing

## –¶–µ–ª—å

–í—ã–±—Ä–∞—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ STT —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è ROBBOX –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞.

## –¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. **Vosk** (Offline, –±—ã—Å—Ç—Ä—ã–π)
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é offline
- ‚úÖ –ù–∏–∑–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (~0.3-0.5s)
- ‚úÖ –ú–∞–ª—ã–π —Ä–∞–∑–º–µ—Ä –º–æ–¥–µ–ª–∏ (45 MB –¥–ª—è small-ru)
- ‚ö†Ô∏è –°—Ä–µ–¥–Ω—è—è —Ç–æ—á–Ω–æ—Å—Ç—å
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç GPU

**–ú–æ–¥–µ–ª—å:** `vosk-model-small-ru-0.22` (45 MB)

### 2. **Whisper** (Offline, —Ç–æ—á–Ω—ã–π)
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é offline
- ‚úÖ –í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
- ‚ö†Ô∏è –í—ã—Å–æ–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (~2-5s –Ω–∞ CPU)
- ‚ö†Ô∏è –ë–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä –º–æ–¥–µ–ª–∏ (base: 74 MB, small: 244 MB)
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –º–Ω–æ–≥–æ RAM/CPU

**–ú–æ–¥–µ–ª—å:** `base` (74 MB, –∫–æ–º–ø—Ä–æ–º–∏—Å—Å)

### 3. **Yandex SpeechKit** (Online)
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
- ‚úÖ –í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
- ‚úÖ –ù–∏–∑–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (~0.5-1s + —Å–µ—Ç—å)
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- ‚ö†Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–æ 1000 –º–∏–Ω/–º–µ—Å—è—Ü)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
cd src/rob_box_voice/scripts
pip install -r requirements_stt_test.txt
```

### 2. –°–∫–∞—á–∞—Ç—å Vosk –º–æ–¥–µ–ª—å

```bash
# –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –º–æ–¥–µ–ª–µ–π
sudo mkdir -p /models
cd /models

# –°–∫–∞—á–∞—Ç—å —Ä—É—Å—Å–∫—É—é –º–æ–¥–µ–ª—å
wget https://alphacephei.com/vosk/models/vosk-model-small-ru-0.22.zip
unzip vosk-model-small-ru-0.22.zip
rm vosk-model-small-ru-0.22.zip

# –ü—Ä–æ–≤–µ—Ä–∫–∞
ls -lh /models/vosk-model-small-ru-0.22
```

### 3. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Yandex API

```bash
# –í .env.secrets –¥–æ–±–∞–≤–∏—Ç—å:
export YANDEX_API_KEY="–≤–∞—à_api_key"
export YANDEX_FOLDER_ID="–≤–∞—à_folder_id"

# –ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á–∏: https://cloud.yandex.ru/services/speechkit
```

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞

```bash
cd src/rob_box_voice/scripts

# –ó–∞–≥—Ä—É–∑–∏—Ç—å environment
set -a && source ../.env.secrets && set +a

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç
python3 test_stt_options.py
```

## –¢–µ—Å—Ç–æ–≤–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞

### –¢–µ—Å—Ç 1: –ü—Ä–æ—Å—Ç–∞—è —Ñ—Ä–∞–∑–∞

**–ì–æ–≤–æ—Ä–∏—Ç–µ:** "–ü—Ä–∏–≤–µ—Ç, —Ä–æ–±–æ—Ç, –∫–∞–∫ –¥–µ–ª–∞?"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- Vosk: "–ø—Ä–∏–≤–µ—Ç —Ä–æ–±–æ—Ç –∫–∞–∫ –¥–µ–ª–∞" (–±–µ–∑ –∑–Ω–∞–∫–æ–≤ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è)
- Whisper: "–ü—Ä–∏–≤–µ—Ç, —Ä–æ–±–æ—Ç, –∫–∞–∫ –¥–µ–ª–∞?" (—Å –ø—É–Ω–∫—Ç—É–∞—Ü–∏–µ–π)
- Yandex: "–ü—Ä–∏–≤–µ—Ç, —Ä–æ–±–æ—Ç, –∫–∞–∫ –¥–µ–ª–∞?" (—Å –ø—É–Ω–∫—Ç—É–∞—Ü–∏–µ–π)

### –¢–µ—Å—Ç 2: –ö–æ–º–∞–Ω–¥–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

**–ì–æ–≤–æ—Ä–∏—Ç–µ:** "–î–≤–∏–≥–∞–π—Å—è –∫ —Ç–æ—á–∫–µ —Ç—Ä–∏"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- Vosk: "–¥–≤–∏–≥–∞–π—Å—è –∫ —Ç–æ—á–∫–µ —Ç—Ä–∏"
- Whisper: "–î–≤–∏–≥–∞–π—Å—è –∫ —Ç–æ—á–∫–µ —Ç—Ä–∏"
- Yandex: "–î–≤–∏–≥–∞–π—Å—è –∫ —Ç–æ—á–∫–µ 3" (–º–æ–∂–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å —Ü–∏—Ñ—Ä—É)

### –¢–µ—Å—Ç 3: –í–æ–ø—Ä–æ—Å –ø—Ä–æ –°–æ—á–∏

**–ì–æ–≤–æ—Ä–∏—Ç–µ:** "–†–∞—Å—Å–∫–∞–∂–∏ –º–Ω–µ –ø—Ä–æ –≥–æ—Ä–æ–¥ –°–æ—á–∏"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í—Å–µ –¥–≤–∏–∂–∫–∏: –¥–æ–ª–∂–Ω—ã —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å "–°–æ—á–∏" –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –¢–µ—Å—Ç 4: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ñ—Ä–∞–∑–∞

**–ì–æ–≤–æ—Ä–∏—Ç–µ:** "–ü–æ–∫–∞–∂–∏ –º–Ω–µ –∫–∞—Ä—Ç—É SLAM"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤

## –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ü–µ–Ω–∫–∏

| –ö—Ä–∏—Ç–µ—Ä–∏–π | Vosk | Whisper | Yandex | –í–∞–∂–Ω–æ—Å—Ç—å |
|----------|------|---------|--------|----------|
| **–¢–æ—á–Ω–æ—Å—Ç—å** | 7/10 | 9/10 | 9/10 | üî• –í—ã—Å–æ–∫–∞—è |
| **–°–∫–æ—Ä–æ—Å—Ç—å** | 9/10 | 5/10 | 8/10 | üî• –í—ã—Å–æ–∫–∞—è |
| **Offline** | ‚úÖ | ‚úÖ | ‚ùå | üî• –ö—Ä–∏—Ç–∏—á–Ω–æ |
| **–†–∞–∑–º–µ—Ä –º–æ–¥–µ–ª–∏** | 45 MB | 74 MB | N/A | ‚ö†Ô∏è –°—Ä–µ–¥–Ω—è—è |
| **CPU –Ω–∞–≥—Ä—É–∑–∫–∞** | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–∞—è | –ù–∏–∑–∫–∞—è | üî• –í—ã—Å–æ–∫–∞—è |
| **RAM** | ~100 MB | ~500 MB | ~50 MB | ‚ö†Ô∏è –°—Ä–µ–¥–Ω—è—è |
| **–ü—É–Ω–∫—Ç—É–∞—Ü–∏—è** | ‚ùå | ‚úÖ | ‚úÖ | ‚ö†Ô∏è –ù–∏–∑–∫–∞—è |

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

### –î–ª—è ROBBOX:

**–í–∞—Ä–∏–∞–Ω—Ç 1: Vosk (–æ—Å–Ω–æ–≤–Ω–æ–π)**
- ‚úÖ Offline-first
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–ª–∏–∫
- ‚úÖ –ú–∞–ª—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ—Å—É—Ä—Å–∞–º
- ‚úÖ –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è Raspberry Pi 5

**–í–∞—Ä–∏–∞–Ω—Ç 2: Vosk + Yandex (fallback)**
- Vosk –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã
- Yandex –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Ñ—Ä–∞–∑ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ù–ï —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: Whisper**
- –°–ª–∏—à–∫–æ–º –º–µ–¥–ª–µ–Ω–Ω—ã–π –¥–ª—è real-time –¥–∏–∞–ª–æ–≥–∞
- –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CPU
- –ü–æ–¥—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è offline —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏

## –ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

```
üé§ –¢–ï–°–¢: Vosk
üî¥ –ó–ê–ü–ò–°–¨! (–≥–æ–≤–æ—Ä–∏—Ç–µ "–ü—Ä–∏–≤–µ—Ç —Ä–æ–±–æ—Ç")
‚úÖ –ó–∞–ø–∏—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∞
üîç Vosk —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç...
‚è±Ô∏è  –í—Ä–µ–º—è: 0.31s
üìù –†–µ–∑—É–ª—å—Ç–∞—Ç: –ø—Ä–∏–≤–µ—Ç —Ä–æ–±–æ—Ç

üé§ –¢–ï–°–¢: Whisper
üî¥ –ó–ê–ü–ò–°–¨! (–≥–æ–≤–æ—Ä–∏—Ç–µ "–ü—Ä–∏–≤–µ—Ç —Ä–æ–±–æ—Ç")
‚úÖ –ó–∞–ø–∏—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∞
üîç Whisper —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç...
‚è±Ô∏è  –í—Ä–µ–º—è: 2.14s
üìù –†–µ–∑—É–ª—å—Ç–∞—Ç: –ü—Ä–∏–≤–µ—Ç, —Ä–æ–±–æ—Ç.

üé§ –¢–ï–°–¢: Yandex
üî¥ –ó–ê–ü–ò–°–¨! (–≥–æ–≤–æ—Ä–∏—Ç–µ "–ü—Ä–∏–≤–µ—Ç —Ä–æ–±–æ—Ç")
‚úÖ –ó–∞–ø–∏—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∞
üîç Yandex —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç...
‚è±Ô∏è  –í—Ä–µ–º—è: 0.87s (+ —Å–µ—Ç—å)
üìù –†–µ–∑—É–ª—å—Ç–∞—Ç: –ü—Ä–∏–≤–µ—Ç, —Ä–æ–±–æ—Ç.
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. ‚úÖ –í—ã–±—Ä–∞—Ç—å –ª—É—á—à–µ–µ —Ä–µ—à–µ–Ω–∏–µ (—Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ Vosk)
2. ‚è≥ –°–æ–∑–¥–∞—Ç—å `stt_node.py` —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º –¥–≤–∏–∂–∫–æ–º
3. ‚è≥ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å `audio_node` (VAD)
4. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å –≤ launch file
5. ‚è≥ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª: Voice ‚Üí STT ‚Üí Dialogue ‚Üí TTS

---

*Phase 3: STT Testing*  
*–î–∞—Ç–∞: 2025-10-13*
