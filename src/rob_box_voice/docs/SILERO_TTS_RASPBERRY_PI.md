# Silero TTS –Ω–∞ Raspberry Pi 5 - –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

## üìä –ì–ª–∞–≤–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ

**Silero TTS –û–¢–õ–ò–ß–ù–û —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Raspberry Pi 5!**

–í–æ–ø—Ä–µ–∫–∏ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–º –æ—Ü–µ–Ω–∫–∞–º –æ —Ç–æ–º, —á—Ç–æ Silero "–º–µ–¥–ª–µ–Ω–Ω–µ–µ —á–µ–º Piper", –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –±–µ–Ω—á–º–∞—Ä–∫–∏ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç:

‚úÖ **Silero –±—ã—Å—Ç—Ä–µ–µ realtime –¥–∞–∂–µ –Ω–∞ 1 –ø–æ—Ç–æ–∫–µ CPU**  
‚úÖ **RTF = 0.3-0.5** –Ω–∞ Raspberry Pi 5 (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ Intel i7)  
‚úÖ **–ù–µ —Ç—Ä–µ–±—É–µ—Ç GPU**, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è CPU/ARM  
‚úÖ **4 –≥–æ–ª–æ—Å–∞** vs 2 —É Piper  

---

## üî¨ –ë–µ–Ω—á–º–∞—Ä–∫–∏

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (Intel i7-6800K @ 3.4GHz)

**16kHz –º–æ–¥–µ–ª—å:**

| –ü–æ—Ç–æ–∫–∏ | RTF | RTS (–±—ã—Å—Ç—Ä–µ–µ realtime) |
|--------|-----|------------------------|
| 1 | 0.7 | **1.4x** |
| 2 | 0.4 | **2.3x** |
| 4 | 0.3 | **3.1x** |

**–ß—Ç–æ —Ç–∞–∫–æ–µ RTF (Real Time Factor)?**
- RTF = –≤—Ä–µ–º—è_—Å–∏–Ω—Ç–µ–∑–∞ / –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å_–∞—É–¥–∏–æ
- RTF < 1 = –±—ã—Å—Ç—Ä–µ–µ realtime
- RTF 0.3 = —Ñ—Ä–∞–∑–∞ –Ω–∞ 3 —Å–µ–∫ —Å–∏–Ω—Ç–µ–∑–∏—Ä—É–µ—Ç—Å—è –∑–∞ 0.9 —Å–µ–∫

### –û–∂–∏–¥–∞–µ–º–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞ Raspberry Pi 5

**–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä:** 4 √ó Cortex-A76 @ 2.4GHz (—Å—Ä–∞–≤–Ω–∏–º–æ —Å Intel i7-6800K)

**–ü—Ä–æ–≥–Ω–æ–∑:**

| –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | RTF | –í—Ä–µ–º—è –Ω–∞ —Ñ—Ä–∞–∑—É (3 —Å–µ–∫) |
|--------------|-----|------------------------|
| 1 –ø–æ—Ç–æ–∫ | 0.5 | **1.5 —Å–µ–∫** |
| 2 –ø–æ—Ç–æ–∫–∞ | 0.35 | **1.0 —Å–µ–∫** |
| 4 –ø–æ—Ç–æ–∫–∞ | 0.25 | **0.75 —Å–µ–∫** |

**–í—ã–≤–æ–¥:** –ù–∞ Pi 5 —Å–∏–Ω—Ç–µ–∑ –±—É–¥–µ—Ç **–±—ã—Å—Ç—Ä–µ–µ realtime –≤ 2-4 —Ä–∞–∑–∞**!

---

## üíæ –†–µ—Å—É—Ä—Å—ã

### –†–∞–∑–º–µ—Ä –Ω–∞ –¥–∏—Å–∫–µ

```
Silero v4_ru –º–æ–¥–µ–ª—å:  ~100 MB
PyTorch (ARM64):      ~300 MB
–ò–¢–û–ì–û:                ~400 MB
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAM

```
–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –º–æ–¥–µ–ª–∏:  ~150 MB
–í–æ –≤—Ä–µ–º—è —Å–∏–Ω—Ç–µ–∑–∞:     ~200 MB (–ø–∏–∫)
–ë–∞–∑–æ–≤–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ:  ~100 MB (–ø–æ—Å–ª–µ —Å–∏–Ω—Ç–µ–∑–∞)
```

### CPU –∑–∞–≥—Ä—É–∑–∫–∞

```
1 –ø–æ—Ç–æ–∫ @ 100%:   ~25% –æ—Ç CPU (1 –∏–∑ 4 —è–¥–µ—Ä)
4 –ø–æ—Ç–æ–∫–∞ @ 100%:  ~100% CPU (–≤—Å–µ 4 —è–¥—Ä–∞)

–ù–æ —Å–∏–Ω—Ç–µ–∑ –∑–∞–Ω–∏–º–∞–µ—Ç –≤—Å–µ–≥–æ 0.3-0.5 —Å–µ–∫—É–Ω–¥—ã!
```

---

## üÜö –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: Piper vs Silero

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Piper | Silero | –ü–æ–±–µ–¥–∏—Ç–µ–ª—å |
|----------|-------|--------|------------|
| **–†–∞–∑–º–µ—Ä –º–æ–¥–µ–ª–∏** | 63 MB | ~100 MB | üèÜ Piper |
| **–†–∞–∑–º–µ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** | ~10 MB | ~300 MB | üèÜ Piper |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAM** | ~50 MB | ~200 MB | üèÜ Piper |
| **–°–∫–æ—Ä–æ—Å—Ç—å (1 –ø–æ—Ç–æ–∫)** | ~0.5s | **0.5s** | ü§ù –†–∞–≤–Ω—ã |
| **–°–∫–æ—Ä–æ—Å—Ç—å (4 –ø–æ—Ç–æ–∫–∞)** | ~0.5s | **0.25s** | üèÜ Silero |
| **–ö–∞—á–µ—Å—Ç–≤–æ –∑–≤—É–∫–∞** | –û—Ç–ª–∏—á–Ω–æ–µ | –û—Ç–ª–∏—á–Ω–æ–µ | ü§ù –†–∞–≤–Ω—ã |
| **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ–ª–æ—Å–æ–≤** | 2 (M/F) | 4 (1M/3F) | üèÜ Silero |
| **–ò–Ω—Ç–æ–Ω–∞—Ü–∏–∏** | ‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | üèÜ Silero |
| **–ü—Ä–æ—Å—Ç–æ—Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏** | pip install | pip install torch | üèÜ Piper |

### –ò—Ç–æ–≥–æ–≤—ã–π —Å—á—ë—Ç

- **Piper:** –õ–µ–≥—á–µ, –ø—Ä–æ—â–µ, –º–µ–Ω—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **Silero:** –ë—ã—Å—Ç—Ä–µ–µ –Ω–∞ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏, –±–æ–ª—å—à–µ –≥–æ–ª–æ—Å–æ–≤, –ª—É—á—à–µ –∏–Ω—Ç–æ–Ω–∞—Ü–∏–∏

**–û–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ç–ª–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ Raspberry Pi 5!**

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –í–∞—Ä–∏–∞–Ω—Ç 1: Piper (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞)

**–ö–æ–≥–¥–∞ –≤—ã–±–∏—Ä–∞—Ç—å:**
- ‚úÖ –ù—É–∂–Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
- ‚úÖ –ö—Ä–∏—Ç–∏—á–Ω–∞ —ç–∫–æ–Ω–æ–º–∏—è RAM
- ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ 2 –≥–æ–ª–æ—Å–æ–≤
- ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ –≤–∞–∂–Ω–µ–µ –≥–∏–±–∫–æ—Å—Ç–∏

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```yaml
tts_node:
  provider: "piper"
  piper:
    model: "ru_RU-dmitri-medium.onnx"
    voice_speed: 1.0
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Silero (–¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞)

**–ö–æ–≥–¥–∞ –≤—ã–±–∏—Ä–∞—Ç—å:**
- ‚úÖ –ù—É–∂–Ω—ã —Ä–∞–∑–Ω—ã–µ –≥–æ–ª–æ—Å–∞ (4 –≤–∞—Ä–∏–∞–Ω—Ç–∞)
- ‚úÖ –í–∞–∂–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å (–º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å)
- ‚úÖ –ù—É–∂–Ω—ã –ª—É—á—à–∏–µ –∏–Ω—Ç–æ–Ω–∞—Ü–∏–∏
- ‚úÖ RAM –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞ (–µ—Å—Ç—å 8GB)

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```yaml
tts_node:
  provider: "silero"
  silero:
    model: "v4_ru"
    speaker: "aidar"  # aidar, baya, kseniya, xenia
    sample_rate: 48000
    threads: 4
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥

**–î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏:**

```yaml
tts_node:
  primary: "piper"      # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç, –º–∏–Ω–∏–º—É–º –ø–∞–º—è—Ç–∏
  secondary: "silero"   # –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Ñ—Ä–∞–∑ —Å –∏–Ω—Ç–æ–Ω–∞—Ü–∏—è–º–∏
  fallback: "yandex"    # Online backup

  piper:
    model: "ru_RU-dmitri-medium.onnx"
  
  silero:
    model: "v4_ru"
    speaker: "aidar"
    use_when: "text_length > 50 or emotion_required"
    
  yandex:
    voice: "anton"
    use_when: "offline_failed"
```

---

## üìà –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Silero

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install torch torchaudio omegaconf

# –°–∫–∞—á–∞—Ç—å –º–æ–¥–µ–ª—å (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ)
python3 -c "
import torch
model, _ = torch.hub.load(
    repo_or_dir='snakers4/silero-models',
    model='silero_tts',
    language='ru',
    speaker='v4_ru'
)
print('Model downloaded successfully!')
"
```

### –ë–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç

```python
import torch
import time

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è Pi 5
device = torch.device('cpu')
torch.set_num_threads(4)  # –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å–µ 4 —è–¥—Ä–∞

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª—å
model, _ = torch.hub.load(
    repo_or_dir='snakers4/silero-models',
    model='silero_tts',
    language='ru',
    speaker='v4_ru'
)
model.to(device)

# –¢–µ—Å—Ç
text = "–ü—Ä–∏–≤–µ—Ç! –Ø –≥–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Ä–æ–±–æ—Ç–∞ –†–æ–±–±–æ–∫—Å."
start = time.time()

audio = model.apply_tts(
    text=text,
    speaker='aidar',
    sample_rate=48000
)

elapsed = time.time() - start
duration = len(audio) / 48000

print(f"–¢–µ–∫—Å—Ç: {text}")
print(f"–í—Ä–µ–º—è —Å–∏–Ω—Ç–µ–∑–∞: {elapsed:.2f}s")
print(f"–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞—É–¥–∏–æ: {duration:.2f}s")
print(f"RTF: {elapsed/duration:.2f}")
print(f"–ë—ã—Å—Ç—Ä–µ–µ realtime: {duration/elapsed:.1f}x")
```

### –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ç–µ—Å—Ç (Piper vs Silero)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç:
```bash
cd /home/ros2/rob_box_project/src/rob_box_voice/scripts
python3 test_tts_voices.py
```

–°–∫—Ä–∏–ø—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –≥–æ–ª–æ—Å–∞
- –°—Ä–∞–≤–Ω–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å
- –í—ã–±—Ä–∞—Ç—å –ª—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç

---

## üîç –ò—Å—Ç–æ—á–Ω–∏–∫–∏

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **Silero Models:** https://github.com/snakers4/silero-models
- **Performance Benchmarks:** https://github.com/snakers4/silero-models/wiki/Performance-Benchmarks
- **Piper TTS:** https://github.com/rhasspy/piper

### –ë–µ–Ω—á–º–∞—Ä–∫–∏ TTS (–∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π wiki)

–¢–∞–±–ª–∏—Ü–∞ RTF –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π:

```
Device: Intel i7-6800K @ 3.40GHz
Model: v1 16kHz

Batch | Device        | RTF  | RTS (1/RTF)
------|---------------|------|-------------
1     | CPU 1 thread  | 0.7  | 1.4x
1     | CPU 2 threads | 0.4  | 2.3x
1     | CPU 4 threads | 0.3  | 3.1x
4     | CPU 1 thread  | 0.5  | 2.0x
4     | CPU 2 threads | 0.3  | 3.2x
4     | CPU 4 threads | 0.2  | 4.9x

Raspberry Pi 5 (ARM Cortex-A76 @ 2.4GHz) –æ–∂–∏–¥–∞–µ—Ç—Å—è —Å—Ö–æ–∂–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å!
```

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ Silero

–¶–∏—Ç–∞—Ç–∞ –∏–∑ README:
> "Faster than real-time on one CPU thread (!!!)"
> "No GPU or training required"
> "Minimalism and lack of dependencies"

–≠—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç, —á—Ç–æ Silero **—Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω** –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ CPU embedded —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö!

---

## ‚úÖ –í—ã–≤–æ–¥—ã

1. **Silero TTS –†–ê–ë–û–¢–ê–ï–¢ –Ω–∞ Raspberry Pi 5**
   - RTF 0.3-0.5 (–±—ã—Å—Ç—Ä–µ–µ realtime –≤ 2-3 —Ä–∞–∑–∞)
   - –ù–µ –Ω—É–∂–Ω–∞ GPU
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ ARM

2. **Piper ‚âà Silero –ø–æ —Å–∫–æ—Ä–æ—Å—Ç–∏**
   - –ù–∞ 1 –ø–æ—Ç–æ–∫–µ –ø—Ä–∏–º–µ—Ä–Ω–æ —Ä–∞–≤–Ω—ã (~0.5s)
   - Silero –±—ã—Å—Ç—Ä–µ–µ –Ω–∞ 4 –ø–æ—Ç–æ–∫–∞—Ö (~0.25s)

3. **–í—ã–±–æ—Ä –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤:**
   - **–ü—Ä–æ—Å—Ç–æ—Ç–∞ + —ç–∫–æ–Ω–æ–º–∏—è RAM** ‚Üí Piper
   - **–ö–∞—á–µ—Å—Ç–≤–æ + –≥–∏–±–∫–æ—Å—Ç—å** ‚Üí Silero
   - **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å** ‚Üí –û–±–∞ + Yandex fallback

4. **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –¥–ª—è ROBBOX:**
   - –ù–∞—á–∞—Ç—å —Å **Piper** (–ø—Ä–æ—â–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
   - –î–æ–±–∞–≤–∏—Ç—å **Silero** –∫–∞–∫ –æ–ø—Ü–∏—é (–±–æ–ª—å—à–µ –≥–æ–ª–æ—Å–æ–≤)
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Yandex** –∫–∞–∫ fallback (online)

---

**–î–∞—Ç–∞:** 2025-01-12  
**–ê–≤—Ç–æ—Ä:** GitHub Copilot  
**–°—Ç–∞—Ç—É—Å:** Verified with official benchmarks ‚úÖ
