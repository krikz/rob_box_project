# Changelog: –£–ª—É—á—à–µ–Ω–∏—è TTS (2025-10-13)

## –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è –¥–ª—è —Å–∏–Ω—Ç–µ–∑–∞ —Ä–µ—á–∏:
1. **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —É–¥–∞—Ä–µ–Ω–∏—è** ‚Äî DeepSeek —Ç–µ–ø–µ—Ä—å —Ä–∞—Å—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–∞—Ä–µ–Ω–∏—è –≤–æ –≤—Å–µ—Ö —Å–ª–æ–≤–∞—Ö
2. **–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–æ—Ä–º—É–ª—ã –ø—Ä–æ–ø–∏—Å—å—é** ‚Äî –Ω–µ—Ç –±–æ–ª—å—à–µ –Ω–µ—á–∏—Ç–∞–µ–º—ã—Ö Unicode —Å–∏–º–≤–æ–ª–æ–≤
3. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ª–∞—Ç–∏–Ω—Å–∫–∏—Ö –±—É–∫–≤** ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–µ –±—É–∫–≤—ã –ø—Ä–æ–∏–∑–Ω–æ—Å—è—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. `text_normalizer.py`
**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –§—É–Ω–∫—Ü–∏—è `latin_letters_to_russian()` ‚Äî –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ª–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã –≤ —Ä—É—Å—Å–∫–æ–µ –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏–µ
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `normalize()` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

**–ü—Ä–∏–º–µ—Ä—ã:**
```python
"A, B, C" ‚Üí "—ç–π, –±–∏, —Å–∏"
"N, O, P" ‚Üí "—ç–Ω, –æ—É, –ø–∏"
```

**–î–µ—Ç–∞–ª–∏:**
- –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –±—É–∫–≤ (–Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç —Å–ª–æ–≤–∞ —Ç–∏–ø–∞ "LiDAR")
- –°–ª–æ–≤–∞—Ä—å –≤—Å–µ—Ö 26 –±—É–∫–≤ –ª–∞—Ç–∏–Ω—Å–∫–æ–≥–æ –∞–ª—Ñ–∞–≤–∏—Ç–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç regex `(?<![a-zA-Z])([a-zA-Z])(?![a-zA-Z])` –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

### 2. `master_prompt.txt`
**–ú–∞—Å—à—Ç–∞–±–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –¥–ª—è DeepSeek:**

#### –°–µ–∫—Ü–∏—è "–ö–†–ò–¢–ò–ß–ù–û: –ü—Ä–∞–≤–∏–ª–∞ –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞"
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —É–¥–∞—Ä–µ–Ω–∏—è** ‚Äî —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–≤–∏—Ç—å "+" –≤–æ –í–°–ï–• —Å–ª–æ–≤–∞—Ö –æ—Ç 2+ —Å–ª–æ–≥–æ–≤
- –ü—Ä–∏–º–µ—Ä—ã: `—Ä+–æ–±–æ—Ç`, `—Å–∏—Å—Ç+–µ–º–∞`, `–Ω–∞–≤+–∏–≥–∞—Ü–∏—è`, `–°+–æ—á–∏`, `–ú–æ—Å–∫–≤+–∞`
- –û—Å–æ–±—ã–π —É–ø–æ—Ä –Ω–∞ –æ–º–æ–≥—Ä–∞—Ñ—ã: `–∑+–∞–º–æ–∫`/`–∑–∞–º+–æ–∫`, `–±+–µ–ª–∫–∏`/`–±–µ–ª–∫+–∏`

#### –°–µ–∫—Ü–∏—è "–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–æ—Ä–º—É–ª—ã"
- **–ó–∞–ø—Ä–µ—Ç Unicode —Å–∏–º–≤–æ–ª–æ–≤**: ‚ÇÄ‚ÇÅ‚ÇÇ, ¬≤, ¬≥, ‚à´, ‚àë, Œ±, Œ≤ –∏ —Ç.–¥.
- **–¢–æ–ª—å–∫–æ –ø—Ä–æ–ø–∏—Å—å—é**: 
  * `z‚Çô‚Çä‚ÇÅ` ‚Üí `z —Å +–∏–Ω–¥–µ–∫—Å–æ–º n –ø–ª—é—Å –æ–¥+–∏–Ω`
  * `a¬≤` ‚Üí `–∞ –≤ –∫–≤–∞–¥—Ä+–∞—Ç–µ`
  * `Œ±` ‚Üí `+–∞–ª—å—Ñ–∞`
  * `‚à´` ‚Üí `–∏–Ω—Ç–µ–≥—Ä+–∞–ª`

#### –ü—Ä–∏–º–µ—Ä—ã —Ñ–æ—Ä–º—É–ª:
```
‚ùå –ë–´–õ–û: z‚Çô‚Çä‚ÇÅ = z‚Çô¬≤ + c
‚úÖ –°–¢–ê–õ–û: z —Å +–∏–Ω–¥–µ–∫—Å–æ–º n –ø–ª—é—Å –æ–¥+–∏–Ω —Ä–∞–≤–Ω+–æ z –≤ –∫–≤–∞–¥—Ä+–∞—Ç–µ –ø–ª+—é—Å c

‚ùå –ë–´–õ–û: a¬≤ + b¬≤ = c¬≤
‚úÖ –°–¢–ê–õ–û: –∞ –≤ –∫–≤–∞–¥—Ä+–∞—Ç–µ –ø–ª+—é—Å –±—ç –≤ –∫–≤–∞–¥—Ä+–∞—Ç–µ —Ä–∞–≤–Ω+–æ —Ü–µ –≤ –∫–≤–∞–¥—Ä+–∞—Ç–µ
```

#### –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è SSML:
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ–≥–∏ `<break strength="..."/>`, `<p>`, `<s>`
- –ü–æ–¥—Ä–æ–±–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –∑–Ω–∞—á–µ–Ω–∏–π (x-weak: 25ms, weak: 75ms, –∏ —Ç.–¥.)
- –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–≥–æ–≤

### 3. –ù–æ–≤–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

#### `docs/VOICE_FORMATTING_RULES.md` (–ø–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è)
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–∞–≤–∏–ª —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –¢–∞–±–ª–∏—Ü—ã –≥—Ä–µ—á–µ—Å–∫–∏—Ö –±—É–∫–≤ (Œ±‚Üí+–∞–ª—å—Ñ–∞, Œ≤‚Üí–±+—ç—Ç–∞)
- –¢–∞–±–ª–∏—Ü—ã –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ (‚à´‚Üí–∏–Ω—Ç–µ–≥—Ä+–∞–ª, ‚àë‚Üí—Å+—É–º–º–∞)
- –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è –≤—Å–µ—Ö —Å–ª—É—á–∞–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- Checklist –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π

#### `docs/VOICE_FORMATTING_QUICK.md` (–∫—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞)
- –ë—ã—Å—Ç—Ä–∞—è –ø–∞–º—è—Ç–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- –°–∞–º—ã–µ —á–∞—Å—Ç—ã–µ –ø—Ä–∏–º–µ—Ä—ã
- –ö–æ—Ä–æ—Ç–∫–∏–π checklist

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç 1: –õ–∞—Ç–∏–Ω—Å–∫–∏–π –∞–ª—Ñ–∞–≤–∏—Ç
**–ó–∞–ø—Ä–æ—Å:** "–ø–µ—Ä–µ—á–∏—Å–ª–∏ –ª–∞—Ç–∏–Ω—Å–∫–∏–π –∞–ª—Ñ–∞–≤–∏—Ç"

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üì¶ Chunk 2: "–ü—Ä–æ–ø–∏—Å–Ω—ã–µ: A, B, C, D, E, F, G, H, I, J, K, L, M."
üîä –ì–æ–≤–æ—Ä—é: –ü—Ä–æ–ø–∏—Å–Ω—ã–µ: —ç–π, –±–∏, —Å–∏, –¥–∏, –∏, —ç—Ñ, –¥–∂–∏, —ç–π—á, –∞–π, –¥–∂–µ–π, –∫–µ–π, —ç–ª, —ç–º.
```

‚úÖ **–£—Å–ø–µ—à–Ω–æ** ‚Äî –≤—Å–µ –±—É–∫–≤—ã –ø—Ä–æ–∏–∑–Ω–æ—Å—è—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!

### –¢–µ—Å—Ç 2: –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –ú–∞–Ω–¥–µ–ª—å–±—Ä–æ—Ç–∞
**–ó–∞–ø—Ä–æ—Å:** "—Ä–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –º–∞–Ω–¥–µ–ª—å–±—Ä–æ—Ç–∞"

**–ë—ã–ª–æ (–¥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π):**
```
üì¶ Chunk 3: {"text": "–û—Å–Ω–æ–≤–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞: z‚Çô‚Çä‚ÇÅ = z‚Çô¬≤ + c, –≥–¥–µ z‚ÇÄ = 0..."}
üîä –ì–æ–≤–æ—Ä—é: –û—Å–Ω–æ–≤–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞: –∑–µ—Ç‚Çô‚Çä‚ÇÅ = –∑–µ—Ç‚Çô¬≤ + —Å–∏, –≥–¥–µ –∑–µ—Ç‚ÇÄ = –Ω–æ–ª—å...
```
‚ùå Unicode —Å–∏–º–≤–æ–ª—ã –Ω–µ –ø—Ä–æ–∏–∑–Ω–æ—Å—è—Ç—Å—è

**–°—Ç–∞–ª–æ (–ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π):**
```
üì¶ Chunk 2: {"text": "–û–Ω–æ –æ–ø—Ä–µ–¥+–µ–ª—è–µ—Ç—Å—è –ø–æ —Ñ+–æ—Ä–º—É–ª–µ: z —Å +–∏–Ω–¥–µ–∫—Å–æ–º n –ø–ª—é—Å –æ–¥+–∏–Ω —Ä–∞–≤–Ω+–æ z –≤ –∫–≤–∞–¥—Ä+–∞—Ç–µ –ø–ª—é—Å c."}
üîä –ì–æ–≤–æ—Ä—é: –û–Ω–æ –æ–ø—Ä–µ–¥+–µ–ª—è–µ—Ç—Å—è –ø–æ —Ñ+–æ—Ä–º—É–ª–µ: –∑–µ—Ç —Å +–∏–Ω–¥–µ–∫—Å–æ–º —ç–Ω –ø–ª—é—Å –æ–¥+–∏–Ω —Ä–∞–≤–Ω+–æ –∑–µ—Ç –≤ –∫–≤–∞–¥—Ä+–∞—Ç–µ –ø–ª—é—Å —Å–∏.
```
‚úÖ **–£—Å–ø–µ—à–Ω–æ** ‚Äî —Ñ–æ—Ä–º—É–ª–∞ –ø—Ä–æ–∏–∑–Ω–æ—Å–∏—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å —É–¥–∞—Ä–µ–Ω–∏—è–º–∏!

### –¢–µ—Å—Ç 3: –¢–µ–æ—Ä–µ–º–∞ –ü–∏—Ñ–∞–≥–æ—Ä–∞
**–ó–∞–ø—Ä–æ—Å:** "—á—Ç–æ —Ç–∞–∫–æ–µ —Ç–µ–æ—Ä–µ–º–∞ –ø–∏—Ñ–∞–≥–æ—Ä–∞?"

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üì¶ Chunk 3: {"text": "–ï—Å–ª–∏ –∫–∞—Ç+–µ—Ç—ã –æ–±–æ–∑–Ω+–∞—á–∏—Ç—å –∫–∞–∫ –∞ –∏ –±—ç, –∞ –≥–∏–ø–æ—Ç–µ–Ω+—É–∑—É –∫–∞–∫ —Ü–µ, —Ç–æ —Ñ–æ—Ä–º+—É–ª–∞: –∞ –≤ –∫–≤–∞–¥—Ä+–∞—Ç–µ –ø–ª+—é—Å –±—ç –≤ –∫–≤–∞–¥—Ä+–∞—Ç–µ —Ä–∞–≤–Ω+–æ —Ü–µ –≤ –∫–≤–∞–¥—Ä+–∞—Ç–µ."}
üîä –ì–æ–≤–æ—Ä—é: –ï—Å–ª–∏ –∫–∞—Ç+–µ—Ç—ã –æ–±–æ–∑–Ω+–∞—á–∏—Ç—å –∫–∞–∫ –∞ –∏ –±—ç, –∞ –≥–∏–ø–æ—Ç–µ–Ω+—É–∑—É –∫–∞–∫ —Ü–µ, —Ç–æ —Ñ–æ—Ä–º+—É–ª–∞: –∞ –≤ –∫–≤–∞–¥—Ä+–∞—Ç–µ –ø–ª+—é—Å –±—ç –≤ –∫–≤–∞–¥—Ä+–∞—Ç–µ —Ä–∞–≤–Ω+–æ —Ü–µ –≤ –∫–≤–∞–¥—Ä+–∞—Ç–µ.
```
‚úÖ **–£—Å–ø–µ—à–Ω–æ** ‚Äî —Ñ–æ—Ä–º—É–ª–∞ a¬≤ + b¬≤ = c¬≤ –ø—Ä–æ–ø–∏—Å—å—é —Å —É–¥–∞—Ä–µ–Ω–∏—è–º–∏!

### –¢–µ—Å—Ç 4: –ì–æ—Ä–æ–¥ –°–æ—á–∏
**–ó–∞–ø—Ä–æ—Å:** "—Ä–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ –≥–æ—Ä–æ–¥ –°–æ—á–∏"

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üì¶ Chunk 1: {"text": "–°+–æ—á–∏ ‚Äî —ç—Ç–æ –∫—Ä–∞—Å–∏–≤—ã–π –≥–æ—Ä–æ–¥-–∫—É—Ä–æ—Ä—Ç –Ω–∞ —á–µ—Ä–Ω–æ–º–æ—Ä—Å–∫–æ–º –ø–æ–±–µ—Ä–µ–∂—å–µ –†–æ—Å—Å–∏–∏."}
üîä –ì–æ–≤–æ—Ä—é: –°+–æ—á–∏ ‚Äî —ç—Ç–æ –∫—Ä–∞—Å–∏–≤—ã–π –≥–æ—Ä–æ–¥-–∫—É—Ä–æ—Ä—Ç –Ω–∞ —á–µ—Ä–Ω–æ–º–æ—Ä—Å–∫–æ–º –ø–æ–±–µ—Ä–µ–∂—å–µ –†–æ—Å—Å–∏–∏.
```
‚úÖ **–£—Å–ø–µ—à–Ω–æ** ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É–¥–∞—Ä–µ–Ω–∏–µ –Ω–∞ –ø–µ—Ä–≤—ã–π —Å–ª–æ–≥ (–°√≥—á–∏)!

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è DeepSeek —Ç–µ–ø–µ—Ä—å –Ω–µ –Ω—É–∂–Ω–æ –±–µ—Å–ø–æ–∫–æ–∏—Ç—å—Å—è –æ —Ç–æ–º, —á—Ç–æ:
- –õ–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã –Ω–µ –±—É–¥—É—Ç –ø—Ä–æ–∏–∑–Ω–µ—Å–µ–Ω—ã
- –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–æ—Ä–º—É–ª—ã –æ–∫–∞–∂—É—Ç—Å—è –Ω–µ—á–∏—Ç–∞–µ–º—ã–º–∏
- –£–¥–∞—Ä–µ–Ω–∏—è –±—É–¥—É—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏

–í—Å–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–æ–≤—ã–º –ø—Ä–∞–≤–∏–ª–∞–º!

### –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
cd /home/ros2/rob_box_project/src/rob_box_voice/scripts
source ../.env.secrets
python3 robbox_chat_streaming.py
```

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã:
- "–ø–µ—Ä–µ—á–∏—Å–ª–∏ –ª–∞—Ç–∏–Ω—Å–∫–∏–π –∞–ª—Ñ–∞–≤–∏—Ç" ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –±—É–∫–≤
- "—á—Ç–æ —Ç–∞–∫–æ–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –º–∞–Ω–¥–µ–ª—å–±—Ä–æ—Ç–∞?" ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º—É–ª
- "—Ä–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ –≥–æ—Ä–æ–¥ –°–æ—á–∏" ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —É–¥–∞—Ä–µ–Ω–∏–π

## –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Å–∏—Å—Ç–µ–º—É

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ ‚Äî —Ç–æ–ª—å–∫–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è regex –æ–±—Ä–∞–±–æ—Ç–∫–∞
- ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ª–∞—Ç–∏–Ω—Å–∫–∏—Ö –±—É–∫–≤ –±—ã—Å—Ç—Ä–∞—è (–ø—Ä–æ—Å—Ç–∞—è –∑–∞–º–µ–Ω–∞)
- ‚úÖ Streaming —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫

### –ö–∞—á–µ—Å—Ç–≤–æ —Ä–µ—á–∏
- ‚úÖ **–ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ** ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —É–¥–∞—Ä–µ–Ω–∏—è –≤–æ –≤—Å–µ—Ö —Å–ª–æ–≤–∞—Ö
- ‚úÖ **–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ —á–∏—Ç–∞–µ–º–∞** ‚Äî —Ñ–æ—Ä–º—É–ª—ã –ø—Ä–æ–∏–∑–Ω–æ—Å—è—Ç—Å—è –ø–æ–Ω—è—Ç–Ω–æ
- ‚úÖ **–õ–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã** ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏–µ

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å `robbox_chat.py` (–Ω–µ streaming)
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ SSML —Ç–µ–≥–∞–º–∏
- ‚úÖ –ù–µ –ª–æ–º–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ –ø—Ä–æ–º–ø—Ç—ã

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

```
User Query
    ‚Üì
DeepSeek API (—Å –Ω–æ–≤—ã–º –ø—Ä–æ–º–ø—Ç–æ–º)
    ‚Üì
JSON chunks —Å —É–¥–∞—Ä–µ–Ω–∏—è–º–∏ –∏ —Ñ–æ—Ä–º—É–ª–∞–º–∏ –ø—Ä–æ–ø–∏—Å—å—é
    ‚Üì
text_normalizer_v2.py
    ‚Üì
text_normalizer.py (latin_letters_to_russian)
    ‚Üì
Silero TTS (—Å "+" –¥–ª—è —É–¥–∞—Ä–µ–Ω–∏–π)
    ‚Üì
Audio output
```

### –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **–ü—Ä–æ–º–ø—Ç** ‚Äî –∏–Ω—Å—Ç—Ä—É–∫—Ç–∏—Ä—É–µ—Ç DeepSeek –æ –ø—Ä–∞–≤–∏–ª–∞—Ö —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä** ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ª–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã
3. **SSML** ‚Äî –ø–µ—Ä–µ–¥–∞—ë—Ç —É–¥–∞—Ä–µ–Ω–∏—è –≤ TTS –¥–≤–∏–∂–æ–∫
4. **Silero TTS** ‚Äî –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç "+" –∫–∞–∫ —É–¥–∞—Ä–µ–Ω–∏–µ

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

### –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —É–¥–∞—Ä–µ–Ω–∏–π (NLP –º–æ–¥–µ–ª—å)
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–æ–ª—å—à–µ–≥–æ —á–∏—Å–ª–∞ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–π
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏–π —á–∞—Å—Ç—ã—Ö —Å–ª–æ–≤
- [ ] –ì–æ–ª–æ—Å–æ–≤–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
- –°–ª–µ–¥–∏—Ç—å –∑–∞ –∫–∞—á–µ—Å—Ç–≤–æ–º —É–¥–∞—Ä–µ–Ω–∏–π –≤ –æ—Ç–≤–µ—Ç–∞—Ö DeepSeek
- –°–æ–±–∏—Ä–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏—è
- –î–æ–ø–æ–ª–Ω—è—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –Ω–æ–≤—ã–º–∏ –∫–µ–π—Å–∞–º–∏

## –ê–≤—Ç–æ—Ä—ã

- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è: GitHub Copilot
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: krikz
- –î–∞—Ç–∞: 2025-10-13

## –°—Å—ã–ª–∫–∏

- [–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](VOICE_FORMATTING_RULES.md)
- [–ö—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞](VOICE_FORMATTING_QUICK.md)
- [Silero TTS SSML docs](https://github.com/snakers4/silero-models)
