# üéØ STT/TTS Research Summary –¥–ª—è ROBBOX Voice Assistant

## –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã

### ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (Offline-First)

```
STT: Vosk (small) ‚Üí Yandex (fallback)
TTS: Piper (dmitri) ‚Üí Yandex (fallback)
```

**–ü–æ—á–µ–º—É:**
1. **–ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
2. **–ë—ã—Å—Ç—Ä–æ** - <1s latency –¥–ª—è STT+TTS
3. **–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ** - neural TTS, —Ö–æ—Ä–æ—à–∏–π –∑–≤—É–∫
4. **–õ–µ–≥–∫–æ–≤–µ—Å–Ω–æ** - 1.5GB RAM (—É–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –≤ –±—é–¥–∂–µ—Ç 2GB)
5. **–ù–∞–¥—ë–∂–Ω–æ** - fallback –Ω–∞ –æ–±–ª–∞–∫–æ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π

### STT (Speech-to-Text)

| –†–µ—à–µ–Ω–∏–µ | ‚ùå Julius | ‚ùå ros_speech_recognition | ‚úÖ Vosk | ‚úÖ Whisper | ‚òÅÔ∏è Yandex |
|---------|-----------|---------------------------|---------|------------|-----------|
| **–†—É—Å—Å–∫–∏–π** | ‚ùå –ù–µ—Ç | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚úÖ –î–∞ |
| **ROS2** | ‚ùå ROS1 | ‚ùå ROS1 | ‚úÖ –õ–µ–≥–∫–æ | ‚úÖ –õ–µ–≥–∫–æ | ‚úÖ –õ–µ–≥–∫–æ |
| **Offline** | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚ùå |
| **Latency** | <0.5s | <1s | <0.5s | 1-3s | <1s |
| **–¢–æ—á–Ω–æ—Å—Ç—å** | - | - | 75% | 80-90% | 95% |
| **RAM** | <500MB | <500MB | 500MB | 1-5GB | ~0 |
| **–í–µ—Ä–¥–∏–∫—Ç** | ‚ùå –£—Å—Ç–∞—Ä–µ–ª | ‚ùå –£—Å—Ç–∞—Ä–µ–ª | ‚≠ê **Best** | ‚ö†Ô∏è –ú–µ–¥–ª–µ–Ω–Ω–æ | ‚òÅÔ∏è Fallback |

**–í—ã–≤–æ–¥ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞:**
- **Julius** –∏ **ros_speech_recognition** - –ù–ï –ø–æ–¥—Ö–æ–¥—è—Ç (–Ω–µ—Ç —Ä—É—Å—Å–∫–æ–≥–æ + —É—Å—Ç–∞—Ä–µ–ª–∏)
- **Vosk** - –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è real-time offline STT ‚≠ê
- **Whisper** - —Ö–æ—Ä–æ—à–æ –¥–ª—è batch processing –∏–ª–∏ –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
- **Yandex** - –æ—Ç–ª–∏—á–Ω—ã–π fallback –∫–æ–≥–¥–∞ Vosk –Ω–µ —É–≤–µ—Ä–µ–Ω

---

### TTS (Text-to-Speech)

| –†–µ—à–µ–Ω–∏–µ | ‚úÖ Piper | ‚úÖ Silero | ‚ö†Ô∏è RHVoice | ‚ùå Coqui | ‚òÅÔ∏è Yandex |
|---------|----------|-----------|------------|----------|-----------|
| **–ö–∞—á–µ—Å—Ç–≤–æ** | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| **–ò–Ω—Ç–æ–Ω–∞—Ü–∏–∏** | ‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê |
| **Latency** | <0.5s | 1-2s | <0.3s | 2-3s | <0.5s |
| **RAM** | 100MB | 1.5GB | 50MB | 2GB+ | ~0 |
| **–ì–æ–ª–æ—Å–æ–≤** | 2 | 4 | 4 | –ú–Ω–æ–≥–æ | 4 |
| **–í–µ—Ä–¥–∏–∫—Ç** | ‚≠ê **Best** | ‚ö†Ô∏è –¢—è–∂—ë–ª—ã–π | ‚ö†Ô∏è –†–æ–±–æ—Ç | ‚ùå –ú—ë—Ä—Ç–≤ | ‚òÅÔ∏è Fallback |

**–í—ã–≤–æ–¥ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞:**
- **Piper** - –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è production (–±—ã—Å—Ç—Ä–æ + –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ) ‚≠ê
- **Silero** - —Ö–æ—Ä–æ—à–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –µ—Å–ª–∏ –Ω—É–∂–Ω—ã —Ä–∞–∑–Ω—ã–µ –≥–æ–ª–æ—Å–∞
- **RHVoice** - –∑–≤—É—á–∏—Ç –∫–∞–∫ —Ä–æ–±–æ—Ç, –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
- **Coqui TTS** - –ø—Ä–æ–µ–∫—Ç –∑–∞–º–æ—Ä–æ–∂–µ–Ω, –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
- **Yandex TTS** - fallback –¥–ª—è –≤–∞–∂–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —Å —ç–º–æ—Ü–∏—è–º–∏

---

## üöÄ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Hybrid Offline-First)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          Audio Input (ReSpeaker)        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           STT Node (Vosk)                ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  1. Stream audio to Vosk           ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  2. Get recognition + confidence   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  3. If confidence < 70%:           ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ     ‚Üí Fallback to Yandex STT       ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ text
               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Dialogue Node (LLM)              ‚îÇ
‚îÇ         DeepSeek / Local Ollama          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ response
               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          TTS Node (Piper)                ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  1. Synthesize with Piper          ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  2. Cache result                   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  3. For important messages:        ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ     ‚Üí Use Yandex TTS (emotions)    ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ audio
               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      Audio Output (Speaker/Jack)         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### Memory Budget

```
Component            RAM      Notes
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Audio Node           200 MB   PyAudio + buffers
Vosk STT             500 MB   Model in memory
Piper TTS            100 MB   ONNX model
Dialogue Node        500 MB   LLM context
LED/Animations       200 MB   rob_box_animations
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
TOTAL               ~1.5 GB   ‚úÖ Fits in 2GB budget

Optional alternatives:
- Whisper base      +500 MB   (if need accuracy)
- Silero TTS        +1.3 GB   (if need voices)
```

---

### Docker Image Size

```
Layer                     Size        Notes
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Base (ros2-zenoh)         1.2 GB      Already there
Audio libs                +50 MB      ALSA, PyAudio
ReSpeaker drivers         +20 MB      pixel_ring, tuning
Vosk + deps               +60 MB      Python package
Vosk model (small)        +45 MB      Russian small
Whisper + deps            +100 MB     Optional
Piper + deps              +30 MB      ONNX runtime
Piper models (√ó2)         +126 MB     dmitri + irina
Torch (for Silero)        +500 MB     Optional, if needed
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
TOTAL (recommended)       ~1.65 GB    Vosk + Piper only
TOTAL (full)              ~2.15 GB    All alternatives
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –°–æ–±–∏—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ Vosk + Piper –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ (~1.65 GB)

---

## üé§ –í—ã–±–æ—Ä –≥–æ–ª–æ—Å–æ–≤

### –ú—É–∂—Å–∫–∏–µ –≥–æ–ª–æ—Å–∞

| –ì–æ–ª–æ—Å | Engine | –ö–∞—á–µ—Å—Ç–≤–æ | –•–∞—Ä–∞–∫—Ç–µ—Ä | –î–ª—è —Ä–æ–±–æ—Ç–∞ |
|-------|--------|----------|----------|------------|
| **dmitri** (Piper) | Neural | ‚≠ê‚≠ê‚≠ê‚≠ê | –°–ø–æ–∫–æ–π–Ω—ã–π, —á—ë—Ç–∫–∏–π | ‚úÖ **–ò–¥–µ–∞–ª—å–Ω–æ** |
| aidar (Silero) | Neural | ‚≠ê‚≠ê‚≠ê‚≠ê | –ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π | ‚úÖ –•–æ—Ä–æ—à–æ |
| anton (Yandex) | Neural | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | –î—Ä—É–∂–µ–ª—é–±–Ω—ã–π | ‚úÖ Fallback |

### –ñ–µ–Ω—Å–∫–∏–µ –≥–æ–ª–æ—Å–∞

| –ì–æ–ª–æ—Å | Engine | –ö–∞—á–µ—Å—Ç–≤–æ | –•–∞—Ä–∞–∫—Ç–µ—Ä | –î–ª—è —Ä–æ–±–æ—Ç–∞ |
|-------|--------|----------|----------|------------|
| **irina** (Piper) | Neural | ‚≠ê‚≠ê‚≠ê‚≠ê | –¢—ë–ø–ª—ã–π | ‚úÖ –•–æ—Ä–æ—à–æ |
| baya (Silero) | Neural | ‚≠ê‚≠ê‚≠ê‚≠ê | –ü—Ä–∏—è—Ç–Ω—ã–π | ‚úÖ –•–æ—Ä–æ—à–æ |
| alena (Yandex) | Neural | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | –ú—è–≥–∫–∏–π | ‚úÖ Fallback |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –¥–ª—è ROBBOX:** `dmitri` (Piper) - —á—ë—Ç–∫–∏–π –º—É–∂—Å–∫–æ–π –≥–æ–ª–æ—Å, —Ö–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ä–æ–±–æ—Ç–∞

---

## üìù –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è (—Ç–æ–ª—å–∫–æ offline)

```yaml
stt_node:
  provider: "vosk"
  vosk:
    model_path: "/models/vosk-model-small-ru-0.22"

tts_node:
  provider: "piper"
  piper:
    model_path: "/models/ru_RU-dmitri-medium.onnx"
```

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è (hybrid)

```yaml
stt_node:
  provider: "vosk"
  vosk:
    model_path: "/models/vosk-model-small-ru-0.22"
    confidence_threshold: 0.7
  fallback_provider: "yandex"
  yandex:
    use_when_confidence_below: 0.7

tts_node:
  provider: "piper"
  piper:
    model_path: "/models/ru_RU-dmitri-medium.onnx"
  fallback_provider: "yandex"
  yandex:
    use_for_important: true
    emotion: "good"
```

---

## ‚ö° Performance

### Latency Breakdown

```
Component          Latency     Notes
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
VAD detection      ~50ms       ReSpeaker hardware
Audio buffering    ~100ms      Chunk accumulation
Vosk STT           ~300ms      Real-time streaming
Piper TTS          ~200ms      ONNX inference
Audio playback     ~100ms      ALSA buffering
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
TOTAL              ~750ms      ‚úÖ <1s target met

For comparison (online):
Yandex STT         ~500ms      Network + API
Yandex TTS         ~300ms      Network + API
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Hybrid TOTAL       ~900ms      Still <1s!
```

---

## üîß –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å (–º–µ–¥–ª–µ–Ω–Ω–µ–µ)

```yaml
stt_node:
  provider: "whisper"
  whisper:
    model: "small"  # 85% accuracy, 2-3s latency

tts_node:
  provider: "silero"
  silero:
    speaker: "baya"  # Multiple voices
```

**Tradeoff:** +1-2s latency, +1.5GB RAM

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å

```yaml
stt_node:
  provider: "vosk"
  vosk:
    model_path: "/models/vosk-model-small-ru-0.22"  # 45 MB

tts_node:
  provider: "rhvoice"  # 50 MB, –Ω–æ –∑–≤—É—á–∏—Ç –∫–∞–∫ —Ä–æ–±–æ—Ç
```

**Tradeoff:** –•—É–∂–µ –∫–∞—á–µ—Å—Ç–≤–æ TTS (–∑–≤—É—á–∏—Ç —Ä–æ–±–æ—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ)

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –¢–æ–ª—å–∫–æ –æ–±–ª–∞—á–Ω–æ–µ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```yaml
stt_node:
  provider: "yandex"

tts_node:
  provider: "yandex"
```

**Tradeoff:** –¢—Ä–µ–±—É–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç, –ø–ª–∞—Ç–Ω–æ, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –æ–±–ª–∞–∫–∞

---

## üéØ –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è ROBBOX

### Primary Setup

```yaml
STT: Vosk small (45 MB, 500 MB RAM, <0.5s)
TTS: Piper dmitri (63 MB, 100 MB RAM, <0.5s)
LLM: DeepSeek API (online, –Ω–æ –º–æ–∂–Ω–æ Ollama –¥–ª—è offline)

Fallbacks:
- Vosk confidence <70% ‚Üí Yandex STT
- Important messages ‚Üí Yandex TTS (emotions)

Total RAM: ~1.5 GB ‚úÖ
Total latency: ~750ms ‚úÖ
Offline: ‚úÖ (—Å smart fallback)
```

### Benefits

‚úÖ **–ê–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
‚úÖ **–°–∫–æ—Ä–æ—Å—Ç—å** - <1s –æ—Ç —Ä–µ—á–∏ –¥–æ –æ—Ç–≤–µ—Ç–∞
‚úÖ **–ö–∞—á–µ—Å—Ç–≤–æ** - neural TTS, —Ö–æ—Ä–æ—à–∏–π –≥–æ–ª–æ—Å
‚úÖ **–ü–∞–º—è—Ç—å** - —É–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –≤ 2GB budget
‚úÖ **Fallback** - —É–º–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –æ–±–ª–∞–∫–æ
‚úÖ **Cost** - –±–µ—Å–ø–ª–∞—Ç–Ω–æ (offline), –¥–µ—à—ë–≤–æ (fallback)

---

## üìö –†–µ—Å—É—Ä—Å—ã

- **–ü–æ–ª–Ω—ã–π research:** `docs/development/STT_TTS_RESEARCH.md` (12+ —Å—Ç—Ä–∞–Ω–∏—Ü)
- **Quick reference:** `docs/development/STT_TTS_QUICK_REFERENCE.md`
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** `docker/vision/config/voice/voice_assistant.yaml`
- **Dockerfile:** `docker/vision/voice_assistant/Dockerfile`

### –°—Å—ã–ª–∫–∏

**STT:**
- Vosk: https://alphacephei.com/vosk/
- Whisper: https://github.com/openai/whisper
- Yandex STT: https://cloud.yandex.ru/docs/speechkit/stt/

**TTS:**
- Piper: https://github.com/rhasspy/piper
- Silero: https://github.com/snakers4/silero-models
- Yandex TTS: https://cloud.yandex.ru/docs/speechkit/tts/

**ROS2:**
- audio_common: https://github.com/ros2/audio_common

---

**–î–∞—Ç–∞:** 2025-01-12  
**–°—Ç–∞—Ç—É—Å:** Research Complete ‚úÖ  
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –†–µ–∞–ª–∏–∑–∞—Ü–∏—è STT/TTS nodes –≤ rob_box_voice
