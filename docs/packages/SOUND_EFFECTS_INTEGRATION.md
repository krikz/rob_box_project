# üéµ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–≤—É–∫–æ–≤—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –≤ Internal Dialogue

–û–ø–∏—Å–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è sound_pack –¥–ª—è —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è —Ä–æ–±–æ—Ç–∞ –≤ —Å–∏—Å—Ç–µ–º–µ Internal Dialogue.

## üì¶ –î–æ—Å—Ç—É–ø–Ω—ã–µ –∑–≤—É–∫–∏

| –§–∞–π–ª | –≠–º–æ—Ü–∏—è | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|------|--------|---------------|
| `thinking.mp3` | –†–∞–∑–º—ã—à–ª–µ–Ω–∏–µ | –û–±–¥—É–º—ã–≤–∞–Ω–∏–µ, –∞–Ω–∞–ª–∏–∑ —Å–∏—Ç—É–∞—Ü–∏–∏ |
| `surprise.mp3` | –£–¥–∏–≤–ª–µ–Ω–∏–µ | –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –Ω–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ |
| `confused.mp3` | –ó–∞–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ | –ù–µ–ø–æ–Ω–∏–º–∞–Ω–∏–µ, –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç—å |
| `angry_1.mp3` | –ù–µ–¥–æ–≤–æ–ª—å—Å—Ç–≤–æ | –ü—Ä–æ–±–ª–µ–º—ã, –æ—à–∏–±–∫–∏ (–ª—ë–≥–∫–∞—è —Ñ–æ—Ä–º–∞) |
| `angry_2.mp3` | –ó–ª–æ—Å—Ç—å | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã, –∞–≤–∞—Ä–∏–∏ |
| `cute.mp3` | –†–∞–¥–æ—Å—Ç—å | –£—Å–ø–µ—Ö, –Ω–æ—Ä–º–∞, –ø–æ–∑–∏—Ç–∏–≤ |
| `very_cute.mp3` | –û—á–µ–Ω—å —Ä–∞–¥ | –û—Å–æ–±–∞—è —Ä–∞–¥–æ—Å—Ç—å, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ |
| `talk_1.mp3` | –†–∞–∑–≥–æ–≤–æ—Ä 1 | –§–æ–Ω–æ–≤—ã–π –∑–≤—É–∫ –±–µ—Å–µ–¥—ã |
| `talk_2.mp3` | –†–∞–∑–≥–æ–≤–æ—Ä 2 | –§–æ–Ω–æ–≤—ã–π –∑–≤—É–∫ –±–µ—Å–µ–¥—ã |
| `talk_3.mp3` | –†–∞–∑–≥–æ–≤–æ—Ä 3 | –§–æ–Ω–æ–≤—ã–π –∑–≤—É–∫ –±–µ—Å–µ–¥—ã |
| `talk_4.mp3` | –†–∞–∑–≥–æ–≤–æ—Ä 4 | –§–æ–Ω–æ–≤—ã–π –∑–≤—É–∫ –±–µ—Å–µ–¥—ã |

## üéØ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å –∑–≤—É–∫–æ–≤—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏

### 1. **Startup Greeting Node**

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–∏—Å—Ç–µ–º—ã

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
1. **–°—Ç–∞—Ä—Ç –Ω–æ–¥—ã** ‚Üí `thinking.mp3` (—Å–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è)
2. **–ü–∞—É–∑–∞ 5 —Å–µ–∫** ‚Üí –æ–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ Context Aggregator
3. **–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞** ‚Üí `cute.mp3` –∏–ª–∏ `very_cute.mp3` (—Å–ª—É—á–∞–π–Ω–æ)
4. **TTS –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ** ‚Üí —Å–ª—É—á–∞–π–Ω–∞—è —Ñ—Ä–∞–∑–∞ –∏–∑ –Ω–∞–±–æ—Ä–∞

**–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è:**
- "–Ø –≤–µ—Ä–Ω—É–ª—Å—è! –°–∏—Å—Ç–µ–º—ã –≤ –Ω–æ—Ä–º–µ, –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!"
- "–ü—Ä–∏–≤–µ—Ç! –í—Å–µ –º–æ–¥—É–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã, –∂–¥—É –∫–æ–º–∞–Ω–¥!"
- "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –≥–æ—Ç–æ–≤ –ø–æ–º–æ–≥–∞—Ç—å!"
- "–°–∏—Å—Ç–µ–º—ã –∑–∞–ø—É—â–µ–Ω—ã! –ö–∞–∫ —è –º–æ–≥—É –ø–æ–º–æ—á—å?"
- "–í—Å—ë –≥–æ—Ç–æ–≤–æ! –ß–µ–º –∑–∞–π–º—ë–º—Å—è?"
- "–†–∞–¥ –≤–µ—Ä–Ω—É—Ç—å—Å—è! –í—Å–µ –¥–∞—Ç—á–∏–∫–∏ –≤ –Ω–æ—Ä–º–µ!"
- "–û–Ω–ª–∞–π–Ω! –î–∏–∞–ª–æ–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–∫—Ç–∏–≤–Ω–∞!"
- "–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –°–ª—É—à–∞—é –≤–∞—Å!"

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```yaml
wait_time: 5.0          # –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π
check_timeout: 30.0     # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
enable_greeting: true   # –í–∫–ª—é—á–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
```

**–§–∞–π–ª:** `src/rob_box_perception/rob_box_perception/startup_greeting_node.py`

---

### 2. **Reflection Node** (Internal Dialogue)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–≤—É–∫–æ–≤–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ —ç–º–æ—Ü–∏–π –ø—Ä–∏ —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è—Ö

**–¢—Ä–∏–≥–≥–µ—Ä—ã –∑–≤—É–∫–æ–≤:**

| –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –≤ –º—ã—Å–ª–∏ | –ó–≤—É–∫ | –ü—Ä–∏–º–µ—Ä –º—ã—Å–ª–∏ |
|------------------------|------|--------------|
| —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ, –≤–∞—É, –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ, —Å—Ç—Ä–∞–Ω–Ω–æ, –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ | `surprise` | "–£–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ, –±–∞—Ç–∞—Ä–µ—è —Ä–∞–∑—Ä—è–∂–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ –æ–±—ã—á–Ω–æ–≥–æ" |
| –¥—É–º–∞—é, —Ä–∞–∑–º—ã—à–ª—è—é, –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é, —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—é, –ø—Ä–æ–≤–µ—Ä—è—é | `thinking` | "–î—É–º–∞—é, —Å—Ç–æ–∏—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∞—Ç—á–∏–∫–æ–≤" |
| –Ω–µ —É–≤–µ—Ä–µ–Ω, —Å–ª–æ–∂–Ω–æ, –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ, –∑–∞—Ç—Ä—É–¥–Ω—è—é—Å—å, –Ω–µ –∑–Ω–∞—é | `confused` | "–ù–µ —É–≤–µ—Ä–µ–Ω, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —ç—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã" |
| –æ—à–∏–±–∫–∞, –ø—Ä–æ–±–ª–µ–º–∞, –∫—Ä–∏—Ç–∏—á–Ω–æ, degraded, —Å–±–æ–π, –∞–≤–∞—Ä–∏—è | `angry` | "–ü—Ä–æ–±–ª–µ–º–∞ —Å –Ω–æ–¥–æ–π vision_node - –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö!" |
| –æ—Ç–ª–∏—á–Ω–æ, —Ö–æ—Ä–æ—à–æ, —É—Å–ø–µ—à–Ω–æ, –≥–æ—Ç–æ–≤, healthy, –Ω–æ—Ä–º–∞ | `cute` | "–û—Ç–ª–∏—á–Ω–æ, –≤—Å–µ —Å–∏—Å—Ç–µ–º—ã –≤ –Ω–æ—Ä–º–µ!" |

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
```python
def _trigger_sound_for_thought(thought: str):
    """–ê–Ω–∞–ª–∏–∑ —ç–º–æ—Ü–∏–∏ –º—ã—Å–ª–∏ –∏ —Ç—Ä–∏–≥–≥–µ—Ä –∑–≤—É–∫–∞"""
    thought_lower = thought.lower()
    
    if '—É–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ' in thought_lower or '–≤–∞—É' in thought_lower:
        play_sound('surprise')
    elif '–¥—É–º–∞—é' in thought_lower:
        play_sound('thinking')
    # ... –∏ —Ç.–¥.
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** –ó–≤—É–∫ –∏–≥—Ä–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ `_publish_thought()`

**–§–∞–π–ª:** `src/rob_box_perception/rob_box_perception/reflection_node.py` (—Å—Ç—Ä–æ–∫–∏ 626-664)

---

### 3. **Health Monitor**

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–≤—É–∫–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã

**–¢—Ä–∏–≥–≥–µ—Ä—ã:**

| –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ | –ó–≤—É–∫ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------------|------|----------|
| HEALTHY ‚Üí DEGRADED | `confused` | –ü–æ—è–≤–∏–ª–∏—Å—å –æ—à–∏–±–∫–∏ (5+ –∑–∞ –º–∏–Ω—É—Ç—É) |
| DEGRADED ‚Üí CRITICAL | `angry_2` | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Ç—É–∞—Ü–∏—è (fatal errors) |
| CRITICAL/DEGRADED ‚Üí HEALTHY | `cute` | –°–∏—Å—Ç–µ–º–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª–∞—Å—å |

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ó–≤—É–∫ –∏–≥—Ä–∞–µ—Ç—Å—è **–¢–û–õ–¨–ö–û –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏** —Å—Ç–∞—Ç—É—Å–∞ (–Ω–µ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `self.last_status` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
- –ü–∞—Ä–∞–º–µ—Ç—Ä `enable_sounds=True` –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è/–æ—Ç–∫–ª—é—á–µ–Ω–∏—è

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
```python
if status != last_status:
    if status == "CRITICAL":
        play_sound('angry_2')
    elif status == "DEGRADED":
        play_sound('confused')
    elif status == "HEALTHY" and last_status is not None:
        play_sound('cute')
    
    last_status = status
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```yaml
enable_sounds: true     # –í–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
check_rate: 1.0         # –ß–∞—Å—Ç–æ—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ (Hz)
degraded_threshold: 5   # –û—à–∏–±–æ–∫ –¥–ª—è degraded —Å—Ç–∞—Ç—É—Å–∞
critical_threshold: 10  # –û—à–∏–±–æ–∫ –¥–ª—è critical
```

**–§–∞–π–ª:** `src/rob_box_perception/rob_box_perception/health_monitor.py` (—Å—Ç—Ä–æ–∫–∏ 88-107)

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Launch —Ñ–∞–π–ª (Docker)

```python
# docker/vision/config/perception/internal_dialogue_docker.launch.py

Node(
    package='rob_box_perception',
    executable='health_monitor',
    parameters=[{
        'enable_sounds': True,  # –ó–≤—É–∫–∏ –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞
    }],
),

Node(
    package='rob_box_perception',
    executable='reflection_node',
    # –ó–≤—É–∫–∏ –≤–∫–ª—é—á–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
),

Node(
    package='rob_box_perception',
    executable='startup_greeting',
    parameters=[{
        'enable_greeting': True,  # –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
        'wait_time': 5.0,
    }],
),
```

### Sound Node

–í—Å–µ –∑–≤—É–∫–∏ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ **Sound Node** (rob_box_voice):

**Topic:** `/voice/sound/trigger` (String)

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
# –ü—Ä–æ–∏–≥—Ä–∞—Ç—å –∑–≤—É–∫ –≤—Ä—É—á–Ω—É—é
ros2 topic pub /voice/sound/trigger std_msgs/msg/String "data: 'thinking'"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Sound Node –≥–æ—Ç–æ–≤
ros2 topic echo /voice/sound/state
```

## üìä ROS Topics

| Topic | Type | Direction | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------|-----------|----------|
| `/voice/sound/trigger` | String | ‚Üí Sound Node | –¢—Ä–∏–≥–≥–µ—Ä –∑–≤—É–∫–∞ (–∏–º—è —Ñ–∞–π–ª–∞) |
| `/voice/sound/state` | String | ‚Üê Sound Node | –°–æ—Å—Ç–æ—è–Ω–∏–µ: ready/playing_X |
| `/reflection/internal_thought` | String | ‚Üê Reflection | –ú—ã—Å–ª–∏ —Ä–æ–±–æ—Ç–∞ (—Å —ç–º–æ—Ü–∏—è–º–∏) |
| `/perception/context_update` | PerceptionEvent | ‚Üê Context Aggregator | –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–π |

## üé¨ Workflow –ø—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

```
1. [Startup Greeting] thinking.mp3
   ‚è± 2 —Å–µ–∫—É–Ω–¥—ã –∑–∞–≥—Ä—É–∑–∫–∏...

2. [Context Aggregator] –ü—É–±–ª–∏–∫—É–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç
   [Startup Greeting] –ü–æ–ª—É—á–∞–µ—Ç /perception/context_update

3. [Startup Greeting] very_cute.mp3
   ‚è± 1.5 —Å–µ–∫—É–Ω–¥—ã –ø–∞—É–∑—ã...

4. [TTS] "–ü—Ä–∏–≤–µ—Ç! –í—Å–µ –º–æ–¥—É–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã, –∂–¥—É –∫–æ–º–∞–Ω–¥!"

5. [Startup Greeting] –ó–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É (–±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–∞)
```

### –ü—Ä–∏–º–µ—Ä 2: Reflection –æ–±–Ω–∞—Ä—É–∂–∏–ª –ø—Ä–æ–±–ª–µ–º—É

```
1. [Context Aggregator] –í–∏–¥–∏—Ç –æ—à–∏–±–∫–∏ –≤ /rosout
2. [Context Aggregator] –ü—É–±–ª–∏–∫—É–µ—Ç PerceptionEvent —Å system_health='degraded'

3. [Reflection Node] –ü–æ–ª—É—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç
4. [Reflection Node] –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º—ã—Å–ª—å: "–ü—Ä–æ–±–ª–µ–º–∞ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π - –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ—Ç LIDAR!"
5. [Reflection Node] –¢—Ä–∏–≥–≥–µ—Ä –∑–≤—É–∫–∞: angry (–ø–æ –∫–ª—é—á–µ–≤–æ–º—É —Å–ª–æ–≤—É "–ø—Ä–æ–±–ª–µ–º–∞")
6. [Sound Node] –ò–≥—Ä–∞–µ—Ç angry_1.mp3

7. [Reflection Node] –ü—É–±–ª–∏–∫—É–µ—Ç –º—ã—Å–ª—å –≤ /reflection/internal_thought
8. [Reflection Node] –ï—Å–ª–∏ should_speak=true ‚Üí /voice/tts/request
```

### –ü—Ä–∏–º–µ—Ä 3: Health Monitor –≤–∏–¥–∏—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

```
1. [Health Monitor] recent_errors = 7 ‚Üí status = DEGRADED
   last_status = None ‚Üí –Ω–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å!
   
2. [Health Monitor] –ò–≥—Ä–∞–µ—Ç confused.mp3
   last_status = DEGRADED

3. ‚è± 60 —Å–µ–∫—É–Ω–¥ –ø—Ä–æ—Ö–æ–¥–∏—Ç...
   recent_errors = 2 (—Å—Ç–∞—Ä—ã–µ –æ—à–∏–±–∫–∏ –≤—ã—à–ª–∏ –∏–∑ –æ–∫–Ω–∞ 60 —Å–µ–∫)

4. [Health Monitor] status = HEALTHY
   last_status = DEGRADED ‚Üí –∏–∑–º–µ–Ω–µ–Ω–∏–µ!
   
5. [Health Monitor] –ò–≥—Ä–∞–µ—Ç cute.mp3
   last_status = HEALTHY
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–≤—É–∫–∏ –≤—Ä—É—á–Ω—É—é

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å Sound Node
ros2 run rob_box_voice sound_node

# 2. –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç—å –∑–≤—É–∫–∏
ros2 topic pub /voice/sound/trigger std_msgs/msg/String "data: 'thinking'"
ros2 topic pub /voice/sound/trigger std_msgs/msg/String "data: 'surprise'"
ros2 topic pub /voice/sound/trigger std_msgs/msg/String "data: 'angry'"
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Reflection —ç–º–æ—Ü–∏–∏

```bash
# –°–ª—É—à–∞—Ç—å –º—ã—Å–ª–∏
ros2 topic echo /reflection/internal_thought

# –°–ª—É—à–∞—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä—ã –∑–≤—É–∫–æ–≤
ros2 topic echo /voice/sound/trigger

# –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å –ø—Ä–æ–±–ª–µ–º–æ–π
# (–≤ context_aggregator –¥–æ–±–∞–≤–∏—Ç—å fake –æ—à–∏–±–∫–∏)
```

### –õ–æ–≥–∏ –∑–≤—É–∫–æ–≤

```bash
# Reflection
docker logs perception | grep "üéµ"

# Health Monitor
docker logs perception | grep "Health –∑–≤—É–∫"

# Startup Greeting
docker logs perception | grep "Startup Greeting"
```

## üìù –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∑–≤—É–∫–æ–≤

1. **–î–æ–±–∞–≤–∏—Ç—å MP3 –≤ sound_pack/**
   ```bash
   cd /home/ros2/rob_box_project/sound_pack
   cp ~/new_sound.mp3 ./excited.mp3
   ```

2. **–û–±–Ω–æ–≤–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä –≤ Reflection Node**
   ```python
   # reflection_node.py, –º–µ—Ç–æ–¥ _trigger_sound_for_thought()
   elif any(word in thought_lower for word in ['–∫—Ä—É—Ç–æ', '—Å—É–ø–µ—Ä', '–≤–æ—Å—Ö–∏—Ç–∏—Ç–µ–ª—å–Ω–æ']):
       self._play_sound('excited')
   ```

3. **–ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å**
   ```bash
   cd ~/perception_ws
   colcon build --packages-select rob_box_perception
   source install/setup.bash
   ```

## üéØ Best Practices

1. **–ù–ï —Å–ø–∞–º–∏—Ç—å –∑–≤—É–∫–∞–º–∏** - –æ–¥–∏–Ω –∑–≤—É–∫ –Ω–∞ –æ–¥–Ω—É —ç–º–æ—Ü–∏—é
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ Health Monitor** —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞
3. **–í Reflection** - –∑–≤—É–∫–∏ –¥–ª—è –≤–∞–∂–Ω—ã—Ö –º—ã—Å–ª–µ–π, –Ω–µ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
4. **Startup Greeting** –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
5. **–ì—Ä–æ–º–∫–æ—Å—Ç—å** —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç—Å—è –≤ Sound Node –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `volume_db`

## üöÄ Deployment

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å Docker –æ–±—Ä–∞–∑:

```bash
# –°–±–æ—Ä–∫–∞ perception –æ–±—Ä–∞–∑–∞
docker build -f docker/vision/perception/Dockerfile \
  -t ghcr.io/krikz/rob_box:perception-humble-test .

# –ò–ª–∏ —á–µ—Ä–µ–∑ CI/CD
git push origin feature/internal-dialogue
# ‚Üí GitHub Actions –ø–µ—Ä–µ—Å–æ–±–µ—Ä—ë—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

## üìö –°–º. —Ç–∞–∫–∂–µ

- [Sound Node –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](../rob_box_voice/docs/PHASE4_SOUND_IMPLEMENTATION.md)
- [Internal Dialogue –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](./INTERNAL_DIALOGUE_ARCHITECTURE.md)
- [Animation Editor](../guides/ANIMATION_EDITOR.md) - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏
