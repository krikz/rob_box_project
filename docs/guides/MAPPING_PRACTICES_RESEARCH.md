# –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–∫—Ç–∏–∫ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ Rob Box

> **–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 24 –æ–∫—Ç—è–±—Ä—è 2025  
> **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç  
> **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞**: Rob Box (Dual Raspberry Pi 5, RTABMAP, Nav2)

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–í–≤–µ–¥–µ–Ω–∏–µ](#–≤–≤–µ–¥–µ–Ω–∏–µ)
2. [–û–±–∑–æ—Ä —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º—ã](#–æ–±–∑–æ—Ä-—Ç–µ–∫—É—â–µ–π-—Å–∏—Å—Ç–µ–º—ã)
3. [–ü—Ä–∞–∫—Ç–∏–∫–∏ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞–Ω–∏—è —Å RTABMAP](#–ø—Ä–∞–∫—Ç–∏–∫–∏-–∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞–Ω–∏—è-—Å-rtabmap)
4. [–ê–≤—Ç–æ–Ω–æ–º–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π](#–∞–≤—Ç–æ–Ω–æ–º–Ω–æ–µ-–∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ-–≤—ã–±—Ä–∞–Ω–Ω—ã—Ö-–æ–±–ª–∞—Å—Ç–µ–π)
5. [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ AprilTag –∫—É–±–æ–≤ –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-apriltag-–∫—É–±–æ–≤-–¥–ª—è-—Ç–æ—á–Ω–æ—Å—Ç–∏)
6. [–û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤](#–æ—á–∏—Å—Ç–∫–∞-–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö-–º–∞—Ä–∫–µ—Ä–æ–≤)
7. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö —Ç–æ—á–µ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö-—Ç–æ—á–µ–∫-–Ω–∞–≤–∏–≥–∞—Ü–∏–∏)
8. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≥–æ–ª–æ—Å–æ–≤—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-—Å-–≥–æ–ª–æ—Å–æ–≤—ã–º-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º)
9. [–û–±–ª–∞—á–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Zenoh](#–æ–±–ª–∞—á–Ω–∞—è-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-—á–µ—Ä–µ–∑-zenoh)
10. [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏-–ø–æ-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)

---

## 1. –í–≤–µ–¥–µ–Ω–∏–µ

### 1.1. –¶–µ–ª—å –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è

–î–∞–Ω–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –∫ —Å–æ–∑–¥–∞–Ω–∏—é –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –∫–∞—Ä—Ç–∞–º–∏ –¥–ª—è –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–≥–æ —Ä–æ–±–æ—Ç–∞ Rob Box. –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏:

- üó∫Ô∏è **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞–Ω–∏—è** - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç —Å RTABMAP
- ü§ñ **–ê–≤—Ç–æ–Ω–æ–º–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ** - —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –º–µ—Ç–æ–¥–æ–≤ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–≥–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π
- üéØ **–¢–æ—á–Ω–æ—Å—Ç—å –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏–∏** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ AprilTag –º–∞—Ä–∫–µ—Ä–æ–≤ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∫–∞—Ä—Ç
- üîß **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π** - –æ–±–ª–∞—á–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ—á–∫–∞–º–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- üó£Ô∏è **–ì–æ–ª–æ—Å–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥ —Å voice assistant

### 1.2. –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞

Rob Box - —ç—Ç–æ –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –º–æ–±–∏–ª—å–Ω—ã–π —Ä–æ–±–æ—Ç —Å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π:

- **Main Pi (Raspberry Pi 5, 16GB)**: RTABMAP SLAM, Nav2 –Ω–∞–≤–∏–≥–∞—Ü–∏—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ—Ç–æ—Ä–∞–º–∏ (VESC)
- **Vision Pi (Raspberry Pi 5, 8GB)**: OAK-D –∫–∞–º–µ—Ä–∞, LSLIDAR N10, AprilTag –¥–µ—Ç–µ–∫—Ü–∏—è, –≥–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç
- **Middleware**: Zenoh DDS —Å –æ–±–ª–∞—á–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π (zenoh.robbox.online:7447)
- **SLAM**: RTABMAP —Å 2D LiDAR (—Ç–æ–ª—å–∫–æ –ª–∞–∑–µ—Ä–Ω—ã–π —Å–∫–∞–Ω–µ—Ä, –±–µ–∑ RGB-D)
- **–ù–∞–≤–∏–≥–∞—Ü–∏—è**: Nav2 —Å DWB –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–º –∏ NavFn –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–º

---

## 2. –û–±–∑–æ—Ä —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º—ã

### 2.1. –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è RTABMAP

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `docker/main/config/rtabmap/rtabmap.yaml`

```yaml
rtabmap:
  ros__parameters:
    # –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã
    Mem/IncrementalMemory: true  # SLAM mode (mapping)
    
    # LaserScan –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    subscribe_scan: true
    subscribe_rgbd: false  # –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º RGB-D
    
    # Grid mapping
    Grid/FromDepth: "false"  # –¢–æ–ª—å–∫–æ LiDAR
    Grid/CellSize: "0.05"    # 5—Å–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
    Grid/RangeMax: "10.0"    # –î–æ 10 –º–µ—Ç—Ä–æ–≤
    
    # ICP –¥–ª—è 2D –ª–∏–¥–∞—Ä–∞
    Reg/Strategy: "1"        # ICP (Iterative Closest Point)
    Icp/PointToPlane: "false"  # 2D ICP
    Icp/Iterations: "30"
```

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å 2D LiDAR (LSLIDAR N10)
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: `/maps/rtabmap.db`
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ–∂–∏–º–æ–≤: Mapping (—Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã) –∏ Localization (–Ω–∞–≤–∏–≥–∞—Ü–∏—è)
- ‚úÖ Loop closure detection –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ –∫–∞—Ä—Ç—ã

### 2.2. –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≥–æ–ª–æ—Å–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `src/rob_box_voice/rob_box_voice/command_node.py`

–£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏–∏:

```python
# –°–ª–æ–≤–∞—Ä—å waypoints (—Ö–∞—Ä–¥–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
self.waypoints = {
    '–¥–æ–º': {'x': 0.0, 'y': 0.0, 'theta': 0.0},
    '–∫—É—Ö–Ω—è': {'x': 2.0, 'y': 1.0, 'theta': 0.0},
    '–≥–æ—Å—Ç–∏–Ω–∞—è': {'x': 3.0, 'y': 2.0, 'theta': 1.57},
    '—Ç–æ—á–∫–∞ 1': {'x': 1.0, 'y': 0.0, 'theta': 0.0},
}
```

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: `docs/packages/MAPPING_COMMANDS.md` —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é –∫–æ–º–∞–Ω–¥:
- "–ò—Å—Å–ª–µ–¥—É–π —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—é" - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∫–∞—Ä—Ç—ã
- "–ü—Ä–æ–¥–æ–ª–∂–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ" - –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏–∏
- "–ó–∞–∫–æ–Ω—á–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ" - –ø–µ—Ä–µ—Ö–æ–¥ –≤ —Ä–µ–∂–∏–º –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏


### 2.3. AprilTag —Å–∏—Å—Ç–µ–º–∞

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `docker/vision/config/apriltag/apriltag_config.yaml`

```yaml
apriltag:
  ros__parameters:
    family: 36h11          # –°–µ–º–µ–π—Å—Ç–≤–æ —Ç–µ–≥–æ–≤
    size: 0.16             # –†–∞–∑–º–µ—Ä 16 —Å–º
    image_transport: raw
    detector:
      threads: 2
      decimate: 1.0
      refine: true
```

**–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–≥–æ–≤**: `scripts/generate_apriltags.py` - —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—á–∞—Ç–∏ —Ç–µ–≥–æ–≤ —Å ID

---

## 3. –ü—Ä–∞–∫—Ç–∏–∫–∏ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞–Ω–∏—è —Å RTABMAP

### 3.1. –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã RTABMAP

#### –†–µ–∂–∏–º Mapping (–ö–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞–Ω–∏–µ)

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
```yaml
Mem/IncrementalMemory: true  # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —É–∑–ª–æ–≤ –≤ –≥—Ä–∞—Ñ
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**:
- ‚úÖ –ü–µ—Ä–≤–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–º–µ—â–µ–Ω–∏—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∫–∞—Ä—Ç–µ
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ø–æ–º–µ—â–µ–Ω–∏–∏

**–ü—Ä–æ—Ü–µ—Å—Å**:
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å RTABMAP –≤ —Ä–µ–∂–∏–º–µ mapping
2. –ú–µ–¥–ª–µ–Ω–Ω–æ –¥–≤–∏–≥–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ –ø–æ–º–µ—â–µ–Ω–∏–µ (0.2-0.3 –º/—Å)
3. –û–±–µ—Å–ø–µ—á–∏—Ç—å –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ —Å–∫–∞–Ω–æ–≤ (–Ω–µ –¥–µ–ª–∞—Ç—å —Ä–µ–∑–∫–∏—Ö –ø–æ–≤–æ—Ä–æ—Ç–æ–≤)
4. –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –∫ —É–∂–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–º –º–µ—Å—Ç–∞–º –¥–ª—è loop closure

#### –†–µ–∂–∏–º Localization (–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è)

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
```yaml
Mem/IncrementalMemory: false  # –ù–µ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —É–∑–ª—ã
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**:
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –≥–æ—Ç–æ–≤–æ–π –∫–∞—Ä—Ç–µ
- ‚úÖ –ê–≤—Ç–æ–Ω–æ–º–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞
- ‚úÖ –ü–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- ‚ö° –ë—ã—Å—Ç—Ä–µ–µ —á–µ–º —Ä–µ–∂–∏–º mapping (–º–µ–Ω—å—à–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π)
- üíæ –ù–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- üéØ –ë–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è

### 3.2. –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –∫–∞—Ä—Ç—ã

#### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

```bash
# –ù–∞ Main Pi
cd ~/rob_box_project/docker/main

# –°–æ–∑–¥–∞—Ç—å backup —Ç–µ–∫—É—â–µ–π –∫–∞—Ä—Ç—ã
docker exec rtabmap bash -c "
  if [ -f /maps/rtabmap.db ]; then
    cp /maps/rtabmap.db /maps/backups/rtabmap_backup_$(date +%Y-%m-%d_%H-%M-%S).db
    echo 'Backup created'
  fi
"
```

#### –®–∞–≥ 2: –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ mapping

**–ì–æ–ª–æ—Å–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞**: "–ò—Å—Å–ª–µ–¥—É–π —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—é"

**–ò–ª–∏ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ ROS2**:
```bash
# –°–±—Ä–æ—Å –ø–∞–º—è—Ç–∏ –¥–ª—è –Ω–æ–≤–æ–π –∫–∞—Ä—Ç—ã
ros2 service call /rtabmap/reset_memory std_srvs/srv/Empty

# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤ mapping mode
ros2 service call /rtabmap/set_mode_mapping std_srvs/srv/Empty
```

#### –®–∞–≥ 3: –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–≤–∏–∂–µ–Ω–∏—é**:

- üê¢ **–°–∫–æ—Ä–æ—Å—Ç—å**: 0.2-0.3 –º/—Å (–º–µ–¥–ª–µ–Ω–Ω–æ)
- üîÑ **–ü–æ–≤–æ—Ä–æ—Ç—ã**: –ü–ª–∞–≤–Ω—ã–µ, –Ω–µ –±–æ–ª–µ–µ 30¬∞/—Å
- üìè **–ü–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ**: 30-50% –º–µ–∂–¥—É –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º–∏ —Å–∫–∞–Ω–∞–º–∏
- üîÅ **Loop closure**: –í–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –∫ –∏–∑–≤–µ—Å—Ç–Ω—ã–º –º–µ—Å—Ç–∞–º –∫–∞–∂–¥—ã–µ 2-3 –º–∏–Ω—É—Ç—ã
- üö´ **–ò–∑–±–µ–≥–∞—Ç—å**: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã, –∑–µ—Ä–∫–∞–ª–∞, —Å—Ç–µ–∫–ª–æ

**–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–±—Ö–æ–¥–∞**:

1. **–°–ø–∏—Ä–∞–ª—å–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ** (–¥–ª—è –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤):
   - –ù–∞—á–∞—Ç—å –æ—Ç —Ü–µ–Ω—Ç—Ä–∞
   - –î–≤–∏–≥–∞—Ç—å—Å—è –ø–æ —Ä–∞—Å—à–∏—Ä—è—é—â–µ–π—Å—è —Å–ø–∏—Ä–∞–ª–∏
   - –í–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –∫ —Ü–µ–Ω—Ç—Ä—É –¥–ª—è loop closure

2. **–ü–æ –ø–µ—Ä–∏–º–µ—Ç—Ä—É** (–¥–ª—è –∫–æ–º–Ω–∞—Ç):
   - –ù–∞—á–∞—Ç—å —É —Å—Ç–µ–Ω—ã
   - –î–≤–∏–≥–∞—Ç—å—Å—è –≤–¥–æ–ª—å —Å—Ç–µ–Ω –ø–æ —á–∞—Å–æ–≤–æ–π —Å—Ç—Ä–µ–ª–∫–µ
   - –ó–∞—Ç–µ–º –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—É—é —á–∞—Å—Ç—å

3. **–ó–∏–≥–∑–∞–≥** (–¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –∫–æ—Ä–∏–¥–æ—Ä–æ–≤):
   - –î–≤–∏–≥–∞—Ç—å—Å—è –æ—Ç –æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ü–∞ –∫ –¥—Ä—É–≥–æ–º—É
   - –î–µ–ª–∞—Ç—å –Ω–µ–±–æ–ª—å—à–∏–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –≤–ª–µ–≤–æ-–≤–ø—Ä–∞–≤–æ
   - –í–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –ø–æ —Ç–æ–º—É –∂–µ –º–∞—Ä—à—Ä—É—Ç—É

#### –®–∞–≥ 4: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏–∏

**–ì–æ–ª–æ—Å–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞**: "–ó–∞–∫–æ–Ω—á–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ"

**–ò–ª–∏ –≤—Ä—É—á–Ω—É—é**:
```bash
# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤ localization mode
ros2 service call /rtabmap/set_mode_localization std_srvs/srv/Empty

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∂–∏–º–∞
ros2 param get /rtabmap/rtabmap Mem/IncrementalMemory
# Output: Boolean value is: false (localization mode)
```

### 3.3. –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∫–∞—Ä—Ç—ã

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –æ–±–ª–∞—Å—Ç–∏ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∫–∞—Ä—Ç–µ:

**–ì–æ–ª–æ—Å–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞**: "–ü—Ä–æ–¥–æ–ª–∂–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ"

**–ü—Ä–æ—Ü–µ—Å—Å**:
1. RTABMAP –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ë–î
2. –†–æ–±–æ—Ç –ª–æ–∫–∞–ª–∏–∑—É–µ—Ç—Å—è –Ω–∞ –∫–∞—Ä—Ç–µ
3. –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤ mapping mode
4. –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π
5. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∫–∞—Ä—Ç–æ–π —á–µ—Ä–µ–∑ loop closure

**–í–∞–∂–Ω–æ**: –ù–∞—á–∏–Ω–∞—Ç—å —Å –∏–∑–≤–µ—Å—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏!

---

## 4. –ê–≤—Ç–æ–Ω–æ–º–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π

### 4.1. –ü—Ä–æ–±–ª–µ–º–∞ —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞–Ω–∏—è

**–ó–∞–¥–∞—á–∞**: –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å —ç—Ç–∞–∂–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–¥–Ω–æ –∫—Ä—ã–ª–æ –∑–¥–∞–Ω–∏—è)

**–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥** (—Ä—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ):
- ‚ùå –¢—Ä–µ–±—É–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
- ‚ùå –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç
- ‚ùå –ü—Ä–æ–ø—É—Å–∫ –æ–±–ª–∞—Å—Ç–µ–π

**–ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ** (–∞–≤—Ç–æ–Ω–æ–º–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ):
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞
- ‚úÖ –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏
- ‚úÖ –û–ø–µ—Ä–∞—Ç–æ—Ä –∑–∞–¥–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≥—Ä–∞–Ω–∏—Ü—ã

### 4.2. –ü–æ–¥—Ö–æ–¥—ã –∫ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–º—É –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—é

#### –ü–æ–¥—Ö–æ–¥ 1: Frontier Exploration

**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è**: –†–æ–±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç –∏ –∏—Å—Å–ª–µ–¥—É–µ—Ç –≥—Ä–∞–Ω–∏—Ü—ã –º–µ–∂–¥—É –∏–∑–≤–µ—Å—Ç–Ω—ã–º –∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–º

**–ê–ª–≥–æ—Ä–∏—Ç–º**:
```
1. –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â—É—é –∫–∞—Ä—Ç—É
2. –ù–∞–π—Ç–∏ "frontiers" - –≥—Ä–∞–Ω–∏—Ü—ã –º–µ–∂–¥—É –∏–∑–≤–µ—Å—Ç–Ω—ã–º –∏ unknown
3. –û—Ü–µ–Ω–∏—Ç—å –∫–∞–∂–¥—ã–π frontier:
   - –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ —Ä–æ–±–æ—Ç–∞
   - –†–∞–∑–º–µ—Ä –Ω–µ–∏–∑–≤–µ–¥–∞–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å
4. –í—ã–±—Ä–∞—Ç—å –ª—É—á—à–∏–π frontier
5. –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –ø—É—Ç—å –¥–æ –Ω–µ–≥–æ (Nav2)
6. –î–≤–∏–≥–∞—Ç—å—Å—è –∫ frontier
7. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–∫–∞ –µ—Å—Ç—å frontiers
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è ROS2**:
- –ü–∞–∫–µ—Ç: `explore_lite` –∏–ª–∏ `frontier_exploration`
- –†–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö Nav2
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç RTABMAP –∫–∞—Ä—Ç—É

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞**:
```bash
ros2 launch explore_lite explore.launch.py
```

#### –ü–æ–¥—Ö–æ–¥ 2: Coverage Path Planning

**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è**: –ó–∞—Ä–∞–Ω–µ–µ —Å–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—É—Ç—å –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫—Ä–æ–µ—Ç –≤—Å—é –≤—ã–±—Ä–∞–Ω–Ω—É—é –æ–±–ª–∞—Å—Ç—å

**–ê–ª–≥–æ—Ä–∏—Ç–º—ã**:
- **Boustrophedon (–∑–∏–≥–∑–∞–≥)**: –î–≤–∏–∂–µ–Ω–∏–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏ –ª–∏–Ω–∏—è–º–∏
- **Spiral**: –°–ø–∏—Ä–∞–ª—å–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –æ—Ç —Ü–µ–Ω—Ç—Ä–∞
- **Grid-based**: –î–≤–∏–∂–µ–Ω–∏–µ –ø–æ —Å–µ—Ç–∫–µ

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
- ‚úÖ –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- ‚ùå –¢—Ä–µ–±—É–µ—Ç –∑–Ω–∞–Ω–∏—è –≥—Ä–∞–Ω–∏—Ü –∑–∞—Ä–∞–Ω–µ–µ
- ‚ùå –ù–µ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è–º

#### –ü–æ–¥—Ö–æ–¥ 3: –ì–∏–±—Ä–∏–¥–Ω—ã–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è Rob Box)

**–ò–¥–µ—è**: –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å coverage planning —Å frontier exploration

**–ü—Ä–æ—Ü–µ—Å—Å**:
1. –û–ø–µ—Ä–∞—Ç–æ—Ä –∑–∞–¥–∞–µ—Ç –æ–±–ª–∞—Å—Ç—å –Ω–∞ –ø–ª–∞–Ω–µ –ø–æ–º–µ—â–µ–Ω–∏—è (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è waypoints –¥–ª—è coverage —ç—Ç–æ–π –æ–±–ª–∞—Å—Ç–∏
3. –†–æ–±–æ—Ç —Å–ª–µ–¥—É–µ—Ç –ø–æ waypoints
4. –ï—Å–ª–∏ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç frontier exploration –¥–ª—è –æ–±—Ö–æ–¥–∞
5. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ coverage plan –ø–æ—Å–ª–µ –æ–±—Ö–æ–¥–∞

### 4.3. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤—ã–±–æ—Ä–∞ –æ–±–ª–∞—Å—Ç–∏ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞–Ω–∏—è

#### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è UI

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**:
- üì± –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ –æ–±–ª–∞–∫–æ)
- üó∫Ô∏è –ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–∞–Ω–∞ –ø–æ–º–µ—â–µ–Ω–∏—è (PNG/PDF)
- üìè –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞–Ω–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤
- ‚úèÔ∏è –†–∏—Å–æ–≤–∞–Ω–∏–µ –æ–±–ª–∞—Å—Ç–∏ –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è (–ø–æ–ª–∏–≥–æ–Ω)
- üéØ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è waypoints

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**:
- **Frontend**: React + Leaflet/OpenLayers –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ä—Ç—ã
- **Backend**: FastAPI –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- **–°–≤—è–∑—å —Å —Ä–æ–±–æ—Ç–æ–º**: Zenoh (–ø—É–±–ª–∏–∫–∞—Ü–∏—è waypoints –≤ —Ç–æ–ø–∏–∫)

#### Workflow –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```
1. –û–ø–µ—Ä–∞—Ç–æ—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
   URL: https://zenoh.robbox.online/mapping-ui

2. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –ø–ª–∞–Ω —ç—Ç–∞–∂–∞
   - –ó–∞–≥—Ä—É–∑–∫–∞ PNG/PDF
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–∞—Å—à—Ç–∞–±–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "10 –º–µ—Ç—Ä–æ–≤ = 500 –ø–∏–∫—Å–µ–ª–µ–π")

3. –ù–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç –ø–ª–∞–Ω –Ω–∞ —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é —Ä–æ–±–æ—Ç–∞
   - –†–æ–±–æ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ —Ç–æ—á–∫–∞ –Ω–∞ UI
   - –û–ø–µ—Ä–∞—Ç–æ—Ä —Å–æ–≤–º–µ—â–∞–µ—Ç –ø–ª–∞–Ω —Å –ø–æ–∑–∏—Ü–∏–µ–π —Ä–æ–±–æ—Ç–∞
   - –ü–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –ø–ª–∞–Ω –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

4. –†–∏—Å—É–µ—Ç –æ–±–ª–∞—Å—Ç—å –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
   - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç "Polygon"
   - –ö–ª–∏–∫–∏ –ø–æ —É–≥–ª–∞–º –æ–±–ª–∞—Å—Ç–∏
   - –ó–∞–º—ã–∫–∞–Ω–∏–µ –ø–æ–ª–∏–≥–æ–Ω–∞

5. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
   - –®–∞–≥ –º–µ–∂–¥—É waypoints (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1.5 –º–µ—Ç—Ä–∞)
   - –°—Ç—Ä–∞—Ç–µ–≥–∏—è –æ–±—Ö–æ–¥–∞ (–∑–∏–≥–∑–∞–≥ / —Å–ø–∏—Ä–∞–ª—å)
   - –°–∫–æ—Ä–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è (0.2-0.4 –º/—Å)

6. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞
   - –ö–Ω–æ–ø–∫–∞ "–°–æ–∑–¥–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç"
   - UI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ waypoints
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –º–∞—Ä—à—Ä—É—Ç–∞
   - –ö–Ω–æ–ø–∫–∞ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–æ–±–æ—Ç—É"
   - Waypoints –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –≤ Zenoh: robots/RBXU100001/mapping/waypoints

7. –†–æ–±–æ—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç –º–∞—Ä—à—Ä—É—Ç
   - –ü–æ–ª—É—á–∞–µ—Ç waypoints —á–µ—Ä–µ–∑ Zenoh
   - –ù–∞—á–∏–Ω–∞–µ—Ç –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ UI: robots/RBXU100001/mapping/progress
   - UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–π –ø—É—Ç—å
```

#### –ü—Ä–∏–º–µ—Ä –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ waypoints

**Python –∫–æ–¥ –¥–ª—è backend**:
```python
def generate_coverage_waypoints(polygon, step=1.5, strategy='boustrophedon'):
    """
    –ì–µ–Ω–µ—Ä–∞—Ü–∏—è waypoints –¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏—è –ø–æ–ª–∏–≥–æ–Ω–∞
    
    Args:
        polygon: List[(x, y)] - –≤–µ—Ä—à–∏–Ω—ã –ø–æ–ª–∏–≥–æ–Ω–∞
        step: float - —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –ª–∏–Ω–∏—è–º–∏ (–º–µ—Ç—Ä—ã)
        strategy: str - 'boustrophedon' –∏–ª–∏ 'spiral'
    
    Returns:
        List[{x, y, theta}] - —Å–ø–∏—Å–æ–∫ waypoints
    """
    waypoints = []
    
    if strategy == 'boustrophedon':
        # –ù–∞–π—Ç–∏ bounding box
        min_x = min(p[0] for p in polygon)
        max_x = max(p[0] for p in polygon)
        min_y = min(p[1] for p in polygon)
        max_y = max(p[1] for p in polygon)
        
        # –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∏–≥–∑–∞–≥
        y = min_y
        direction = 1  # 1 = –≤–ø—Ä–∞–≤–æ, -1 = –≤–ª–µ–≤–æ
        
        while y <= max_y:
            if direction == 1:
                x_start, x_end = min_x, max_x
            else:
                x_start, x_end = max_x, min_x
            
            # –î–æ–±–∞–≤–∏—Ç—å waypoint —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤–Ω—É—Ç—Ä–∏ –ø–æ–ª–∏–≥–æ–Ω–∞
            if point_in_polygon((x_start, y), polygon):
                theta = 0 if direction == 1 else 3.14159
                waypoints.append({'x': x_start, 'y': y, 'theta': theta})
            
            if point_in_polygon((x_end, y), polygon):
                theta = 0 if direction == 1 else 3.14159
                waypoints.append({'x': x_end, 'y': y, 'theta': theta})
            
            y += step
            direction *= -1
    
    return waypoints
```


### 4.4. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ Rob Box

**–ù–æ–≤—ã–µ ROS2 –Ω–æ–¥—ã**:

1. **mapping_planner_node** (Main Pi):
   - –ü–æ–¥–ø–∏—Å–∫–∞: `robots/{ROBOT_ID}/mapping/waypoints`
   - –ü—É–±–ª–∏–∫–∞—Ü–∏—è: `robots/{ROBOT_ID}/mapping/progress`
   - –§—É–Ω–∫—Ü–∏—è: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–º –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º

2. **mapping_ui_bridge** (–æ–±–ª–∞—á–Ω—ã–π —Å–µ—Ä–≤–µ—Ä):
   - Zenoh —Ä–æ—É—Ç–µ—Ä –¥–ª—è —Å–≤—è–∑–∏ UI ‚Üî —Ä–æ–±–æ—Ç
   - REST API –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Nav2**:
```python
# –í mapping_planner_node
from nav2_msgs.action import NavigateThroughPoses

def execute_mapping_mission(waypoints):
    """–í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏–∏"""
    # –°–æ–∑–¥–∞—Ç—å Nav2 action
    goal = NavigateThroughPoses.Goal()
    goal.poses = [self.create_pose_stamped(wp) for wp in waypoints]
    
    # –û—Ç–ø—Ä–∞–≤–∏—Ç—å goal
    self.nav_client.send_goal_async(goal, feedback_callback=self.progress_callback)
```

---

## 5. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ AprilTag –∫—É–±–æ–≤ –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏

### 5.1. –ü—Ä–æ–±–ª–µ–º–∞ —Ç–æ—á–Ω–æ—Å—Ç–∏ SLAM —Å 2D LiDAR

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ LiDAR**:
- ‚ùå –ù–∏–∑–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –≤ –¥–ª–∏–Ω–Ω—ã—Ö –∫–æ—Ä–∏–¥–æ—Ä–∞—Ö (–Ω–µ—Ç –±–æ–∫–æ–≤—ã—Ö –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤)
- ‚ùå Drift –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –ø–æ –ø—Ä—è–º–æ–π
- ‚ùå –°–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å loop closure –≤ –æ–¥–Ω–æ–æ–±—Ä–∞–∑–Ω—ã—Ö –ø–æ–º–µ—â–µ–Ω–∏—è—Ö
- ‚ùå –ü–ª–æ—Ö–∞—è —Ä–∞–±–æ—Ç–∞ –≤ –ø—É—Å—Ç—ã—Ö –∫–æ–º–Ω–∞—Ç–∞—Ö

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã (AprilTags)

### 5.2. –ö–æ–Ω—Ü–µ–ø—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è AprilTag –∫—É–±–æ–≤

**–ò–¥–µ—è**: –†–∞—Å—Å—Ç–∞–≤–∏—Ç—å –∫—É–±—ã —Å AprilTag –º–∞—Ä–∫–µ—Ä–∞–º–∏ –≤ –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Å—Ç–∞—Ö –≤–æ –≤—Ä–µ–º—è –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏–∏

**–¢–∏–ø—ã –º–∞—Ä–∫–µ—Ä–æ–≤**:
1. **–í—Ä–µ–º–µ–Ω–Ω—ã–µ** - –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º—è –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏–∏:
   - –†–∞—Å—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º mapping
   - –ü–æ–º–æ–≥–∞—é—Ç –≤ —Å–ª–æ–∂–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö (–∫–æ—Ä–∏–¥–æ—Ä—ã, –ø—É—Å—Ç—ã–µ –∫–æ–º–Ω–∞—Ç—ã)
   - –£–¥–∞–ª—è—é—Ç—Å—è –∏–∑ –ë–î –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏–∏

2. **–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ** - –æ—Å—Ç–∞—é—Ç—Å—è –≤ –ø–æ–º–µ—â–µ–Ω–∏–∏ –Ω–∞–≤—Å–µ–≥–¥–∞:
   - –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ä–∏–µ–Ω—Ç–∏—Ä—ã –¥–ª—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
   - –ú–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ –≤–∞–∂–Ω—ã—Ö –º–µ—Å—Ç (–∫—É—Ö–Ω—è, –∑–∞—Ä—è–¥–Ω–∞—è —Å—Ç–∞–Ω—Ü–∏—è)
   - –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î –∫–∞–∫ landmarks

### 5.3. –ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ AprilTag –∫—É–±–æ–≤

#### –ú–∞—Ç–µ—Ä–∏–∞–ª—ã

- üì¶ **–ö—É–±–∏–∫–∏**: 10√ó10√ó10 —Å–º (–¥–µ—Ä–µ–≤–æ, –ø–ª–∞—Å—Ç–∏–∫, –∫–∞—Ä—Ç–æ–Ω)
- üñ®Ô∏è **–ü–µ—á–∞—Ç—å**: –õ–∞–∑–µ—Ä–Ω—ã–π –ø—Ä–∏–Ω—Ç–µ—Ä, –º–∞—Ç–æ–≤–∞—è –±—É–º–∞–≥–∞
- ‚úÇÔ∏è **–ù–∞–∫–ª–µ–π–∫–∞**: –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Å–∫–æ—Ç—á –∏–ª–∏ –ª–∞–º–∏–Ω–∞—Ü–∏—è
- üé® **–†–∞–∑–º–µ—Ä —Ç–µ–≥–∞**: 16 —Å–º (–∫–∞–∫ –≤ –∫–æ–Ω—Ñ–∏–≥–µ: `size: 0.16`)

#### –ü—Ä–æ—Ü–µ—Å—Å –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è

1. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–≥–æ–≤**:
```bash
cd ~/rob_box_project
python3 scripts/generate_apriltags.py

# –°–æ–∑–¥–∞–µ—Ç: apriltags_printable/tag36h11_id000.png ... id586.png
```

2. **–ü–µ—á–∞—Ç—å**:
   - –†–∞–∑–º–µ—Ä: 180√ó180 –º–º (16—Å–º —Ç–µ–≥ + 2—Å–º —Ä–∞–º–∫–∞)
   - –ö–∞—á–µ—Å—Ç–≤–æ: 300+ DPI
   - –ë—É–º–∞–≥–∞: –ú–∞—Ç–æ–≤–∞—è –±–µ–ª–∞—è
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä –ª–∏–Ω–µ–π–∫–æ–π –ø–æ—Å–ª–µ –ø–µ—á–∞—Ç–∏!

3. **–ù–∞–∫–ª–µ–π–∫–∞ –Ω–∞ –∫—É–±—ã**:
   - –ü–æ –æ–¥–Ω–æ–º—É —Ç–µ–≥—É –Ω–∞ –∫–∞–∂–¥—É—é —Å—Ç–æ—Ä–æ–Ω—É –∫—É–±–∞
   - –ò–ª–∏ –æ–¥–∏–Ω —Ç–µ–≥ —Å–≤–µ—Ä—Ö—É (–¥–ª—è –ø–æ—Ç–æ–ª–æ—á–Ω–æ–π –∫–∞–º–µ—Ä—ã)
   - –ó–∞—â–∏—Ç–∏—Ç—å –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º —Å–∫–æ—Ç—á–µ–º

#### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ ID –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ü–µ–ª–µ–π

```python
# –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã (–¥–ª—è –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏–∏)
MAPPING_TAGS = range(100, 200)  # ID 100-199

# –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –æ—Ä–∏–µ–Ω—Ç–∏—Ä—ã
PERMANENT_LANDMARKS = {
    0: "home",           # –î–æ–º–∞—à–Ω—è—è –ø–æ–∑–∏—Ü–∏—è
    1: "kitchen",        # –ö—É—Ö–Ω—è
    2: "living_room",    # –ì–æ—Å—Ç–∏–Ω–∞—è
    3: "charging",       # –ó–∞—Ä—è–¥–Ω–∞—è —Å—Ç–∞–Ω—Ü–∏—è
    # ... –¥–æ ID 99
}
```

### 5.4. –†–∞–∑–º–µ—â–µ–Ω–∏–µ AprilTag –∫—É–±–æ–≤ –ø—Ä–∏ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏–∏

#### –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤

**–ì–¥–µ —Å—Ç–∞–≤–∏—Ç—å –∫—É–±—ã**:

1. **–î–ª–∏–Ω–Ω—ã–µ –∫–æ—Ä–∏–¥–æ—Ä—ã**:
   - –ö–∞–∂–¥—ã–µ 3-5 –º–µ—Ç—Ä–æ–≤ –ø–æ –æ–¥–Ω–æ–º—É –∫—É–±—É
   - –ß–µ—Ä–µ–¥–æ–≤–∞—Ç—å —Å—Ç–æ—Ä–æ–Ω—ã (—Å–ª–µ–≤–∞-—Å–ø—Ä–∞–≤–∞)
   - –í—ã—Å–æ—Ç–∞: 30-50 —Å–º –æ—Ç –ø–æ–ª–∞

2. **–ü—É—Å—Ç—ã–µ –∫–æ–º–Ω–∞—Ç—ã**:
   - –ü–æ –æ–¥–Ω–æ–º—É –∫—É–±—É –≤ –∫–∞–∂–¥–æ–º —É–≥–ª—É
   - –û–¥–∏–Ω –≤ —Ü–µ–Ω—Ç—Ä–µ

3. **–ü–µ—Ä–µ–∫—Ä–µ—Å—Ç–∫–∏ / T-–æ–±—Ä–∞–∑–Ω—ã–µ –ø–µ—Ä–µ–∫—Ä–µ—Å—Ç–∫–∏**:
   - –ü–æ –∫—É–±—É —Å –∫–∞–∂–¥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã –ø–µ—Ä–µ–∫—Ä–µ—Å—Ç–∫–∞
   - –ü–æ–º–æ–≥–∞–µ—Ç –≤ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ—Å–ª–µ –ø–æ–≤–æ—Ä–æ—Ç–∞

4. **–ù–∞—á–∞–ª—å–Ω–∞—è —Ç–æ—á–∫–∞**:
   - –í—Å–µ–≥–¥–∞ —Å—Ç–∞–≤–∏—Ç—å –∫—É–± —É —Å—Ç–∞—Ä—Ç–æ–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏
   - –î–ª—è loop closure –≤ –∫–æ–Ω—Ü–µ –º–∞—Ä—à—Ä—É—Ç–∞

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å RTABMAP

**–¢–æ–ø–∏–∫–∏ OAK-D –∫–∞–º–µ—Ä—ã** (Vision Pi):
- `/camera/rgb/image_raw` - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- `/camera/rgb/camera_info` - –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞

**–¢–æ–ø–∏–∫–∏ AprilTag –¥–µ—Ç–µ–∫—Ü–∏–∏**:
- `/apriltag/detections` - –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ —Ç–µ–≥–∏
- `/apriltag/tf` - TF —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ–≥–∞

**RTABMAP –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AprilTag**:
```yaml
# docker/main/config/rtabmap/rtabmap.yaml
rtabmap:
  ros__parameters:
    # –î–æ–±–∞–≤–∏—Ç—å visual odometry
    subscribe_rgb: true
    subscribe_depth: true
    subscribe_rgbd: false
    
    # –í–∫–ª—é—á–∏—Ç—å landmarks
    Marker/DetectionRate: 1.0  # –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä
    Marker/CornerRefinement: 1  # –£—Ç–æ—á–Ω–µ–Ω–∏–µ —É–≥–ª–æ–≤
```

**–ü—Ä–æ—Ü–µ—Å—Å**:
1. OAK-D –∫–∞–º–µ—Ä–∞ –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ—Ç AprilTag
2. AprilTag –Ω–æ–¥–∞ –ø—É–±–ª–∏–∫—É–µ—Ç TF: `camera_link` ‚Üí `tag_N`
3. RTABMAP –¥–æ–±–∞–≤–ª—è–µ—Ç tag –∫–∞–∫ landmark –≤ –≥—Ä–∞—Ñ
4. –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ —Ç–µ–≥–∞ - –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç –ø–æ–∑–∏—Ü–∏—é (loop closure)

### 5.5. –£–ª—É—á—à–µ–Ω–∏–µ —Ç–æ—á–Ω–æ—Å—Ç–∏ —Å AprilTag

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- ‚úÖ **–ê–±—Å–æ–ª—é—Ç–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è**: –¢–µ–≥ –¥–∞–µ—Ç —Ç–æ—á–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ 6-DOF
- ‚úÖ **Loop closure**: –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ known place
- ‚úÖ **Drift correction**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–π –æ—à–∏–±–∫–∏
- ‚úÖ **–†–æ–±–∞—Å—Ç–Ω–æ—Å—Ç—å**: –†–∞–±–æ—Ç–∞–µ—Ç –≤ –æ–¥–Ω–æ–æ–±—Ä–∞–∑–Ω—ã—Ö –ø–æ–º–µ—â–µ–Ω–∏—è—Ö

**–ú–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏—è** (–ø–æ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–µ):
- –ü–æ–∑–∏—Ü–∏–æ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: —É–º–µ–Ω—å—à–µ–Ω–∏–µ —Å ~10cm –¥–æ ~2cm
- –£–≥–ª–æ–≤–∞—è –æ—à–∏–±–∫–∞: —É–º–µ–Ω—å—à–µ–Ω–∏–µ —Å ~5¬∞ –¥–æ ~1¬∞
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å loop closure: —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å 70% –¥–æ 95%

---

## 6. –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤

### 6.1. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –æ—á–∏—Å—Ç–∫–∏

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ—Å–ª–µ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –≤ –ë–î –æ—Å—Ç–∞—é—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω—ã–µ AprilTag –º–∞—Ä–∫–µ—Ä—ã

**–ü–æ—á–µ–º—É —ç—Ç–æ –ø–ª–æ—Ö–æ**:
- üì¶ –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ë–î
- üê¢ –ó–∞–º–µ–¥–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ (–ø–æ–∏—Å–∫ —Å—Ä–µ–¥–∏ –ª–∏—à–Ω–∏—Ö landmarks)
- ‚ùå –õ–æ–∂–Ω—ã–µ loop closures –µ—Å–ª–∏ –∫—É–±—ã —É–±—Ä–∞–ª–∏
- üîÑ Confusion –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ**: –£–¥–∞–ª–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã, –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ

### 6.2. –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –º–∞—Ä–∫–µ—Ä–æ–≤

**–í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö RTABMAP**:

–ú–∞—Ä–∫–µ—Ä—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –∫–∞–∫ "Nodes" —Å —Ç–∏–ø–æ–º "Landmark"

```sql
-- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã Node –≤ rtabmap.db
CREATE TABLE Node(
    id INTEGER PRIMARY KEY,
    map_id INTEGER,
    weight INTEGER,
    pose BLOB,
    stamp REAL,
    label TEXT,
    ground_truth_pose BLOB,
    velocity BLOB,
    gps BLOB,
    env_sensors BLOB
);

-- Landmarks –∏–º–µ—é—Ç –æ—Å–æ–±—ã–π label
-- –ù–∞–ø—Ä–∏–º–µ—Ä: "apriltag_100", "apriltag_1", etc.
```

**–°—Ö–µ–º–∞ –º–µ—Ç–æ–∫**:
```python
TEMPORARY_TAG_PREFIX = "apriltag_1"  # ID 100-199
PERMANENT_TAG_PREFIX = "apriltag_0"  # ID 0-99
```

### 6.3. –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –æ—á–∏—Å—Ç–∫–∏

#### –ú–µ—Ç–æ–¥ 1: –ß–µ—Ä–µ–∑ RTABMAP API (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```python
#!/usr/bin/env python3
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö AprilTag –º–∞—Ä–∫–µ—Ä–æ–≤ –∏–∑ RTABMAP –ë–î
"""

import sqlite3
import sys

def cleanup_temporary_markers(db_path, temp_prefix="apriltag_1"):
    """
    –£–¥–∞–ª–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã –∏–∑ –ë–î
    
    Args:
        db_path: –ü—É—Ç—å –∫ rtabmap.db
        temp_prefix: –ü—Ä–µ—Ñ–∏–∫—Å –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é apriltag_1)
    """
    # –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î
    conn = sqlite3.connect(db_path)
    cursor = conn.cursor()
    
    # –ù–∞–π—Ç–∏ –≤—Å–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã
    cursor.execute("""
        SELECT id, label FROM Node 
        WHERE label LIKE ? || '%'
    """, (temp_prefix,))
    
    temp_markers = cursor.fetchall()
    print(f"–ù–∞–π–¥–µ–Ω–æ {len(temp_markers)} –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤")
    
    # –£–¥–∞–ª–∏—Ç—å –∫–∞–∂–¥—ã–π –º–∞—Ä–∫–µ—Ä
    for marker_id, label in temp_markers:
        print(f"  –£–¥–∞–ª–µ–Ω–∏–µ: {label} (ID: {marker_id})")
        
        # –£–¥–∞–ª–∏—Ç—å node
        cursor.execute("DELETE FROM Node WHERE id = ?", (marker_id,))
        
        # –£–¥–∞–ª–∏—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        cursor.execute("DELETE FROM Link WHERE from_id = ? OR to_id = ?", 
                       (marker_id, marker_id))
        cursor.execute("DELETE FROM Data WHERE id = ?", (marker_id,))
    
    # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
    conn.commit()
    conn.close()
    
    print(f"‚úÖ –û—á–∏—Å—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –£–¥–∞–ª–µ–Ω–æ {len(temp_markers)} –º–∞—Ä–∫–µ—Ä–æ–≤")

if __name__ == "__main__":
    db_path = "/maps/rtabmap.db"
    cleanup_temporary_markers(db_path)
```

**–ó–∞–ø—É—Å–∫ –Ω–∞ Main Pi**:
```bash
docker exec rtabmap python3 /scripts/cleanup_temp_markers.py
```

#### –ú–µ—Ç–æ–¥ 2: –ß–µ—Ä–µ–∑ ROS2 —Å–µ—Ä–≤–∏—Å (–µ—Å–ª–∏ RTABMAP –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç)

```bash
# –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π landmark
ros2 service call /rtabmap/remove_landmark \
  rtabmap_msgs/srv/RemoveLandmark \
  "{landmark_id: 100}"
```

### 6.4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø–æ—Å–ª–µ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏–∏

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≥–æ–ª–æ—Å–æ–≤—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º**:

```python
# –í dialogue_node.py
async def handle_finish_mapping(self):
    """–ó–∞–≤–µ—Ä—à–∏—Ç—å –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—é –∏ –æ—á–∏—Å—Ç–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã"""
    
    # 1. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –≤ localization mode
    await self.call_service(self.set_mode_localization_client)
    
    # 2. –ü–æ–¥–æ–∂–¥–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ë–î
    await asyncio.sleep(5.0)
    
    # 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å cleanup script
    result = subprocess.run([
        'docker', 'exec', 'rtabmap',
        'python3', '/scripts/cleanup_temp_markers.py'
    ], capture_output=True, text=True)
    
    if result.returncode == 0:
        return "–ö–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ. –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã –æ—á–∏—â–µ–Ω—ã. –ö–∞—Ä—Ç–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏."
    else:
        return f"–ö–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ, –Ω–æ –æ—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –º–∞—Ä–∫–µ—Ä–æ–≤: {result.stderr}"
```

**–ì–æ–ª–æ—Å–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞**: "–ó–∞–∫–æ–Ω—á–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ"
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –≤ localization
- –û—á–∏—â–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ AprilTag
- –°–æ–æ–±—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

---

## 7. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö —Ç–æ—á–µ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

### 7.1. –¢–∏–ø—ã —Ç–æ—á–µ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

**1. –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–∫–∞—Ü–∏–∏** (–¥–ª—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥):
```python
{
    '–¥–æ–º': {'x': 0.0, 'y': 0.0, 'theta': 0.0, 'description': '–ù–∞—á–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è'},
    '–∫—É—Ö–Ω—è': {'x': 2.5, 'y': 1.2, 'theta': 0.0, 'description': '–ö—É—Ö–Ω—è'},
    '–∑–∞—Ä—è–¥–Ω–∞—è —Å—Ç–∞–Ω—Ü–∏—è': {'x': -1.0, 'y': 0.5, 'theta': 3.14, 'description': '–ó–∞—Ä—è–¥–∫–∞'}
}
```

**2. AprilTag landmarks** (–ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã):
```python
{
    'tag_0': {'x': 0.0, 'y': 0.0, 'theta': 0.0, 'type': 'apriltag', 'description': 'Home marker'},
    'tag_1': {'x': 2.5, 'y': 1.2, 'theta': 0.0, 'type': 'apriltag', 'description': 'Kitchen marker'}
}
```

**3. –ó–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏** (–¥–ª—è –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏):
```python
{
    'delivery_zone_A': {'x': 3.0, 'y': 2.0, 'radius': 0.5, 'type': 'delivery'},
    'delivery_zone_B': {'x': 1.5, 'y': 3.0, 'radius': 0.5, 'type': 'delivery'}
}
```

### 7.2. –ú–µ—Ç–æ–¥—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Ç–æ—á–µ–∫

#### –ú–µ—Ç–æ–¥ 1: –†—É—á–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –∏ –∑–∞–ø–∏—Å—å

**–ü—Ä–æ—Ü–µ—Å—Å**:
1. –£–ø—Ä–∞–≤–ª—è—Ç—å —Ä–æ–±–æ—Ç–æ–º –≤—Ä—É—á–Ω—É—é (–¥–∂–æ–π—Å—Ç–∏–∫/–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
2. –ü–æ–¥–≤–µ—Å—Ç–∏ —Ä–æ–±–æ—Ç–∞ –∫ –Ω—É–∂–Ω–æ–º—É –º–µ—Å—Ç—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫—É—Ö–Ω—è)
3. –ó–∞–ø–∏—Å–∞—Ç—å —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é

**–°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø–∏—Å–∏**:
```python
#!/usr/bin/env python3
"""–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é —Ä–æ–±–æ—Ç–∞ –∫–∞–∫ waypoint"""

import rclpy
from rclpy.node import Node
from geometry_msgs.msg import PoseWithCovarianceStamped
import json

class WaypointRecorder(Node):
    def __init__(self):
        super().__init__('waypoint_recorder')
        
        # –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø–æ–∑–∏—Ü–∏—é —Ä–æ–±–æ—Ç–∞
        self.pose_sub = self.create_subscription(
            PoseWithCovarianceStamped,
            '/rtabmap/localization_pose',
            self.pose_callback,
            10
        )
        
        self.current_pose = None
    
    def pose_callback(self, msg):
        """–û–±–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é"""
        self.current_pose = msg.pose.pose
    
    def save_waypoint(self, name, description=""):
        """–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é –∫–∞–∫ waypoint"""
        if not self.current_pose:
            print("‚ùå –ü–æ–∑–∏—Ü–∏—è —Ä–æ–±–æ—Ç–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞")
            return
        
        # –ò–∑–≤–ª–µ—á—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
        x = self.current_pose.position.x
        y = self.current_pose.position.y
        
        # –ò–∑–≤–ª–µ—á—å —É–≥–æ–ª –∏–∑ quaternion
        from tf_transformations import euler_from_quaternion
        q = self.current_pose.orientation
        _, _, theta = euler_from_quaternion([q.x, q.y, q.z, q.w])
        
        waypoint = {
            'name': name,
            'x': round(x, 2),
            'y': round(y, 2),
            'theta': round(theta, 2),
            'description': description
        }
        
        print(f"‚úÖ Waypoint '{name}': x={x:.2f}, y={y:.2f}, theta={theta:.2f}")
        
        # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ —Ñ–∞–π–ª
        with open(f'/config/waypoints/{name}.json', 'w') as f:
            json.dump(waypoint, f, indent=2)

def main():
    rclpy.init()
    recorder = WaypointRecorder()
    
    # –ü–æ–¥–æ–∂–¥–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏
    print("–û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ —Ä–æ–±–æ—Ç–∞...")
    while recorder.current_pose is None:
        rclpy.spin_once(recorder, timeout_sec=0.1)
    
    # –ó–∞–ø—Ä–æ—Å–∏—Ç—å –∏–º—è waypoint
    name = input("–í–≤–µ–¥–∏—Ç–µ –∏–º—è —Ç–æ—á–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, '–∫—É—Ö–Ω—è'): ")
    description = input("–û–ø–∏—Å–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): ")
    
    # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
    recorder.save_waypoint(name, description)
    
    recorder.destroy_node()
    rclpy.shutdown()

if __name__ == '__main__':
    main()
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
# –ù–∞ Vision Pi
docker exec -it voice-assistant bash
ros2 run rob_box_voice waypoint_recorder

# –í–≤–µ—Å—Ç–∏: "–∫—É—Ö–Ω—è"
# Waypoint —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ /config/waypoints/–∫—É—Ö–Ω—è.json
```


#### –ú–µ—Ç–æ–¥ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ AprilTag –¥–ª—è —Ç–æ—á–Ω–æ–π —Ä–∞–∑–º–µ—Ç–∫–∏

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ**: –ú–æ–∂–Ω–æ –∑–∞—Ä–∞–Ω–µ–µ —Ä–∞—Å—Å—Ç–∞–≤–∏—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ AprilTag –∫—É–±—ã –∏ –ø—Ä–∏–≤—è–∑–∞—Ç—å –∫ –Ω–∏–º –∏–º–µ–Ω–∞

**–ü—Ä–æ—Ü–µ—Å—Å**:
1. –†–∞—Å—Å—Ç–∞–≤–∏—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ AprilTag –∫—É–±—ã (ID 0-99)
2. –í–æ –≤—Ä–µ–º—è –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏–∏ RTABMAP –∑–∞–ø–æ–º–Ω–∏—Ç –∏—Ö –ø–æ–∑–∏—Ü–∏–∏
3. –ü—Ä–∏–≤—è–∑–∞—Ç—å –∏–º–µ–Ω–∞ –∫ AprilTag ID

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**:
```yaml
# /config/waypoints/apriltag_mapping.yaml
permanent_landmarks:
  0:
    name: "–¥–æ–º"
    description: "–î–æ–º–∞—à–Ω—è—è –ø–æ–∑–∏—Ü–∏—è"
    offset_x: 0.0  # –°–º–µ—â–µ–Ω–∏–µ –æ—Ç —Ç–µ–≥–∞ –¥–æ —Ç–æ—á–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
    offset_y: 0.0
    
  1:
    name: "–∫—É—Ö–Ω—è"
    description: "–ö—É—Ö–Ω—è"
    offset_x: 0.5  # –¢–æ—á–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –Ω–∞ 0.5–º –æ—Ç —Ç–µ–≥–∞
    offset_y: 0.0
    
  3:
    name: "–∑–∞—Ä—è–¥–Ω–∞—è —Å—Ç–∞–Ω—Ü–∏—è"
    description: "Charging dock"
    offset_x: -0.3  # –ü–æ–¥—ä–µ–∑–∂–∞—Ç—å –∑–∞–¥–æ–º –∫ —Å—Ç–∞–Ω—Ü–∏–∏
    offset_y: 0.0
```

**–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ**: AprilTag –ø–æ–∑–∏—Ü–∏—è ‚Üí Waypoint

```python
def apriltag_to_waypoint(tag_pose, offset_x, offset_y):
    """–í—ã—á–∏—Å–ª–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é waypoint –æ—Ç –ø–æ–∑–∏—Ü–∏–∏ AprilTag"""
    import numpy as np
    from tf_transformations import quaternion_matrix
    
    # –ú–∞—Ç—Ä–∏—Ü–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Ç–µ–≥–∞
    q = [tag_pose.orientation.x, tag_pose.orientation.y,
         tag_pose.orientation.z, tag_pose.orientation.w]
    T = quaternion_matrix(q)
    T[0:3, 3] = [tag_pose.position.x, tag_pose.position.y, tag_pose.position.z]
    
    # –°–º–µ—â–µ–Ω–∏–µ –≤ —Å–∏—Å—Ç–µ–º–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Ç–µ–≥–∞
    offset = np.array([offset_x, offset_y, 0, 1])
    
    # Waypoint –≤ –º–∏—Ä–æ–≤—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö
    waypoint_pos = T @ offset
    
    return {
        'x': waypoint_pos[0],
        'y': waypoint_pos[1],
        'theta': euler_from_quaternion(q)[2]
    }
```

### 7.3. –•—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ waypoints

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –õ–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª (—Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `src/rob_box_voice/rob_box_voice/command_node.py`

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- ‚ùå –•–∞—Ä–¥–∫–æ–¥ –≤ –∫–æ–¥–µ Python
- ‚ùå –¢—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ Docker –æ–±—Ä–∞–∑–∞ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è
- ‚ùå –ù–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É —Ä–æ–±–æ—Ç–∞–º–∏
- ‚ùå –ù–µ—Ç UI –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### –í–∞—Ä–∏–∞–Ω—Ç 2: YAML —Ñ–∞–π–ª (—É–ª—É—á—à–µ–Ω–∏–µ)

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `docker/vision/config/waypoints/waypoints.yaml`

```yaml
waypoints:
  –¥–æ–º:
    x: 0.0
    y: 0.0
    theta: 0.0
    description: "–î–æ–º–∞—à–Ω—è—è –ø–æ–∑–∏—Ü–∏—è"
    type: "home"
  
  –∫—É—Ö–Ω—è:
    x: 2.5
    y: 1.2
    theta: 0.0
    description: "–ö—É—Ö–Ω—è"
    type: "delivery"
  
  –∑–∞—Ä—è–¥–Ω–∞—è_—Å—Ç–∞–Ω—Ü–∏—è:
    x: -1.0
    y: 0.5
    theta: 3.14
    description: "Charging dock"
    type: "charging"
```

**–ó–∞–≥—Ä—É–∑–∫–∞ –≤ command_node.py**:
```python
import yaml

class CommandNode(Node):
    def __init__(self):
        super().__init__('command_node')
        
        # –ó–∞–≥—Ä—É–∑–∏—Ç—å waypoints –∏–∑ —Ñ–∞–π–ª–∞
        with open('/config/waypoints/waypoints.yaml', 'r') as f:
            config = yaml.safe_load(f)
            self.waypoints = config['waypoints']
        
        self.get_logger().info(f'–ó–∞–≥—Ä—É–∂–µ–Ω–æ {len(self.waypoints)} waypoints')
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–∞
- ‚úÖ –ú–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä—è–º–æ –Ω–∞ —Ä–æ–±–æ—Ç–µ
- ‚úÖ Volume mounting –≤ Docker

#### –í–∞—Ä–∏–∞–Ω—Ç 3: –û–±–ª–∞—á–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production)

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**:
```
–û–±–ª–∞—á–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (zenoh.robbox.online)
    ‚Üì
  PostgreSQL –ë–î
    ‚Üì
Zenoh Topic: robots/{ROBOT_ID}/config/waypoints
    ‚Üì
–†–æ–±–æ—Ç (–ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è)
```

**–°—Ö–µ–º–∞ –ë–î**:
```sql
CREATE TABLE waypoints (
    id SERIAL PRIMARY KEY,
    robot_id VARCHAR(50),
    name VARCHAR(100),
    x FLOAT,
    y FLOAT,
    theta FLOAT,
    description TEXT,
    type VARCHAR(50),
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_waypoints_robot ON waypoints(robot_id);
```

**–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**:
```python
class WaypointSync(Node):
    """–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è waypoints —Å –æ–±–ª–∞–∫–æ–º —á–µ—Ä–µ–∑ Zenoh"""
    
    def __init__(self):
        super().__init__('waypoint_sync')
        
        # Zenoh session
        import zenoh
        self.z_session = zenoh.open()
        
        # –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è waypoints
        topic = f"robots/{os.getenv('ROBOT_ID')}/config/waypoints"
        self.z_sub = self.z_session.subscribe(topic, self.waypoint_update_callback)
        
        # –õ–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à waypoints
        self.waypoints = {}
        
        # –ó–∞–ø—Ä–æ—Å–∏—Ç—å —Ç–µ–∫—É—â–∏–µ waypoints –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
        self.fetch_waypoints_from_cloud()
    
    def waypoint_update_callback(self, sample):
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è waypoint –∏–∑ –æ–±–ª–∞–∫–∞"""
        data = json.loads(sample.payload.decode('utf-8'))
        
        if data['action'] == 'add' or data['action'] == 'update':
            self.waypoints[data['name']] = {
                'x': data['x'],
                'y': data['y'],
                'theta': data['theta'],
                'description': data.get('description', ''),
                'type': data.get('type', 'general')
            }
            self.get_logger().info(f"‚úÖ Waypoint '{data['name']}' –æ–±–Ω–æ–≤–ª–µ–Ω")
        
        elif data['action'] == 'delete':
            if data['name'] in self.waypoints:
                del self.waypoints[data['name']]
                self.get_logger().info(f"üóëÔ∏è Waypoint '{data['name']}' —É–¥–∞–ª–µ–Ω")
        
        # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª (–∫—ç—à)
        self.save_waypoints_to_file()
```

---

## 8. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≥–æ–ª–æ—Å–æ–≤—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º

### 8.1. –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `src/rob_box_voice/rob_box_voice/command_node.py`

**–¢–µ–∫—É—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏**:
```python
patterns = [
    (r'(–¥–≤–∏–≥–∞–π—Å—è|–∏–¥–∏|–ø–æ–µ–∑–∂–∞–π|–µ–∑–∂–∞–π|–Ω–∞–ø—Ä–∞–≤–ª—è–π—Å—è)\s+–∫\s+—Ç–æ—á–∫–µ\s+(\d+)', 'waypoint_number'),
    (r'(–¥–≤–∏–≥–∞–π—Å—è|–∏–¥–∏|–ø–æ–µ–∑–∂–∞–π|–µ–∑–∂–∞–π)\s+–∫\s+(–¥–æ–º|–∫—É—Ö–Ω—è|–≥–æ—Å—Ç–∏–Ω–∞—è)', 'waypoint_name'),
    (r'(—Å—Ç–æ–π|–æ—Å—Ç–∞–Ω–æ–≤–∏—Å—å|—Å—Ç–æ–ø)', 'stop'),
]
```

### 8.2. –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏–∏

**–ù–æ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã**:
```python
MAPPING_PATTERNS = {
    'start_mapping': [
        r'–∏—Å—Å–ª–µ–¥—É–π —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—é',
        r'–Ω–∞—á–Ω–∏ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—é',
        r'—Å–æ–∑–¥–∞–π –Ω–æ–≤—É—é –∫–∞—Ä—Ç—É',
        r'–Ω–∞—á–Ω–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ',
    ],
    
    'continue_mapping': [
        r'–ø—Ä–æ–¥–æ–ª–∂–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ',
        r'–ø—Ä–æ–¥–æ–ª–∂–∏ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—é',
        r'–¥–æ–±–∞–≤—å –∫ –∫–∞—Ä—Ç–µ',
    ],
    
    'finish_mapping': [
        r'–∑–∞–∫–æ–Ω—á–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ',
        r'–∑–∞–≤–µ—Ä—à–∏—Ç—å –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—é',
        r'–ø–µ—Ä–µ–π–¥–∏ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏—é',
        r'–∫–∞—Ä—Ç–∞ –≥–æ—Ç–æ–≤–∞',
    ],
    
    'save_waypoint': [
        r'—Å–æ—Ö—Ä–∞–Ω–∏ —Ç–æ—á–∫—É (\w+)',
        r'–∑–∞–ø–æ–º–Ω–∏ –º–µ—Å—Ç–æ (\w+)',
        r'–¥–æ–±–∞–≤—å waypoint (\w+)',
    ],
    
    'go_to_waypoint': [
        r'–ø–æ–µ–∑–∂–∞–π (–∫|–≤|–Ω–∞) (\w+)',
        r'–∏–¥–∏ (–∫|–≤|–Ω–∞) (\w+)',
        r'–Ω–∞–ø—Ä–∞–≤–ª—è–π—Å—è (–∫|–≤|–Ω–∞) (\w+)',
    ],
}
```

### 8.3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏–∏

**Workflow –¥–ª—è "–ò—Å—Å–ª–µ–¥—É–π —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—é"**:
```python
async def handle_start_mapping(self, text):
    """–ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—é"""
    
    # –ó–∞–ø—Ä–æ—Å–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
    self.pending_confirmation = {
        'action': 'start_mapping',
        'text': text
    }
    
    response = "–ù–∞—á–∞—Ç—å –Ω–æ–≤–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ? –¢–µ–∫—É—â–∞—è –∫–∞—Ä—Ç–∞ –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é."
    
    # –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ TTS
    self.tts_pub.publish(String(data=response))
    
    # –ñ–¥–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è ("–¥–∞" / "–Ω–∞—á–∏–Ω–∞–π")
    return response

async def confirm_start_mapping(self):
    """–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ: –Ω–∞—á–∞—Ç—å –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—é"""
    
    # 1. –°–æ–∑–¥–∞—Ç—å backup —Ç–µ–∫—É—â–µ–π –∫–∞—Ä—Ç—ã
    await self.backup_rtabmap_db()
    
    # 2. –°–±—Ä–æ—Å–∏—Ç—å –ø–∞–º—è—Ç—å RTABMAP
    await self.call_service('/rtabmap/reset_memory', Empty.Request())
    
    # 3. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –≤ mapping mode
    await self.call_service('/rtabmap/set_mode_mapping', Empty.Request())
    
    # 4. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
    response = "–ù–∞—á–∏–Ω–∞—é –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ. –°—Ç–∞—Ä–∞—è –∫–∞—Ä—Ç–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞."
    self.tts_pub.publish(String(data=response))
    
    self.pending_confirmation = None
```

**Workflow –¥–ª—è "–°–æ—Ö—Ä–∞–Ω–∏ —Ç–æ—á–∫—É"**:
```python
async def handle_save_waypoint(self, name):
    """–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é –∫–∞–∫ waypoint"""
    
    # –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é –∏–∑ RTABMAP
    pose = await self.get_current_pose()
    
    if not pose:
        return "–ù–µ –º–æ–≥—É –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é."
    
    # –°–æ–∑–¥–∞—Ç—å waypoint
    waypoint = {
        'x': pose.position.x,
        'y': pose.position.y,
        'theta': self.quaternion_to_yaw(pose.orientation),
        'description': f"–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≥–æ–ª–æ—Å–æ–≤–æ–π –∫–æ–º–∞–Ω–¥–æ–π",
        'timestamp': datetime.now().isoformat()
    }
    
    # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ
    self.waypoints[name] = waypoint
    self.save_waypoints_to_file()
    
    # –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ –æ–±–ª–∞–∫–æ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è)
    if self.cloud_sync_enabled:
        await self.publish_waypoint_to_cloud(name, waypoint, action='add')
    
    response = f"–¢–æ—á–∫–∞ '{name}' —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: x={waypoint['x']:.1f}, y={waypoint['y']:.1f}"
    return response
```

### 8.4. –î–∏–∞–ª–æ–≥–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

**–°—Ü–µ–Ω–∞—Ä–∏–π 1: –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã —Å –≥–æ–ª–æ—Å–æ–≤—ã–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–º**

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ò—Å—Å–ª–µ–¥—É–π —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—é"
–†–æ–±–æ—Ç: "–ù–∞—á–∞—Ç—å –Ω–æ–≤–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ? –¢–µ–∫—É—â–∞—è –∫–∞—Ä—Ç–∞ –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞."
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–î–∞"
–†–æ–±–æ—Ç: "–ù–∞—á–∏–Ω–∞—é –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ. –í–µ–¥–∏ –º–µ–Ω—è —á–µ—Ä–µ–∑ –ø–æ–º–µ—â–µ–Ω–∏–µ."
[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–æ–±–æ—Ç–æ–º –≤—Ä—É—á–Ω—É—é –∏–ª–∏ —á–µ—Ä–µ–∑ waypoints]
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–°–æ—Ö—Ä–∞–Ω–∏ —Ç–æ—á–∫—É –∫—É—Ö–Ω—è"
–†–æ–±–æ—Ç: "–¢–æ—á–∫–∞ '–∫—É—Ö–Ω—è' —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: x=2.5, y=1.2"
[–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è]
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ó–∞–∫–æ–Ω—á–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ"
–†–æ–±–æ—Ç: "–ó–∞–∫–∞–Ω—á–∏–≤–∞—é –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ. –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã –æ—á–∏—â–µ–Ω—ã. –ö–∞—Ä—Ç–∞ –≥–æ—Ç–æ–≤–∞."
```

**–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –≥–æ—Ç–æ–≤–æ–π –∫–∞—Ä—Ç–µ**

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ü–æ–µ–∑–∂–∞–π –Ω–∞ –∫—É—Ö–Ω—é"
–†–æ–±–æ—Ç: "–°—Ç—Ä–æ—é –º–∞—Ä—à—Ä—É—Ç –Ω–∞ –∫—É—Ö–Ω—é."
[–†–æ–±–æ—Ç –¥–≤–∏–∂–µ—Ç—Å—è]
–†–æ–±–æ—Ç: "–ü—Ä–∏–±—ã–ª –Ω–∞ –∫—É—Ö–Ω—é."
```

---

## 9. –û–±–ª–∞—á–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Zenoh

### 9.1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±–ª–∞—á–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (React SPA)                                  ‚îÇ
‚îÇ  https://zenoh.robbox.online/                                ‚îÇ
‚îÇ  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ waypoints                                      ‚îÇ
‚îÇ  - –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ä—Ç                                             ‚îÇ
‚îÇ  - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–æ–±–æ—Ç–æ–≤                                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ HTTPS/WebSocket
                           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Backend API (FastAPI)                                       ‚îÇ
‚îÇ  - REST API –¥–ª—è UI                                           ‚îÇ
‚îÇ  - Zenoh bridge –¥–ª—è —Ä–æ–±–æ—Ç–∞                                   ‚îÇ
‚îÇ  - PostgreSQL –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è                                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ Zenoh TCP
                           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Zenoh Cloud Router                                          ‚îÇ
‚îÇ  zenoh.robbox.online:7447                                    ‚îÇ
‚îÇ  - –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–æ—É—Ç–µ—Ä                                        ‚îÇ
‚îÇ  - Namespace: robots/{ROBOT_ID}                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ Zenoh TCP (—á–µ—Ä–µ–∑ WiFi)
                           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Rob Box Robot                                               ‚îÇ
‚îÇ  Zenoh Session —Å namespace: robots/RBXU100001                ‚îÇ
‚îÇ  - –ü–æ–¥–ø–∏—Å–∫–∞: robots/RBXU100001/config/**                     ‚îÇ
‚îÇ  - –ü—É–±–ª–∏–∫–∞—Ü–∏—è: robots/RBXU100001/status/**                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 9.2. Zenoh —Ç–æ–ø–∏–∫–∏ –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**Waypoints —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
```
robots/{ROBOT_ID}/config/waypoints/add
robots/{ROBOT_ID}/config/waypoints/update
robots/{ROBOT_ID}/config/waypoints/delete
robots/{ROBOT_ID}/config/waypoints/list
```

**Mapping —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
```
robots/{ROBOT_ID}/mapping/start
robots/{ROBOT_ID}/mapping/stop
robots/{ROBOT_ID}/mapping/waypoints      # Coverage waypoints
robots/{ROBOT_ID}/mapping/progress       # –ü—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
```

**–°—Ç–∞—Ç—É—Å —Ä–æ–±–æ—Ç–∞**:
```
robots/{ROBOT_ID}/status/pose            # –¢–µ–∫—É—â–∞—è –ø–æ–∑–∏—Ü–∏—è
robots/{ROBOT_ID}/status/battery         # –£—Ä–æ–≤–µ–Ω—å –±–∞—Ç–∞—Ä–µ–∏
robots/{ROBOT_ID}/status/mapping_mode    # mapping/localization
```

### 9.3. –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è waypoints

**–§—É–Ω–∫—Ü–∏–∏ UI**:

1. **–°–ø–∏—Å–æ–∫ waypoints**:
   - –¢–∞–±–ª–∏—Ü–∞ –≤—Å–µ—Ö waypoints
   - –ö–æ–ª–æ–Ω–∫–∏: –ò–º—è, X, Y, Theta, –û–ø–∏—Å–∞–Ω–∏–µ, –¢–∏–ø
   - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –ø–æ–∏—Å–∫

2. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ waypoint**:
   - –§–æ—Ä–º–∞: –ò–º—è, –û–ø–∏—Å–∞–Ω–∏–µ, –¢–∏–ø
   - –ö–Ω–æ–ø–∫–∞ "–ó–∞–ø–∏—Å–∞—Ç—å —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é —Ä–æ–±–æ—Ç–∞"
   - –ò–ª–∏ —Ä—É—á–Ω–æ–π –≤–≤–æ–¥ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç

3. **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ waypoint**:
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è/—Ç–∏–ø–∞
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Ä–æ–±–æ—Ç–æ–º

4. **–£–¥–∞–ª–µ–Ω–∏–µ waypoint**:
   - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è
   - –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –ë–î –∏ —Å —Ä–æ–±–æ—Ç–∞

5. **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –∫–∞—Ä—Ç–µ**:
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö waypoints –Ω–∞ –∫–∞—Ä—Ç–µ
   - –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é —Ä–æ–±–æ—Ç–∞
   - –ú–∞—Ä—à—Ä—É—Ç –º–µ–∂–¥—É waypoints

### 9.4. Backend API –¥–ª—è waypoints

**FastAPI endpoints**:

```python
from fastapi import FastAPI, HTTPException
from pydantic import BaseModel
import zenoh

app = FastAPI()

class Waypoint(BaseModel):
    name: str
    x: float
    y: float
    theta: float
    description: str = ""
    type: str = "general"

# Zenoh session
z_session = zenoh.open(config={
    "connect": {"endpoints": ["tcp/0.0.0.0:7447"]},
    "mode": "client"
})

@app.post("/api/robots/{robot_id}/waypoints")
async def add_waypoint(robot_id: str, waypoint: Waypoint):
    """–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π waypoint"""
    
    # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ë–î
    db_waypoint = await db.save_waypoint(robot_id, waypoint)
    
    # –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ Zenoh
    topic = f"robots/{robot_id}/config/waypoints/add"
    payload = waypoint.json()
    z_session.put(topic, payload)
    
    return {"status": "success", "waypoint": db_waypoint}

@app.put("/api/robots/{robot_id}/waypoints/{name}")
async def update_waypoint(robot_id: str, name: str, waypoint: Waypoint):
    """–û–±–Ω–æ–≤–∏—Ç—å waypoint"""
    
    # –û–±–Ω–æ–≤–∏—Ç—å –≤ –ë–î
    db_waypoint = await db.update_waypoint(robot_id, name, waypoint)
    
    # –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ Zenoh
    topic = f"robots/{robot_id}/config/waypoints/update"
    payload = waypoint.json()
    z_session.put(topic, payload)
    
    return {"status": "success", "waypoint": db_waypoint}

@app.delete("/api/robots/{robot_id}/waypoints/{name}")
async def delete_waypoint(robot_id: str, name: str):
    """–£–¥–∞–ª–∏—Ç—å waypoint"""
    
    # –£–¥–∞–ª–∏—Ç—å –∏–∑ –ë–î
    await db.delete_waypoint(robot_id, name)
    
    # –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ Zenoh
    topic = f"robots/{robot_id}/config/waypoints/delete"
    payload = json.dumps({"name": name})
    z_session.put(topic, payload)
    
    return {"status": "success"}

@app.get("/api/robots/{robot_id}/waypoints")
async def list_waypoints(robot_id: str):
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö waypoints"""
    waypoints = await db.get_waypoints(robot_id)
    return {"waypoints": waypoints}
```

---

## 10. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 10.1. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ—Å—Ç—å –∑–∞–¥–∞—á

**–§–∞–∑–∞ 1: –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** (2-3 –Ω–µ–¥–µ–ª–∏)
- ‚úÖ –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ: RTABMAP, Nav2, –≥–æ–ª–æ—Å–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏–∏ ("–ò—Å—Å–ª–µ–¥—É–π —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—é", "–ó–∞–∫–æ–Ω—á–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ")
- [ ] YAML —Ñ–∞–π–ª –¥–ª—è waypoints
- [ ] –°–∫—Ä–∏–ø—Ç –∑–∞–ø–∏—Å–∏ waypoints

**–§–∞–∑–∞ 2: AprilTag –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** (1-2 –Ω–µ–¥–µ–ª–∏)
- [ ] –ü–µ—á–∞—Ç—å –∏ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ AprilTag –∫—É–±–æ–≤ (10-20 —à—Ç)
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ—Ç–µ–∫—Ü–∏–∏ AprilTag —Å OAK-D
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è AprilTag –≤ RTABMAP
- [ ] –°–∫—Ä–∏–ø—Ç –æ—á–∏—Å—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤

**–§–∞–∑–∞ 3: –ê–≤—Ç–æ–Ω–æ–º–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ** (3-4 –Ω–µ–¥–µ–ª–∏)
- [ ] –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç—ã: explore_lite, frontier_exploration
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Nav2
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è Rob Box

**–§–∞–∑–∞ 4: –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** (4-6 –Ω–µ–¥–µ–ª—å)
- [ ] Backend API (FastAPI + PostgreSQL)
- [ ] Frontend UI (React)
- [ ] Zenoh bridge
- [ ] –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è waypoints
- [ ] –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤—ã–±–æ—Ä–∞ –æ–±–ª–∞—Å—Ç–∏ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏–∏

### 10.2. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

**RTABMAP**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∂–∏–º "mapping" —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏–∏
- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –≤ "localization" –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- –î–µ–ª–∞—Ç—å backup –ë–î –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ–≤–æ–π –∫–∞—Ä—Ç—ã
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ë–î (—É–¥–∞–ª—è—Ç—å —Å—Ç–∞—Ä—ã–µ —Å–µ—Å—Å–∏–∏)

**AprilTag**:
- –†–∞–∑–º–µ—Ä —Ç–µ–≥–æ–≤: 16 —Å–º (–∫–∞–∫ –≤ –∫–æ–Ω—Ñ–∏–≥–µ)
- –ö–∞—á–µ—Å—Ç–≤–æ –ø–µ—á–∞—Ç–∏: 300+ DPI
- –û—Å–≤–µ—â–µ–Ω–∏–µ: –∏–∑–±–µ–≥–∞—Ç—å –ø—Ä—è–º–æ–≥–æ —Å–æ–ª–Ω–µ—á–Ω–æ–≥–æ —Å–≤–µ—Ç–∞
- –í—ã—Å–æ—Ç–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è: 30-50 —Å–º –æ—Ç –ø–æ–ª–∞ –¥–ª—è OAK-D
- ID 0-99: –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ, ID 100-199: –≤—Ä–µ–º–µ–Ω–Ω—ã–µ

**–ù–∞–≤–∏–≥–∞—Ü–∏—è**:
- –°–∫–æ—Ä–æ—Å—Ç—å –ø—Ä–∏ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏–∏: 0.2-0.3 –º/—Å
- –°–∫–æ—Ä–æ—Å—Ç—å –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏: 0.4-0.5 –º/—Å
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π: 20-30 —Å–º
- –¢–æ—á–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è waypoint: 15 —Å–º (xy_goal_tolerance)

**–û–±–ª–∞—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Zenoh namespace –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ —Ä–æ–±–æ—Ç–æ–≤
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å waypoints —á–µ—Ä–µ–∑ Zenoh
- –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ —Ä–æ–±–æ—Ç–µ
- Graceful fallback –µ—Å–ª–∏ –æ–±–ª–∞–∫–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ

### 10.3. –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏–∏

**–û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–∞—Ä—Ç—ã**:

```python
def evaluate_map_quality(rtabmap_db_path):
    """–û—Ü–µ–Ω–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–Ω–æ–π –∫–∞—Ä—Ç—ã"""
    
    metrics = {
        'num_nodes': 0,          # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–∑–ª–æ–≤ –≤ –≥—Ä–∞—Ñ–µ
        'num_loop_closures': 0,  # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ loop closures
        'map_size_mb': 0,        # –†–∞–∑–º–µ—Ä –ë–î
        'coverage_area_m2': 0,   # –ü–æ–∫—Ä—ã—Ç–∞—è –ø–ª–æ—â–∞–¥—å
        'avg_uncertainty': 0,    # –°—Ä–µ–¥–Ω—è—è –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç—å –ø–æ–∑–∏—Ü–∏–π
    }
    
    # –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î
    conn = sqlite3.connect(rtabmap_db_path)
    cursor = conn.cursor()
    
    # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–∑–ª–æ–≤
    cursor.execute("SELECT COUNT(*) FROM Node")
    metrics['num_nodes'] = cursor.fetchone()[0]
    
    # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ loop closures (—Ç–∏–ø —Å–≤—è–∑–∏ = 1)
    cursor.execute("SELECT COUNT(*) FROM Link WHERE type = 1")
    metrics['num_loop_closures'] = cursor.fetchone()[0]
    
    # –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
    metrics['map_size_mb'] = os.path.getsize(rtabmap_db_path) / (1024 * 1024)
    
    conn.close()
    
    return metrics

# –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:
# {
#   'num_nodes': 1523,
#   'num_loop_closures': 87,
#   'map_size_mb': 245.3,
#   'coverage_area_m2': 120.5,
#   'avg_uncertainty': 0.05
# }
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —Ö–æ—Ä–æ—à–µ–π –∫–∞—Ä—Ç—ã**:
- ‚úÖ Loop closures: –º–∏–Ω–∏–º—É–º 1 –Ω–∞ –∫–∞–∂–¥—ã–µ 20-30 —É–∑–ª–æ–≤
- ‚úÖ –°—Ä–µ–¥–Ω—è—è –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç—å: < 0.1 –º–µ—Ç—Ä–∞
- ‚úÖ –ù–µ—Ç "—Ä–∞–∑—Ä—ã–≤–æ–≤" –≤ –∫–∞—Ä—Ç–µ
- ‚úÖ –í—Å–µ –æ–±–ª–∞—Å—Ç–∏ –ø–æ–∫—Ä—ã—Ç—ã —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ

---

## 11. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–î–∞–Ω–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞–Ω–∏—é –¥–ª—è —Ä–æ–±–æ—Ç–∞ Rob Box, –æ—Ö–≤–∞—Ç—ã–≤–∞—é—â–∏–π:

- üó∫Ô∏è **–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã SLAM** —Å RTABMAP
- ü§ñ **–ê–≤—Ç–æ–Ω–æ–º–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ** —á–µ—Ä–µ–∑ frontier exploration –∏ coverage planning
- üéØ **–ü–æ–≤—ã—à–µ–Ω–∏–µ —Ç–æ—á–Ω–æ—Å—Ç–∏** —Å –ø–æ–º–æ—â—å—é AprilTag –º–∞—Ä–∫–µ—Ä–æ–≤
- üîß **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π** —á–µ—Ä–µ–∑ –æ–±–ª–∞—á–Ω—É—é —Å–∏—Å—Ç–µ–º—É
- üó£Ô∏è **–ì–æ–ª–æ—Å–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π –ø–æ–∑–≤–æ–ª–∏—Ç:
- –£–ø—Ä–æ—Å—Ç–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç
- –ü–æ–≤—ã—Å–∏—Ç—å —Ç–æ—á–Ω–æ—Å—Ç—å –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
- –û–±–µ—Å–ø–µ—á–∏—Ç—å –≥–∏–±–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ waypoints
- –°–æ–∑–¥–∞—Ç—å —É–¥–æ–±–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏**:
1. –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –≤ –≥–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç
2. –ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ AprilTag –∫—É–±–æ–≤
3. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏

---

**–°—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø—Ä–æ–µ–∫—Ç–∞**:
- [MAPPING_COMMANDS.md](../packages/MAPPING_COMMANDS.md) - –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥
- [NAV2_SETUP.md](NAV2_SETUP.md) - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Å—Ç–µ–∫–∞
- [ZENOH_CLOUD_NAMESPACES.md](../architecture/ZENOH_CLOUD_NAMESPACES.md) - –û–±–ª–∞—á–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- [SYSTEM_OVERVIEW.md](../architecture/SYSTEM_OVERVIEW.md) - –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

---

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è**: 24 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è**: 1.0  
**–ê–≤—Ç–æ—Ä**: Rob Box Development Team

