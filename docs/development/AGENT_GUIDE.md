# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è AI –∞–≥–µ–Ω—Ç–æ–≤ - Rob Box Project

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
- [üéØ –ü—Ä–∏–º–µ—Ä—ã —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AI](#-–ø—Ä–∏–º–µ—Ä—ã-—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö-–∑–∞–ø—Ä–æ—Å–æ–≤-–∫-ai)
- [–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](#–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ Docker –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-docker-–ø—Ä–æ–µ–∫—Ç–∞)
- [–î–æ—Å—Ç—É–ø –∫ Raspberry Pi](#–¥–æ—Å—Ç—É–ø-–∫-raspberry-pi)
- [–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏](#–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞-–∏-–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏)
- [–ê–Ω–∞–ª–∏–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π](#–∞–Ω–∞–ª–∏–∑-–ø–æ—Å–ª–µ–¥–Ω–∏—Ö-–∏–∑–º–µ–Ω–µ–Ω–∏–π)
- [–¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Zenoh](#—Ç–µ–∫—É—â–∞—è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-zenoh)
- [–°–∫—Ä–∏–ø—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è](#—Å–∫—Ä–∏–ø—Ç—ã-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è-–∏-—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è)

---

## üéØ –ü—Ä–∏–º–µ—Ä—ã —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AI

**Best Practice –æ—Ç GitHub:** "Make your ask simple and specific. Break down complex tasks."

### ‚ùå –ü–õ–û–•–û (vague, no context):

"–ü–æ—á–∏–Ω–∏ voice assistant"

**–ü–æ—á–µ–º—É –ø–ª–æ—Ö–æ:**
- –ù–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ–±–ª–µ–º–µ
- –ù–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≥–¥–µ –∏—Å–∫–∞—Ç—å
- –°–ª–∏—à–∫–æ–º —à–∏—Ä–æ–∫–æ

---

### ‚úÖ –•–û–†–û–®–û (specific + context + expected outcome):

"Voice assistant –Ω–∞ Vision Pi –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π `ModuleNotFoundError: No module named 'nav2_msgs'` –≤ command_node. 

–ü—Ä–æ–≤–µ—Ä—å `docker/vision/voice_assistant/Dockerfile` - –¥–æ–±–∞–≤–ª–µ–Ω –ª–∏ –ø–∞–∫–µ—Ç `ros-humble-nav2-msgs` –≤ —Å–µ–∫—Ü–∏—é `RUN apt-get install`. –ï—Å–ª–∏ –Ω–µ—Ç - –¥–æ–±–∞–≤—å –µ–≥–æ –≤ —Å–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤ –≤–º–µ—Å—Ç–µ —Å –¥—Ä—É–≥–∏–º–∏ `ros-humble-*` –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏."

**–ü–æ—á–µ–º—É —Ö–æ—Ä–æ—à–æ:**
- ‚úÖ –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ —Å —Ç–µ–∫—Å—Ç–æ–º
- ‚úÖ –£–∫–∞–∑–∞–Ω–∞ –Ω–æ–¥–∞ –≥–¥–µ –ø—Ä–æ–±–ª–µ–º–∞
- ‚úÖ –£–∫–∞–∑–∞–Ω —Ñ–∞–π–ª –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚úÖ –î–∞–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

---

### ‚ùå –ü–õ–û–•–û (too complex, multiple tasks):

"–°–¥–µ–ª–∞–π —á—Ç–æ–±—ã –∫–∞–º–µ—Ä–∞ —Ä–∞–±–æ—Ç–∞–ª–∞ —Å rtabmap –∏ publish–∏–ª–∞ –≤ zenoh –∏ —á—Ç–æ–±—ã –≤—Å–µ –ª–æ–≥–∏ –±—ã–ª–∏ –≤–∏–¥–Ω—ã –∏ –¥–æ–±–∞–≤—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥"

**–ü–æ—á–µ–º—É –ø–ª–æ—Ö–æ:**
- –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–¥–∞—á —Å—Ä–∞–∑—É
- –ù–µ—Ç —á–µ—Ç–∫–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ù–µ–ø–æ–Ω—è—Ç–Ω–æ —Å —á–µ–≥–æ –Ω–∞—á–∞—Ç—å

---

### ‚úÖ –•–û–†–û–®–û (step-by-step):

**–ó–∞–ø—Ä–æ—Å 1:**
"–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ oak-d –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω –∏ –ø—É–±–ª–∏–∫—É–µ—Ç —Ç–æ–ø–∏–∫–∏. –í—ã–ø–æ–ª–Ω–∏:
```bash
docker ps | grep oak-d
docker exec oak-d ros2 topic list | grep camera
```
–ü–æ–∫–∞–∂–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç."

**–ó–∞–ø—Ä–æ—Å 2 (–ø–æ—Å–ª–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞):**
"–¢–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—å —á—Ç–æ zenoh-router –≤–∏–¥–∏—Ç —ç—Ç–∏ —Ç–æ–ø–∏–∫–∏:
```bash
curl http://localhost:8000/@/local/subscriber
```
–ù–∞–π–¥–∏ –≤ –≤—ã–≤–æ–¥–µ `/camera/rgb/image_raw` –∏ `/camera/depth/image_rect_raw`."

**–ó–∞–ø—Ä–æ—Å 3:**
"–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ rtabmap –ø–æ–¥–ø–∏—Å–∞–Ω –Ω–∞ —ç—Ç–∏ —Ç–æ–ø–∏–∫–∏:
```bash
docker logs rtabmap --tail 100 | grep 'Subscribed to'
```"

**–ü–æ—á–µ–º—É —Ö–æ—Ä–æ—à–æ:**
- ‚úÖ –†–∞–∑–±–∏—Ç–æ –Ω–∞ 3 –ø—Ä–æ—Å—Ç—ã—Ö —à–∞–≥–∞
- ‚úÖ –ö–∞–∂–¥—ã–π —à–∞–≥ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
- ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É–∫–∞–∑–∞–Ω
- ‚úÖ –ú–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ—à–∞–≥–æ–≤–æ

---

### ‚úÖ –û–¢–õ–ò–ß–ù–û (with examples + desired outcome):

"–í launch —Ñ–∞–π–ª–µ `voice_assistant_headless.launch.py` –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –Ω–æ–¥—É `command_node`.

**–ü—Ä–∏–º–µ—Ä —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –Ω–æ–¥—ã:**
```python
Node(
    package='rob_box_voice',
    executable='audio_node',
    name='audio_node',
    output='screen',
    parameters=[config_file],
    respawn=True,
    respawn_delay=2.0
)
```

**–ó–∞–¥–∞—á–∞:** –î–æ–±–∞–≤—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω—É—é –¥–ª—è `command_node` —Å:
- `respawn_delay=5.0` (–±–æ–ª—å—à–µ —á–µ–º —É audio_node)
- –í –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —É–∫–∞–∂–∏ 'Navigation commands processor'

**–ñ–µ–ª–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```python
# Navigation commands processor
Node(
    package='rob_box_voice',
    executable='command_node',
    name='command_node',
    output='screen',
    parameters=[config_file],
    respawn=True,
    respawn_delay=5.0
)
```"

**–ü–æ—á–µ–º—É –æ—Ç–ª–∏—á–Ω–æ:**
- ‚úÖ –£–∫–∞–∑–∞–Ω —Ñ–∞–π–ª
- ‚úÖ –î–∞–Ω –ø—Ä–∏–º–µ—Ä –ø–æ—Ö–æ–∂–µ–≥–æ –∫–æ–¥–∞
- ‚úÖ –ß–µ—Ç–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- ‚úÖ –ü–æ–∫–∞–∑–∞–Ω –∂–µ–ª–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è few-shot learning

---

### üí° Pro Tips –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

1. **–ù–∞—á–∏–Ω–∞–π —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:**
   - "–†–∞–±–æ—Ç–∞—é —Å Voice Assistant –Ω–∞ Vision Pi"
   - "–ò–∑–º–µ–Ω—è—é docker-compose.yaml –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è env –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π"
   - "–§–∏–∫—à—É Animation Editor - –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è keyframes"

2. **–£–∫–∞–∑—ã–≤–∞–π —Ñ–∞–π–ª—ã —è–≤–Ω–æ:**
   - ‚ùå "–≤ –∫–æ–Ω—Ñ–∏–≥–µ"
   - ‚úÖ "–≤ `docker/vision/docker-compose.yaml`"

3. **–¶–∏—Ç–∏—Ä—É–π –æ—à–∏–±–∫–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é:**
   - ‚ùå "–∫–∞–∫–∞—è-—Ç–æ –æ—à–∏–±–∫–∞ —Å –∏–º–ø–æ—Ä—Ç–æ–º"
   - ‚úÖ "```ModuleNotFoundError: No module named 'nav2_msgs'```"

4. **–ü–æ–∫–∞–∑—ã–≤–∞–π —á—Ç–æ —É–∂–µ –ø—Ä–æ–±–æ–≤–∞–ª:**
   - "–ü—Ä–æ–≤–µ—Ä–∏–ª —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω - `docker ps` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç voice-assistant"
   - "–ü–æ—Å–º–æ—Ç—Ä–µ–ª –ª–æ–≥–∏ - `docker logs voice-assistant` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç RuntimeError"

5. **–ò—Å–ø–æ–ª—å–∑—É–π AI Context Map:**
   - –û—Ç–∫—Ä–æ–π 1-2 —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ñ–∞–π–ª–∞ –ü–ï–†–ï–î –∑–∞–ø—Ä–æ—Å–æ–º
   - –°–º–æ—Ç—Ä–∏ `docs/development/AI_CONTEXT_MAP.md` –¥–ª—è –ø–æ–¥—Å–∫–∞–∑–æ–∫

6. **–†–∞–∑–±–∏–≤–∞–π –Ω–∞ —à–∞–≥–∏ –µ—Å–ª–∏ —Å–ª–æ–∂–Ω–æ:**
   ```
   –ó–∞–¥–∞—á–∞: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å voice assistant —Å –Ω–æ–≤—ã–º–∏ API –∫–ª—é—á–∞–º–∏
   
   –®–∞–≥ 1: –°–æ–∑–¥–∞–π .env.secrets –∏–∑ template
   –®–∞–≥ 2: –î–æ–±–∞–≤—å env_file –≤ docker-compose.yaml
   –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
   –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –∫–ª—é—á–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
   ```

---

### üìö –®–∞–±–ª–æ–Ω—ã –∑–∞–ø—Ä–æ—Å–æ–≤

#### Debugging Issue:
```
–ü—Ä–æ–±–ª–µ–º–∞: [–æ–ø–∏—Å–∞–Ω–∏–µ]
–§–∞–π–ª: [–ø—É—Ç—å –∫ —Ñ–∞–π–ª—É]
–û—à–∏–±–∫–∞: [—Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏]
–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏–ª: [—Å–ø–∏—Å–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π]
–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ: [—á—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å]
```

#### Adding Feature:
```
–ó–∞–¥–∞—á–∞: –î–æ–±–∞–≤–∏—Ç—å [—Ñ–∏—á–∞] –≤ [–∫–æ–º–ø–æ–Ω–µ–Ω—Ç]
–ü–æ—Ö–æ–∂–∏–π –ø—Ä–∏–º–µ—Ä: [—Ñ–∞–π–ª:—Å—Ç—Ä–æ–∫–∏ –∏–ª–∏ –∫–æ–¥]
–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
  1. [—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ 1]
  2. [—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ 2]
–ñ–µ–ª–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: [–æ–ø–∏—Å–∞–Ω–∏–µ –∏–ª–∏ –∫–æ–¥]
```

#### Configuration Change:
```
–ò–∑–º–µ–Ω—è—é: [—Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏]
–¶–µ–ª—å: [—á—Ç–æ —Ö–æ—á—É –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å]
–¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: [current config]
–ñ–µ–ª–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: [desired config]
–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: [—á—Ç–æ –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å—Å—è]
```

---

## –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

**Rob Box Project** - –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Ä–æ–±–æ—Ç –Ω–∞ –±–∞–∑–µ –¥–≤—É—Ö Raspberry Pi 4 —Å OAK-D Lite –∫–∞–º–µ—Ä–æ–π –∏ RTAB-Map SLAM.

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

**Vision Pi (10.1.1.11 eth0 / 10.1.1.21 wlan0)**
- OAK-D Lite –∫–∞–º–µ—Ä–∞ (Intel Movidius MyriadX)
- AprilTag –¥–µ—Ç–µ–∫—Ü–∏—è
- LED Matrix –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
- Voice Assistant (ReSpeaker)
- Zenoh router –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

**Main Pi (10.1.1.10 eth0 / 10.1.1.20 wlan0)**
- RTAB-Map SLAM —Å–∏—Å—Ç–µ–º–∞
- LSLIDAR N10 (2D LiDAR)
- Perception —Å–∏—Å—Ç–µ–º–∞ (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –¥–∏–∞–ª–æ–≥)
- Navigation (Nav2)
- Motor control (ROS2 Control + VESC)
- Zenoh router (—Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —É–∑–µ–ª)
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –≤–Ω–µ—à–Ω–µ–º—É —Å–µ—Ä–≤–µ—Ä—É zenoh.robbox.online:7447

### –°–µ—Ç–µ–≤–∞—è —Ç–æ–ø–æ–ª–æ–≥–∏—è

```
Vision Pi (eth0: 10.1.1.11)  ‚Üê‚Üí  Main Pi (eth0: 10.1.1.10)
     ‚Üì                                    ‚Üì
WiFi (wlan0: 10.1.1.21)         WiFi (wlan0: 10.1.1.20)
   (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)                        (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
                                         ‚Üì
                               zenoh.robbox.online:7447
```

**‚ö†Ô∏è –í–ê–ñ–ù–û**: 
- **Gigabit Ethernet (eth0)**: –¢–û–õ–¨–ö–û –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É Pi
- **WiFi (wlan0)**: –¢–û–õ–¨–ö–û –¥–ª—è SSH –¥–æ—Å—Ç—É–ø–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ö Zenoh router –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¢–û–õ–¨–ö–û Ethernet IP (10.1.1.10, 10.1.1.11)

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Docker –ø—Ä–æ–µ–∫—Ç–∞

### üìÅ –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏:

```
docker/
‚îú‚îÄ‚îÄ DOCKER_STANDARDS.md          # ‚≠ê –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤
‚îú‚îÄ‚îÄ AGENT_GUIDE.md               # –≠—Ç–æ—Ç —Ñ–∞–π–ª - –≥–∞–π–¥ –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ main/                        # Main Pi (10.1.1.20)
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.yaml      # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ config/                  # –û–±—â–∏–µ –∫–æ–Ω—Ñ–∏–≥–∏ –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ scripts/                 # –£—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ maps/                    # Persistent –¥–∞–Ω–Ω—ã–µ RTAB-Map
‚îÇ   ‚îî‚îÄ‚îÄ <service_name>/          # –ü–∞–ø–∫–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ       ‚îú‚îÄ‚îÄ entrypoint.sh        (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îÇ       ‚îî‚îÄ‚îÄ config/              (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ - —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏)
‚îî‚îÄ‚îÄ vision/                      # Vision Pi (10.1.1.21)
    ‚îú‚îÄ‚îÄ docker-compose.yaml
    ‚îú‚îÄ‚îÄ config/                  # –û–±—â–∏–µ –∫–æ–Ω—Ñ–∏–≥–∏
    ‚îú‚îÄ‚îÄ scripts/                 # –£—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
    ‚îî‚îÄ‚îÄ <service_name>/
```

### üéØ –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **Volumes**: –í—Å–µ–≥–¥–∞ `./config:/config`, –ë–ï–ó –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
2. **–ö–æ–Ω—Ñ–∏–≥–∏**: –û–±—â–∏–µ –≤ `config/`, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –≤ `<service>/config/`
3. **–°–∫—Ä–∏–ø—Ç—ã**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ `scripts/`, entrypoint –≤ –ø–∞–ø–∫–µ —Å–µ—Ä–≤–∏—Å–∞
4. **Environment**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –Ω–∞–±–æ—Ä ROS 2 + Zenoh –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
5. **Network**: –¢–æ–ª—å–∫–æ `network_mode: host`
6. **Dependencies**: –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–≤–∏—Å—è—Ç –æ—Ç `zenoh-router`

### ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–ê–í–ò–õ–ê –î–õ–Ø DOCKERFILES

**üö´ –ó–ê–ü–†–ï–©–ï–ù–û –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ Dockerfile:**
- ‚ùå `COPY config/` - –∫–æ–Ω—Ñ–∏–≥–∏ –º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ volumes!
- ‚ùå `COPY scripts/` - —Å–∫—Ä–∏–ø—Ç—ã –º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ volumes!
- ‚ùå `COPY launch/` - launch —Ñ–∞–π–ª—ã –º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ volumes!
- ‚ùå `COPY src/rob_box_description` - URDF –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ volumes!

**‚úÖ –†–ê–ó–†–ï–®–ï–ù–û –≤ Dockerfile:**
- ‚úÖ `RUN apt-get install` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤
- ‚úÖ `RUN git clone` - –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
- ‚úÖ `RUN colcon build` - –∫–æ–º–ø–∏–ª—è—Ü–∏—è ROS –ø–∞–∫–µ—Ç–æ–≤
- ‚úÖ `RUN pip install` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:**
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–∞/—Å–∫—Ä–∏–ø—Ç–∞ –ù–ï –¥–æ–ª–∂–Ω–æ —Ç—Ä–µ–±–æ–≤–∞—Ç—å –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–∞
- –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ lslidar/apriltag –∑–∞–Ω–∏–º–∞–µ—Ç 5-10 –º–∏–Ω—É—Ç
- Restart –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∑–∞–Ω–∏–º–∞–µ—Ç 2-5 —Å–µ–∫—É–Ω–¥
- Volumes –ø–æ–∑–≤–æ–ª—è—é—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ

**–°–º. –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏:** `BUILD_OPTIMIZATION.md`

### üìñ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–ü–µ—Ä–µ–¥ –ª—é–±—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —á–∏—Ç–∞–π:**
- `DOCKER_STANDARDS.md` - –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã, –ø—Ä–∏–º–µ—Ä—ã, workflow
- `BUILD_OPTIMIZATION.md` - –ø—Ä–∞–≤–∏–ª–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–æ–≤
- `CI_CD_PIPELINE.md` - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏ —á–µ—Ä–µ–∑ GitHub Actions

---

## üöÄ CI/CD —á–µ—Ä–µ–∑ GitHub Actions

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤

**‚ö†Ô∏è –í–ê–ñ–ù–û**: Docker –æ–±—Ä–∞–∑—ã –ù–ï —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ Pi! –°–±–æ—Ä–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ GitHub Actions.

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ workflow

```
Feature Branch (feature/*)
         ‚Üì push
    GitHub Actions
         ‚Üì build changed services
    Auto-merge ‚Üí Develop (develop)
         ‚Üì push all changes
    Build ALL services
         ‚Üì success
    Auto-merge ‚Üí Main (main)
         ‚Üì
    Docker Images Published
    ghcr.io/krikz/rob_box:*-humble-latest
```

### Workflow —Ñ–∞–π–ª—ã

| Workflow | –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|----------|------|------------|
| **Feature ‚Üí Develop** | `.github/workflows/auto-merge-feature-to-develop.yml` | –°–æ–±–∏—Ä–∞–µ—Ç –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã, –∞–≤—Ç–æ–º–µ—Ä–¥–∂–∏—Ç –≤ develop |
| **Develop ‚Üí Main** | `.github/workflows/auto-merge-to-main.yml` | –°–æ–±–∏—Ä–∞–µ—Ç –í–°–ï —Å–µ—Ä–≤–∏—Å—ã, –∞–≤—Ç–æ–º–µ—Ä–¥–∂–∏—Ç –≤ main |
| **Vision Services** | `.github/workflows/build-vision-services.yml` | –°–±–æ—Ä–∫–∞ oak-d, apriltag, led-matrix, voice-assistant |
| **Main Services** | `.github/workflows/build-main-services.yml` | –°–±–æ—Ä–∫–∞ rtabmap, nav2, ros2-control, lslidar, perception |
| **Base Images** | `.github/workflows/build-base-images.yml` | –°–±–æ—Ä–∫–∞ –±–∞–∑–æ–≤—ã—Ö –æ–±—Ä–∞–∑–æ–≤ (ros2-zenoh) |

### Docker Image Tagging

| Branch | Tag | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|--------|-----|---------------|
| **main** | `*-humble-latest` | Production (—Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è) |
| **develop** | `*-humble-dev` | Development (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ) |
| **feature/*** | `*-humble-test` | Feature testing (—Ç–µ–∫—É—â–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞) |

**–ü—Ä–∏–º–µ—Ä –¥–ª—è voice-assistant:**
- `ghcr.io/krikz/rob_box:voice-assistant-humble-latest` (main)
- `ghcr.io/krikz/rob_box:voice-assistant-humble-dev` (develop)
- `ghcr.io/krikz/rob_box:voice-assistant-humble-test` (feature/*)

### Workflow –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞

```bash
# 1. –°–æ–∑–¥–∞–µ—à—å feature –≤–µ—Ç–∫—É
git checkout -b feature/fix-voice-assistant

# 2. –î–µ–ª–∞–µ—à—å –∏–∑–º–µ–Ω–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ Dockerfile –∏–ª–∏ docker-compose.yaml)
vim docker/vision/voice_assistant/Dockerfile
vim docker/vision/docker-compose.yaml

# 3. –ö–æ–º–º–∏—Ç–∏—à—å –∏ –ø—É—à–∏—à—å
git add .
git commit -m "fix: –¥–æ–±–∞–≤–∏—Ç—å nav2-msgs –¥–ª—è command_node"
git push origin feature/fix-voice-assistant

# 4. GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
#    - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª—Å—è Vision Pi
#    - –ó–∞–ø—É—Å–∫–∞–µ—Ç build-vision-services.yml
#    - –°–æ–±–∏—Ä–∞–µ—Ç voice-assistant-humble-test
#    - –ü—É—à–∏—Ç –æ–±—Ä–∞–∑ –≤ ghcr.io
#    - –ú–µ—Ä–¥–∂–∏—Ç –≤ develop (–µ—Å–ª–∏ —Å–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞)
#    - –£–¥–∞–ª—è–µ—Ç feature –≤–µ—Ç–∫—É

# 5. –ù–∞ Vision Pi - –æ–±–Ω–æ–≤–ª—è–µ—à—å –∫–æ–¥ –∏ –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—à—å –Ω–æ–≤—ã–π –æ–±—Ä–∞–∑
sshpass -p 'open' ssh ros2@10.1.1.21 \
  'cd ~/rob_box_project/docker/vision && \
   git pull && \
   docker compose pull voice-assistant && \
   docker compose up -d voice-assistant'
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–±–æ—Ä–∫–∏

**GitHub Actions:**
- https://github.com/krikz/rob_box_project/actions

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:**
```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–π workflow run
gh run list --limit 5

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ workflow
gh run view <run-id> --log
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤:**
```bash
# –ù–∞ Vision Pi - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∫–æ–π –æ–±—Ä–∞–∑ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
sshpass -p 'open' ssh ros2@10.1.1.21 'docker images | grep voice-assistant'

# –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å: ghcr.io/krikz/rob_box  voice-assistant-humble-test
```

### –ö–æ–≥–¥–∞ –ù–ï –Ω—É–∂–Ω–∞ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –ë–ï–ó rebuild** (–ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ volumes):
- –ö–æ–Ω—Ñ–∏–≥–∏: `docker/vision/config/**`
- –°–∫—Ä–∏–ø—Ç—ã: `docker/vision/scripts/**`
- Launch —Ñ–∞–π–ª—ã: `docker/vision/config/voice/voice_assistant_headless.launch.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –° rebuild** (—Ç—Ä–µ–±—É—é—Ç GitHub Actions):
- `Dockerfile` (—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
- `requirements.txt` (Python –ø–∞–∫–µ—Ç—ã)
- –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ ROS –ø–∞–∫–µ—Ç–æ–≤ (colcon build)

**–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏:** –°–º. `docs/CI_CD_PIPELINE.md`

---

### ‚ö° –ë—ã—Å—Ç—Ä–∞—è –æ—Ç–ª–∞–¥–∫–∞ —á–µ—Ä–µ–∑ docker exec (–ë–ï–ó –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–∞)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ù—É–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∫—É –∫–æ–¥–∞
- CI/CD —Å–±–æ—Ä–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç 5-10 –º–∏–Ω—É—Ç
- –ö–æ–Ω—Ñ–∏–≥–∏ –º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ volumes –∏ –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ **–ù–ï —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è** –ø–æ—Å–ª–µ —Ä–µ—Å—Ç–∞—Ä—Ç–∞! –≠—Ç–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.

**Workflow –±—ã—Å—Ç—Ä–æ–π –æ—Ç–ª–∞–¥–∫–∏:**

```bash
# 1. –ù–ê –õ–û–ö–ê–õ–¨–ù–û–ô –ú–ê–®–ò–ù–ï - –∫–æ–º–º–∏—Ç–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è (–Ω–æ –ù–ï –ø—É—à–∏–º)
git add docker/vision/config/oak-d/oak_d_config.yaml
git commit -m "fix: –≤–∫–ª—é—á–∏—Ç—å IMU –¥–ª—è RTAB-Map"

# 2. –ù–ê RASPBERRY PI - –∑–∞—Ö–æ–¥–∏–º –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –º–µ–Ω—è–µ–º –∫–æ–Ω—Ñ–∏–≥ –≤—Ä—É—á–Ω—É—é
wsl sshpass -p 'open' ssh -o StrictHostKeyChecking=no ros2@10.1.1.21

# –í–Ω—É—Ç—Ä–∏ Vision Pi:
cd ~/rob_box_project/docker/vision
nano config/oak-d/oak_d_config.yaml  # –í—Ä—É—á–Ω—É—é –º–µ–Ω—è–µ–º i_enable_imu: true

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —á—Ç–æ–±—ã –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
docker restart oak-d

# 4. –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
docker logs oak-d --tail 50

# 5. –ï—Å–ª–∏ –≤—Å—ë –û–ö - –ø—É—à–∏–º –∫–æ–º–º–∏—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ–º CI/CD
exit  # –í—ã—Ö–æ–¥–∏–º –∏–∑ Pi
git push origin feature/enable-imu  # –≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç —Å–±–æ—Ä–∫—É –æ–±—Ä–∞–∑–∞

# 6. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏ - pull –Ω–æ–≤—ã–π –æ–±—Ä–∞–∑ –Ω–∞ Pi
wsl sshpass -p 'open' ssh -o StrictHostKeyChecking=no ros2@10.1.1.21 \
  'cd ~/rob_box_project/docker/vision && \
   git pull && \
   docker compose pull oak-d && \
   docker compose up -d oak-d'
```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:**

```bash
# –ó–∞–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –Ω–∞–ø—Ä—è–º—É—é
wsl sshpass -p 'open' ssh -o StrictHostKeyChecking=no ros2@10.1.1.21 \
  'docker exec -it oak-d /bin/bash'

# –í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
apt-get update && apt-get install -y nano
nano /config/oak_d_config.yaml
exit

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
wsl sshpass -p 'open' ssh -o StrictHostKeyChecking=no ros2@10.1.1.21 \
  'docker restart oak-d'
```

**–ü–ª—é—Å—ã:**
- ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π (2-3 —Å–µ–∫—É–Ω–¥—ã)
- ‚úÖ –ù–µ –∂–¥—ë–º CI/CD —Å–±–æ—Ä–∫—É (5-10 –º–∏–Ω—É—Ç)
- ‚úÖ –ú–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –∏—Ç–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∫–∏

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå –ò–∑–º–µ–Ω–µ–Ω–∏—è –ü–û–¢–ï–†–Ø–Æ–¢–°–Ø –ø—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏–∑ –Ω–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞
- ‚ùå –ù—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å —Å–∫–æ–º–º–∏—Ç–∏—Ç—å –∏ –∑–∞–ø—É—à–∏—Ç—å –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚ùå –†–∏—Å–∫ –∑–∞–±—ã—Ç—å –∑–∞–ø—É—à–∏—Ç—å –∏ –ø–æ—Ç–µ—Ä—è—Ç—å –ø—Ä–∞–≤–∫–∏

**–ü—Ä–∞–≤–∏–ª–æ:** –í–°–ï–ì–î–ê –∫–æ–º–º–∏—Ç–∏–º –°–ù–ê–ß–ê–õ–ê, –æ—Ç–ª–∞–∂–∏–≤–∞–µ–º –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –ø–æ—Ç–æ–º –ø—É—à–∏–º.

---

### üõ†Ô∏è –†–∞–±–æ—Ç–∞ —Å Docker –Ω–∞ Pi —á–µ—Ä–µ–∑ WSL

**–í–ê–ñ–ù–û**: –î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Docker –Ω–∞ Raspberry Pi –∏–∑ Windows –∏—Å–ø–æ–ª—å–∑—É–π WSL + sshpass:

```bash
# –û–±—â–∏–π —Ñ–æ—Ä–º–∞—Ç –∫–æ–º–∞–Ω–¥—ã
wsl sshpass -p 'open' ssh -o StrictHostKeyChecking=no ros2@<PI_IP> '<–∫–æ–º–∞–Ω–¥–∞>'

# –ü—Ä–∏–º–µ—Ä—ã:
# Vision Pi - —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
wsl sshpass -p 'open' ssh -o StrictHostKeyChecking=no ros2@10.1.1.21 'docker ps'

# Main Pi - –ª–æ–≥–∏ RTAB-Map
wsl sshpass -p 'open' ssh -o StrictHostKeyChecking=no ros2@10.1.1.20 'docker logs rtabmap'

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ (Vision Pi)
wsl sshpass -p 'open' ssh -o StrictHostKeyChecking=no ros2@10.1.1.21 \
  'cd ~/rob_box_project/docker/vision && git pull && docker compose build lslidar && docker compose up -d lslidar'

# –ü–æ–ª–Ω—ã–π —Ä–µ—Å—Ç–∞—Ä—Ç —Å–∏—Å—Ç–µ–º—ã (Main Pi)
wsl sshpass -p 'open' ssh -o StrictHostKeyChecking=no ros2@10.1.1.20 \
  'cd ~/rob_box_project/docker/main && docker compose down && docker compose up -d'
```

**–ü–æ—á–µ–º—É WSL + sshpass:**
- Windows PowerShell –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç sshpass –Ω–∞–ø—Ä—è–º—É—é
- SSH –∫–ª—é—á–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞—Ä–æ–ª—å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)
- `-o StrictHostKeyChecking=no` –æ—Ç–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É host key

### üöÄ Workflow –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

–°–º. —Ä–∞–∑–¥–µ–ª "Workflow –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞" –≤ `DOCKER_STANDARDS.md`

---

## –î–æ—Å—Ç—É–ø –∫ Raspberry Pi

### Credentials

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Vision Pi | Main Pi |
|----------|-----------|---------|
| **Ethernet IP** | 10.1.1.11 | 10.1.1.10 |
| **WiFi IP** | 10.1.1.21 | 10.1.1.20 |
| **Username** | ros2 | ros2 |
| **Password** | open | open |

**‚ö†Ô∏è –í–ê–ñ–ù–û –î–õ–Ø –ê–ì–ï–ù–¢–û–í**: –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π `sshpass -p 'open'` –¥–ª—è –Ω–µ–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö SSH –∫–æ–º–∞–Ω–¥!

### SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```bash
# ‚ö†Ô∏è –í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–π sshpass –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏!
# Vision Pi
sshpass -p 'open' ssh ros2@10.1.1.11

# Main Pi  
sshpass -p 'open' ssh ros2@10.1.1.20

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –±–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤—Ö–æ–¥–∞
sshpass -p 'open' ssh ros2@10.1.1.11 'docker ps'
sshpass -p 'open' ssh ros2@10.1.1.20 'docker logs rtabmap'
```

### –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö Pi

```bash
# Vision Pi - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
wsl sshpass -p 'open' ssh -o StrictHostKeyChecking=no ros2@10.1.1.21 'docker ps'

# Main Pi - –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
wsl sshpass -p 'open' ssh -o StrictHostKeyChecking=no ros2@10.1.1.20 'docker logs rtabmap'

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
wsl sshpass -p 'open' ssh -o StrictHostKeyChecking=no ros2@10.1.1.21 \
  'cd ~/rob_box_project/docker/vision && git pull && docker-compose down && docker-compose up -d'
```

---

## üîí –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞–º–∏ (API Keys)

### Voice Assistant —Å–µ–∫—Ä–µ—Ç—ã

Voice Assistant —Ç—Ä–µ–±—É–µ—Ç API –∫–ª—é—á–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã DialogueNode (DeepSeek) –∏ TTSNode (Yandex Cloud).

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û**: API –∫–ª—é—á–∏ –ù–ï –¥–æ–ª–∂–Ω—ã –∫–æ–º–º–∏—Ç–∏—Ç—å—Å—è –≤ git!

### –°–æ–∑–¥–∞–Ω–∏–µ .env.secrets –Ω–∞ Vision Pi

–§–∞–π–ª `.env.secrets` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω –≤—Ä—É—á–Ω—É—é –Ω–∞ Vision Pi:

```bash
# –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ Vision Pi
sshpass -p 'open' ssh ros2@10.1.1.21

# –°–æ–∑–¥–∞–µ–º .env.secrets
cat > ~/rob_box_project/docker/vision/.env.secrets << 'EOF'
# üîí API Keys –¥–ª—è Voice Assistant (–ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—å –≤ git!)

# DeepSeek API (–¥–ª—è DialogueNode - LLM –¥–∏–∞–ª–æ–≥–∏)
DEEPSEEK_API_KEY=your_deepseek_api_key_here

# Yandex Cloud API (–¥–ª—è TTSNode - —Å–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏)
YANDEX_API_KEY=your_yandex_api_key_here
YANDEX_FOLDER_ID=your_yandex_folder_id_here
EOF

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω
cat ~/rob_box_project/docker/vision/.env.secrets
```

**–ì–¥–µ –≤–∑—è—Ç—å –∫–ª—é—á–∏:**
- **DeepSeek API**: https://platform.deepseek.com/api_keys
- **Yandex Cloud**: https://console.cloud.yandex.ru/folders/{folder_id}/iam/service-accounts

**–ó–∞—â–∏—Ç–∞ –æ—Ç –∫–æ–º–º–∏—Ç–∞:**
- –§–∞–π–ª `.env.secrets` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `docker/vision/.gitignore`
- docker-compose.yaml –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `env_file: .env.secrets` –≤–º–µ—Å—Ç–æ –ø—Ä—è–º—ã—Ö environment –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤

```bash
# –ù–∞ Vision Pi - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–ª—é—á–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
sshpass -p 'open' ssh ros2@10.1.1.21 \
  'docker exec voice-assistant printenv | grep -E "DEEPSEEK|YANDEX"'

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
# DEEPSEEK_API_KEY=sk-...
# YANDEX_API_KEY=AQVN...
# YANDEX_FOLDER_ID=aje...
```

---

## –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### üìä –°–∫—Ä–∏–ø—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

#### 1. `docker/monitor_system.sh` - –û–±—â–∏–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `docker/monitor_system.sh`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ CPU, –ø–∞–º—è—Ç–∏, —Å–µ—Ç–∏, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –¥–ª—è –æ–±–æ–∏—Ö Pi  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
# –ù–∞ Vision Pi
ssh ros2@10.1.1.21
cd ~/rob_box_project/docker
./monitor_system.sh
```

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç**:
- –¢–∏–ø Pi (–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º)
- CPU –Ω–∞–≥—Ä—É–∑–∫–∞ (–æ–±—â–∞—è —Å–∏—Å—Ç–µ–º–∞ + –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)
- –ü–∞–º—è—Ç—å (–æ–±—â–∞—è + –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)
- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
- Throttling —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–ø–æ–Ω–∏–∂–µ–Ω–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, —á–∞—Å—Ç–æ—Ç–∞ –∏ —Ç.–¥.)
- –°–µ—Ç—å (RX/TX –Ω–∞ eth0 –∏ wlan0)
- –¢–æ–ø –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –°—Ç–∞—Ç—É—Å Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- ‚úÖ **–û–°–¢–ê–í–ò–¢–¨** - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- –ó–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏ –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–∏ –Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é

---

#### 2. `docker/vision/realtime_monitor.sh` - Real-time –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–º–µ—Ä—ã
**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `docker/vision/realtime_monitor.sh`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –î–µ—Ç–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç—ã OAK-D –∫–∞–º–µ—Ä—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
# –ù–∞ Vision Pi
cd ~/rob_box_project/docker/vision
./realtime_monitor.sh [duration_in_seconds]  # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 30 —Å–µ–∫—É–Ω–¥
```

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç** (–∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã):
- CPU (usr/sys/idle)
- –°–µ—Ç—å eth0 (RX/TX KB/s)
- RGB publisher count
- Depth publisher count
- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞
- Throttling —Å–æ—Å—Ç–æ—è–Ω–∏–µ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- ‚úÖ **–û–°–¢–ê–í–ò–¢–¨** - –∫–ª—é—á–µ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∫–∞–º–µ—Ä—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Ç–æ–ø–∏–∫–æ–≤
- –ó–∞–ø—É—Å–∫–∞—Ç—å –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–∞–º–µ—Ä—ã

---

#### 3. `docker/vision/monitor_camera_startup.sh` - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–ø—É—Å–∫–∞ –∫–∞–º–µ—Ä—ã
**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `docker/vision/monitor_camera_startup.sh`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–ø—É—Å–∫–∞ –∫–∞–º–µ—Ä—ã —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ª–æ–≥–æ–≤  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
# –ù–∞ Vision Pi
cd ~/rob_box_project/docker/vision
./monitor_camera_startup.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**:
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–∞–º–µ—Ä—É
- –§–æ–Ω–æ–≤—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ CPU (60 —Å–µ–∫—É–Ω–¥, –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã)
- –§–æ–Ω–æ–≤—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∏—Ç–∞–Ω–∏—è/throttling
- –§–æ–Ω–æ–≤—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ç–∏ eth0
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ROS 2 —Ç–æ–ø–∏–∫–æ–≤
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –ª–æ–≥–æ–≤ –≤ `/tmp/camera_monitor_YYYYMMDD_HHMMSS/`

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- ‚ö†Ô∏è **–£–°–¢–ê–†–ï–õ** - —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è `realtime_monitor.sh`
- üóëÔ∏è **–£–î–ê–õ–ò–¢–¨** –∏–ª–∏ **–û–ë–™–ï–î–ò–ù–ò–¢–¨** —Å `realtime_monitor.sh`
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –ø–æ–ª–µ–∑–Ω–æ, –Ω–æ –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–ø—Ü–∏–µ–π –≤ realtime_monitor

---

### üîç –°–∫—Ä–∏–ø—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

#### 4. `docker/diagnose_data_flow.sh` - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–≤—è–∑–∏ –º–µ–∂–¥—É Pi
**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `docker/diagnose_data_flow.sh`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ–≥–æ –ø—É—Ç–∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö: Vision Pi ‚Üí Main Pi  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ (Windows PowerShell)
cd d:\PROJECTS\rob_box_project\docker
wsl bash ./diagnose_data_flow.sh
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç**:
1. –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–∞–º–µ—Ä—ã —á–µ—Ä–µ–∑ docker-compose
2. Publisher count –Ω–∞ Vision Pi
3. –°–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫ eth0 –Ω–∞ Vision Pi
4. Subscriber count –Ω–∞ Main Pi
5. –ò—Ç–æ–≥–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- ‚úÖ **–û–°–¢–ê–í–ò–¢–¨** - –∫—Ä–∏—Ç–∏—á–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –º–µ–∂–ø–ª–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
- –ó–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–µ "Did not receive data since 5 seconds"
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º sshpass

---

#### 5. `docker/vision/diagnose.sh` - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–∞–º–µ—Ä—ã –Ω–∞ Vision Pi
**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `docker/vision/diagnose.sh`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–∞–º–µ—Ä—ã –∏ —Ç–æ–ø–∏–∫–æ–≤  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
# –ù–∞ Vision Pi
cd ~/rob_box_project/docker/vision
./diagnose.sh
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç**:
1. –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ oak-d
2. –õ–æ–≥–∏ –∫–∞–º–µ—Ä—ã (ERROR/WARN)
3. –°–ø–∏—Å–æ–∫ ROS 2 —Ç–æ–ø–∏–∫–æ–≤ –æ—Ç –∫–∞–º–µ—Ä—ã
4. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–ø–∏–∫–∞—Ö (compressed)
5. –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Ç–æ–ø–∏–∫–æ–≤ (5 —Å–µ–∫—É–Ω–¥)
6. –ù–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã (CPU/–ø–∞–º—è—Ç—å)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- ‚úÖ **–û–°–¢–ê–í–ò–¢–¨** - –±—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –Ω–∞ Vision Pi
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø–µ—Ä–≤–∏—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞–º–µ—Ä—ã

---

#### 6. `docker/vision/force_publish.sh` - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Ç–æ–ø–∏–∫–æ–≤
**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `docker/vision/force_publish.sh`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—Ç–∫–ª—é—á–µ–Ω–∏–µ lazy publisher –¥–ª—è OAK-D  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
# –ù–∞ Vision Pi
cd ~/rob_box_project/docker/vision
./force_publish.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**:
- –û—Ç–∫–ª—é—á–∞–µ—Ç `color.i_enable_lazy_publisher` 
- –û—Ç–∫–ª—é—á–∞–µ—Ç `depth.i_enable_lazy_publisher`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç publisher count

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- ‚ö†Ô∏è **–£–°–¢–ê–†–ï–õ** - `update_and_restart.sh` —É–∂–µ –≤–∫–ª—é—á–∞–µ—Ç —ç—Ç—É –ª–æ–≥–∏–∫—É
- üóëÔ∏è **–£–î–ê–õ–ò–¢–¨** - —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è, –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫

---

### üîß –°–∫—Ä–∏–ø—Ç—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

#### 7. `docker/tune.sh` - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –±—É—Ñ–µ—Ä–æ–≤ (CycloneDDS)
**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `docker/tune.sh`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö –±—É—Ñ–µ—Ä–æ–≤ –¥–ª—è CycloneDDS  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
# –ù–∞ –ª—é–±–æ–º Pi
cd ~/rob_box_project/docker
sudo bash tune.sh
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- ‚ö†Ô∏è **–£–°–¢–ê–†–ï–õ** - —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ—à–ª–∞ –Ω–∞ Zenoh, CycloneDDS –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- üóëÔ∏è **–£–î–ê–õ–ò–¢–¨** - –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –∫–∞–∫ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

---

### üöÄ –°–∫—Ä–∏–ø—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### 8. `docker/vision/update_and_restart.sh` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ Vision Pi
**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `docker/vision/update_and_restart.sh`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
# –ù–∞ Vision Pi
cd ~/rob_box_project/docker/vision
./update_and_restart.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**:
1. –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (`docker-compose down --remove-orphans`)
2. –û–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–¥ –∏–∑ GitHub (`git pull origin main`)
3. –ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (`docker-compose up -d`)
4. –û—Ç–∫–ª—é—á–∞–µ—Ç lazy publisher (force publish)
5. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ª–æ–≥–∏ –∫–∞–º–µ—Ä—ã

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- ‚úÖ **–û–°–¢–ê–í–ò–¢–¨** - –∫–ª—é—á–µ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è deployment
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–º–∏—Ç–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

---

#### 9. `docker/main/update_and_restart.sh` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ Main Pi
**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `docker/main/update_and_restart.sh`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ RTAB-Map  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
# –ù–∞ Main Pi
cd ~/rob_box_project/docker/main
./update_and_restart.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**:
1. –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (`docker-compose down --remove-orphans`)
2. –û–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–¥ –∏–∑ GitHub (`git pull origin main`)
3. –ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (`docker-compose up -d`)
4. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ª–æ–≥–∏ RTAB-Map

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- ‚úÖ **–û–°–¢–ê–í–ò–¢–¨** - –∫–ª—é—á–µ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è deployment
- –ó–∞–ø—É—Å–∫–∞—Ç—å –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Vision Pi

---

### üìù –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã (–≤ config/)

#### 10. `docker/vision/config/start_oak_d.sh` - –°—Ç–∞—Ä—Ç –∫–∞–º–µ—Ä—ã OAK-D
**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `docker/vision/config/start_oak_d.sh`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ó–∞–ø—É—Å–∫ –Ω–æ–¥—ã OAK-D –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞  
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- ‚úÖ **–û–°–¢–ê–í–ò–¢–¨** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Dockerfile –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∫–∞–º–µ—Ä—ã

#### 11. `docker/vision/config/start_apriltag.sh` - –°—Ç–∞—Ä—Ç AprilTag –¥–µ—Ç–µ–∫—Ü–∏–∏
**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `docker/vision/config/start_apriltag.sh`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ó–∞–ø—É—Å–∫ AprilTag –¥–µ—Ç–µ–∫—Ç–æ—Ä–∞ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞  
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- ‚úÖ **–û–°–¢–ê–í–ò–¢–¨** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Dockerfile –¥–ª—è –∑–∞–ø—É—Å–∫–∞ AprilTag

---

## –ê–Ω–∞–ª–∏–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ö–æ–º–º–∏—Ç—ã (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 7)

#### 1. `abd2629 - fixes`
**–î–∞—Ç–∞**: –ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç  
**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –£–¥–∞–ª–µ–Ω `docker/main/discovery/Dockerfile` (FastDDS discovery —Å–µ—Ä–≤–µ—Ä –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω)
- –û–±–Ω–æ–≤–ª–µ–Ω—ã `zenoh_router_config.json5` –¥–ª—è Vision –∏ Main Pi
- –û–±–Ω–æ–≤–ª–µ–Ω—ã `docker-compose.yaml` –¥–ª—è Vision –∏ Main Pi

**–ê–Ω–∞–ª–∏–∑**: –§–∏–Ω–∞–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ Zenoh. –£–¥–∞–ª–µ–Ω—ã –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã CycloneDDS/FastDDS.

---

#### 2. `4bd59ec - default zenoh configuration`
**–î–∞—Ç–∞**: –ü—Ä–µ–¥—ã–¥—É—â–∏–π –∫–æ–º–º–∏—Ç  
**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Zenoh router –∏ session –¥–ª—è –æ–±–æ–∏—Ö Pi
- –£–¥–∞–ª–µ–Ω `zenoh_local_session_config.json5` –Ω–∞ Vision Pi
- –û–±–Ω–æ–≤–ª–µ–Ω `Dockerfile` –¥–ª—è AprilTag

**–ê–Ω–∞–ª–∏–∑**: –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Zenoh (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏). –£–ø—Ä–æ—â–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

---

#### 3-7. `520457e - c1e3d7a` - Revert –∫–æ–º–º–∏—Ç—ã
**–î–∞—Ç–∞**: –û—Ç–∫–∞—Ç—ã –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –ø–æ–ø—ã—Ç–æ–∫  
**–ò–∑–º–µ–Ω–µ–Ω–∏—è**: –û—Ç–∫–∞—Ç –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `rmw_zenohd` (ROS 2 Zenoh router)

**–ê–Ω–∞–ª–∏–∑**: 
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–æ–¥—Ö–æ–¥–∞–º–∏:
1. –ü—ã—Ç–∞–ª—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `rmw_zenohd` (ROS 2 —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π Zenoh router)
2. –ü—ã—Ç–∞–ª—Å—è –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ `source setup.bash`
3. –ü—ã—Ç–∞–ª—Å—è —Å–æ–∑–¥–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ Dockerfiles –¥–ª—è —Ä–æ—É—Ç–µ—Ä–æ–≤ —Å `rmw_zenoh_cpp`
4. –ò—Å–ø—Ä–∞–≤–ª—è–ª GPG –∫–ª—é—á–∏ ROS 2 —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
5. –î–æ–±–∞–≤–ª—è–ª `LD_LIBRARY_PATH` –¥–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫ Zenoh

**–í –∏—Ç–æ–≥–µ**: –í—Å–µ –æ—Ç–∫–∞—Ç–∏–ª –∏ –ø–µ—Ä–µ—à—ë–ª –Ω–∞ **—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Zenoh router** (`eclipse/zenoh:latest`), –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–ø—Ä—è–º—É—é –±–µ–∑ ROS 2 –æ–±—ë—Ä—Ç–∫–∏.

---

### –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã –∏–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

1. **Zenoh router**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `eclipse/zenoh:latest`, –ù–ï `rmw_zenohd`
2. **FastDDS discovery**: –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—ë–Ω, –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
3. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Zenoh**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, –±–µ–∑ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–π
4. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —É–ø—Ä–æ—â–µ–Ω–∞**: –ú–µ–Ω—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –º–µ–Ω—å—à–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö Dockerfiles

---

## –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Zenoh

### Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### Vision Pi (`docker/vision/docker-compose.yaml`)

```yaml
services:
  zenoh-router:
    image: eclipse/zenoh:latest
    container_name: zenoh-router-vision
    network_mode: host
    environment:
      - RUST_LOG=zenoh=info
    volumes:
      - ./config/zenoh_router_config.json5:/zenoh_config.json5
      - /dev/shm:/dev/shm
    command: -c /zenoh_config.json5
    restart: unless-stopped
    healthcheck:
      test: ["CMD-SHELL", "wget -qO- http://localhost:8000/@/local/router || exit 1"]
      interval: 5s
      timeout: 10s
      retries: 20
      start_period: 30s

  oak-d:
    # ...
    environment:
      - RMW_IMPLEMENTATION=rmw_zenoh_cpp
      - ZENOH_ROUTER_CHECK_ATTEMPTS=10
      - RUST_LOG=zenoh=info
      - ROS_AUTOMATIC_DISCOVERY_RANGE=LOCALHOST
      - ZENOH_CONFIG=/config/zenoh_session_config.json5
    depends_on:
      - zenoh-router
```

#### Main Pi (`docker/main/docker-compose.yaml`)

```yaml
services:
  zenoh-router:
    image: eclipse/zenoh:latest
    container_name: zenoh-router
    network_mode: host
    environment:
      - RUST_LOG=zenoh=info
    volumes:
      - ./config/zenoh_router_config.json5:/zenoh_config.json5
    command: -c /zenoh_config.json5
    restart: unless-stopped
    healthcheck:
      test: ["CMD-SHELL", "wget -qO- http://localhost:8000/@/local/router || exit 1"]
      interval: 5s
      timeout: 10s
      retries: 20
      start_period: 30s

  rtabmap:
    # ...
    environment:
      - RMW_IMPLEMENTATION=rmw_zenoh_cpp
      - ZENOH_ROUTER_CHECK_ATTEMPTS=10
      - RUST_LOG=zenoh=info
      - ROS_AUTOMATIC_DISCOVERY_RANGE=LOCALHOST
      - ZENOH_CONFIG=/config/zenoh_session_config.json5
      - LD_LIBRARY_PATH=/opt/ros/humble/opt/zenoh_cpp_vendor/lib:/opt/ros/humble/lib/aarch64-linux-gnu:/opt/ros/humble/lib
    depends_on:
      - zenoh-router
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Zenoh

#### Router –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–¥–ª—è –æ–±–æ–∏—Ö Pi)
**–§–∞–π–ª—ã**: 
- `docker/vision/config/zenoh_router_config.json5`
- `docker/main/config/zenoh_router_config.json5`

**–ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**:
```json5
{
  mode: "router",
  connect: {
    endpoints: []  // –ó–∞–≤–∏—Å–∏—Ç –æ—Ç Pi
  },
  // ... —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ Zenoh –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
}
```

**Vision Pi router**: –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Main Pi router (–ø—É—Å—Ç–æ –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–≤—Ç–æ–æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ)  
**Main Pi router**: –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –≤–Ω–µ—à–Ω–µ–º—É —Å–µ—Ä–≤–µ—Ä—É `zenoh.robbox.online:7447`

#### Session –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–¥–ª—è ROS 2 –Ω–æ–¥)
**–§–∞–π–ª—ã**:
- `docker/vision/config/zenoh_session_config.json5`
- `docker/main/config/zenoh_session_config.json5`

**–ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**:
```json5
{
  mode: "peer",
  connect: {
    endpoints: ["tcp/localhost:7447"]  // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É router
  },
  // ... —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
}
```

---

## –°–∫—Ä–∏–ø—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### Workflow –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

#### 1. –õ–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (–Ω–∞ Windows)
```bash
cd d:\PROJECTS\rob_box_project
# –í–Ω–æ—Å–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥/–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
git add .
git commit -m "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
git push
```

#### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Vision Pi
```bash
# –£–¥–∞–ª—ë–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å Windows
wsl sshpass -p 'open' ssh -o StrictHostKeyChecking=no ros2@10.1.1.21 \
  'cd ~/rob_box_project/docker/vision && ./update_and_restart.sh'

# –ò–ª–∏ —á–µ—Ä–µ–∑ SSH
ssh ros2@10.1.1.21
cd ~/rob_box_project/docker/vision
./update_and_restart.sh
```

#### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Main Pi
```bash
# –£–¥–∞–ª—ë–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å Windows
wsl sshpass -p 'open' ssh -o StrictHostKeyChecking=no ros2@10.1.1.20 \
  'cd ~/rob_box_project/docker/main && ./update_and_restart.sh'

# –ò–ª–∏ —á–µ—Ä–µ–∑ SSH
ssh ros2@10.1.1.20
cd ~/rob_box_project/docker/main
./update_and_restart.sh
```

#### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
# Vision Pi
wsl sshpass -p 'open' ssh -o StrictHostKeyChecking=no ros2@10.1.1.21 'docker ps'

# Main Pi
wsl sshpass -p 'open' ssh -o StrictHostKeyChecking=no ros2@10.1.1.20 'docker ps'
```

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å–∫—Ä–∏–ø—Ç–∞–º

### ‚úÖ –û–°–¢–ê–í–ò–¢–¨ (–∫—Ä–∏—Ç–∏—á–Ω—ã–µ)
1. **docker/monitor_system.sh** - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
2. **docker/vision/realtime_monitor.sh** - –¥–µ—Ç–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–º–µ—Ä—ã
3. **docker/diagnose_data_flow.sh** - –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –º–µ–∂–ø–ª–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
4. **docker/vision/diagnose.sh** - –±—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–∞–º–µ—Ä—ã
5. **docker/vision/update_and_restart.sh** - deployment Vision Pi
6. **docker/main/update_and_restart.sh** - deployment Main Pi
7. **docker/vision/config/start_oak_d.sh** - –∑–∞–ø—É—Å–∫ –∫–∞–º–µ—Ä—ã (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Dockerfile)
8. **docker/vision/config/start_apriltag.sh** - –∑–∞–ø—É—Å–∫ AprilTag (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Dockerfile)

### ‚ö†Ô∏è –£–°–¢–ê–†–ï–õ–ò / –¢–†–ï–ë–£–Æ–¢ –ü–ï–†–ï–°–ú–û–¢–†–ê
1. **docker/vision/monitor_camera_startup.sh** - –¥—É–±–ª–∏—Ä—É–µ—Ç realtime_monitor.sh
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: —É–¥–∞–ª–∏—Ç—å –∏–ª–∏ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å —Å realtime_monitor.sh
2. **docker/vision/force_publish.sh** - –ª–æ–≥–∏–∫–∞ –≤ update_and_restart.sh
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: —É–¥–∞–ª–∏—Ç—å, –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫
3. **docker/tune.sh** - –¥–ª—è CycloneDDS (–±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: —É–¥–∞–ª–∏—Ç—å, –æ—Å—Ç–∞–≤–∏—Ç—å –≤ TROUBLESHOOTING.md –∫–∞–∫ –∏—Å—Ç–æ—Ä–∏—é

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
–¢–µ–∫—É—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–∞ –∏ —Ö–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∞:
- **SYSTEM_OVERVIEW.md** - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- **TROUBLESHOOTING.md** - —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
- **BUILD_OPTIMIZATION.md** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
- **QUICK_START.md** - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤

### –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Å–∏—Å—Ç–µ–º–æ–π

1. **–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–∏—Ç—ã** –ø–µ—Ä–µ–¥ –≤–Ω–µ—Å–µ–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π
   ```bash
   git log -5 --oneline --name-status
   ```

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ IP –∞–¥—Ä–µ—Å–∞**:
   - SSH –¥–æ—Å—Ç—É–ø: WiFi IP (10.1.1.21, 10.1.1.20)
   - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Zenoh: Ethernet IP (10.1.1.11, 10.1.1.10)

3. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º**:
   - –°–Ω–∞—á–∞–ª–∞ `diagnose.sh` –Ω–∞ Vision Pi
   - –ó–∞—Ç–µ–º `diagnose_data_flow.sh` –¥–ª—è –º–µ–∂–ø–ª–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
   - `monitor_system.sh` –¥–ª—è –æ–±—â–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

4. **Deployment**:
   - –í—Å–µ–≥–¥–∞ `git push` –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º Pi
   - –û–±–Ω–æ–≤–ª—è–π—Ç–µ Vision Pi ‚Üí Main Pi –≤ —Ç–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ
   - –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

5. **Zenoh router**:
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `eclipse/zenoh:latest`
   - –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `rmw_zenohd` (–æ—Ç–∫–∞—á–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)
   - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ `zenoh_router_config.json5` –∏ `zenoh_session_config.json5`

---

## –ò—Å—Ç–æ—Ä–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ Zenoh

### –ë—ã–ª–æ (CycloneDDS)
- Multicast discovery –º–µ–∂–¥—É Pi
- –ü—Ä–æ–±–ª–µ–º—ã —Å –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ–º –Ω–æ–¥ (0 KB/s —Å–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫)
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å FastDDS discovery —Å–µ—Ä–≤–µ—Ä–∞

### –°—Ç–∞–ª–æ (Zenoh)
- Router-to-router –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- Vision Pi router ‚Üî Main Pi router ‚Üî zenoh.robbox.online
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `eclipse/zenoh:latest` router
- Peer mode –¥–ª—è ROS 2 –Ω–æ–¥ (–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ localhost:7447)

### –ü–æ–ø—ã—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è rmw_zenohd (–æ—Ç–∫–∞—á–µ–Ω—ã)
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–ª—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –¥–ª—è ROS 2 `rmw_zenohd` router:
- –°–æ–∑–¥–∞–≤–∞–ª –∫–∞—Å—Ç–æ–º–Ω—ã–µ Dockerfiles
- –ò—Å–ø—Ä–∞–≤–ª—è–ª GPG –∫–ª—é—á–∏ ROS 2
- –î–æ–±–∞–≤–ª—è–ª LD_LIBRARY_PATH –¥–ª—è Zenoh –±–∏–±–ª–∏–æ—Ç–µ–∫

**–í –∏—Ç–æ–≥–µ**: –û—Ç–∫–∞—Ç–∏–ª –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –ø–µ—Ä–µ—à—ë–ª –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Zenoh router, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ.

---

**–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω**: 2025-10-09  
**–í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã**: Zenoh architecture (–ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å CycloneDDS)  
**–ü–æ—Å–ª–µ–¥–Ω–∏–π –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–º–º–∏—Ç**: abd2629
