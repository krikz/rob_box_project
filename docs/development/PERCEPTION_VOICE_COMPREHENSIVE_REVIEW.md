# –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –†–µ–≤—å—é Perception Nodes –∏ Voice Assistant
## –ê–Ω–∞–ª–∏–∑ –∏ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –£–ª—É—á—à–µ–Ω–∏—é –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –î–∏–∞–ª–æ–≥–∞ –∏ –°–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

**–î–∞—Ç–∞:** 21 –æ–∫—Ç—è–±—Ä—è 2025  
**–ê–≤—Ç–æ—Ä:** AI Agent Analysis  
**–í–µ—Ä—Å–∏—è:** 1.0

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã](#–æ–±–∑–æ—Ä-—Ç–µ–∫—É—â–µ–π-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)
2. [–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏–∑ –∏–Ω–¥—É—Å—Ç—Ä–∏–∏](#–ª—É—á—à–∏–µ-–ø—Ä–∞–∫—Ç–∏–∫–∏-–∏–∑-–∏–Ω–¥—É—Å—Ç—Ä–∏–∏)
3. [–î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤](#–¥–µ—Ç–∞–ª—å–Ω—ã–π-–∞–Ω–∞–ª–∏–∑-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
4. [–í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã](#–≤—ã—è–≤–ª–µ–Ω–Ω—ã–µ-–ø—Ä–æ–±–ª–µ–º—ã)
5. [–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é](#–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è-–ø–æ-—É–ª—É—á—à–µ–Ω–∏—é)
6. [–ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#–ø–ª–∞–Ω-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)

---

## üèóÔ∏è –û–±–∑–æ—Ä —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    PERCEPTION LAYER                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                 ‚îÇ
‚îÇ  ‚îÇ context_aggregator  ‚îÇ  ‚îÇ health_monitor   ‚îÇ                 ‚îÇ
‚îÇ  ‚îÇ  (MPC lite)         ‚îÇ  ‚îÇ                  ‚îÇ                 ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ                           ‚îÇ
              ‚îÇ /perception/context_update ‚îÇ /rosout
              ‚îÇ /perception/user_speech    ‚îÇ
              ‚Üì                           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   DIALOGUE LAYER                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                     ‚îÇ
‚îÇ  ‚îÇ reflection_node ‚îÇ  ‚îÇ dialogue_node    ‚îÇ                     ‚îÇ
‚îÇ  ‚îÇ  (internal AI)  ‚îÇ  ‚îÇ  (user facing)   ‚îÇ                     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ                           ‚îÇ
              ‚îÇ /voice/tts/request        ‚îÇ
              ‚Üì                           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     VOICE LAYER                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ  ‚îÇ audio_node  ‚îÇ  ‚îÇ stt_node‚îÇ  ‚îÇ tts_node‚îÇ  ‚îÇ led_node ‚îÇ      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –¢–µ–∫—É—â–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

**‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- Event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è reflection_node
- –ê–≥—Ä–µ–≥–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- –°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ —Ç–∏–ø–∞–º (speech, vision, system, thoughts, responses)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ª–æ–≥–æ–≤ (/rosout) –¥–ª—è –æ—à–∏–±–æ–∫ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–æ–º —á–µ—Ä–µ–∑ state machine (IDLE/LISTENING/DIALOGUE/SILENCED)
- –î–µ—Ç–µ–∫—Ü–∏—è –ª–∏—á–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Å—Ä–æ—á–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã (health_status, battery)

**‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ ROS2 –Ω–æ–¥
- –î–µ—Ç–µ–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- –û—Å–æ–∑–Ω–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ —Å—É—Ç–æ–∫
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è (–∫–∞–º–µ—Ä—ã, LIDAR, –º–æ—Ç–æ—Ä—ã)
- –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –æ —Å–∏—Å—Ç–µ–º–µ
- –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

---

## üåê –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏–∑ –∏–Ω–¥—É—Å—Ç—Ä–∏–∏

### 1. Context Aggregation (–ê–≥—Ä–µ–≥–∞—Ü–∏—è –ö–æ–Ω—Ç–µ–∫—Å—Ç–∞)

**–ò–∑ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π:**
- **Hierarchical/Modular Approach**: –†–∞–∑–±–∏–µ–Ω–∏–µ –∑–∞–¥–∞—á –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è –Ω–∞ –º–µ–ª–∫–∏–µ –º–æ–¥—É–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
- **Sensor Fusion**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–µ–Ω—Å–æ—Ä–æ–≤ (–∫–∞–º–µ—Ä—ã, LIDAR, –º–∏–∫—Ä–æ—Ñ–æ–Ω—ã, IMU)
- **Real-time Processing**: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, –∞ –Ω–µ –ø–æ —Ç–∞–π–º–µ—Ä—É

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞:**
- ‚úÖ –ú–æ–¥—É–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (–æ—Ç–¥–µ–ª—å–Ω—ã–µ –Ω–æ–¥—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤)
- ‚úÖ Event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–ø—É–±–ª–∏–∫–∞—Ü–∏—è –Ω–∞ –∫–∞–∂–¥–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
- ‚ö†Ô∏è Sensor fusion —á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (–Ω–µ –≤—Å–µ —Å–µ–Ω—Å–æ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã)

### 2. System Health Monitoring (ROS2)

**Best Practices:**
- **Node Lifecycle Management**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ managed nodes —Å lifecycle states (unconfigured, inactive, active, finalized)
- **System Monitoring Tools**: –£—Ç–∏–ª–∏—Ç—ã —Ç–∏–ø–∞ `ros2sysmon` –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ CPU, –ø–∞–º—è—Ç–∏, —Å–µ—Ç–∏ –∏ –Ω–æ–¥
- **Fault Detection**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Å–±–æ–µ–≤ –Ω–æ–¥ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
- **Diagnostics Publishing**: –ü—É–±–ª–∏–∫–∞—Ü–∏—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ runtime

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞:**
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤ —á–µ—Ä–µ–∑ /rosout
- ‚ùå –ù–ï–¢ lifecycle management –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –Ω–æ–¥
- ‚ùå –ù–ï–¢ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Å–±–æ–µ–≤ –Ω–æ–¥
- ‚ùå –ù–ï–¢ dedicated diagnostics publishing

### 3. Context Awareness (–û—Å–æ–∑–Ω–∞–Ω–∏–µ –ö–æ–Ω—Ç–µ–∫—Å—Ç–∞)

**–ö–ª—é—á–µ–≤—ã–µ –∞—Å–ø–µ–∫—Ç—ã:**
- **Internet Connectivity Detection**: –†–µ–≥—É–ª—è—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ (ping, fallback mode)
- **Time Awareness**: RTC –º–æ–¥—É–ª—å + NTP —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- **State Monitoring**: –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –¥–∞—Ç—á–∏–∫–∏ (–±–∞—Ç–∞—Ä–µ—è, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞) + –≤–Ω–µ—à–Ω–∏–µ (–∫–∞–º–µ—Ä—ã, motion)
- **Semantic Platform**: –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞:**
- ‚ùå –ù–ï–¢ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- ‚ùå –ù–ï–¢ –æ—Å–æ–∑–Ω–∞–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏/—Å—É—Ç–æ–∫
- ‚ö†Ô∏è State monitoring —á–∞—Å—Ç–∏—á–Ω–æ (—Ç–æ–ª—å–∫–æ battery, temperature —á–µ—Ä–µ–∑ ESP32)
- ‚ùå –ù–ï–¢ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

### 4. Internal Dialogue Systems

**Best Practices:**
- **Advanced NLP**: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏–Ω—Ç–µ–Ω—Ç–æ–≤ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏
- **AI Personalization**: –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π
- **Real-time Feedback**: –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π
- **Privacy & Ethics**: –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞:**
- ‚úÖ NLP —á–µ—Ä–µ–∑ DeepSeek API
- ‚úÖ –°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- ‚ö†Ô∏è –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ (–Ω–µ—Ç –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–∞–º—è—Ç–∏)
- ‚úÖ Privacy: API –∫–ª—é—á–∏ —á–µ—Ä–µ–∑ env vars

---

## üîç –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### 1. context_aggregator_node.py

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
class ContextAggregatorNode(Node):
    # –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞:
    # - /perception/vision_context
    # - /rtabmap/localization_pose
    # - /odom
    # - /rosout (ERROR/WARN)
    # - /voice/stt/result
    # - /voice/dialogue/response
    # - /reflection/internal_thought
    
    # –ü—É–±–ª–∏–∫—É–µ—Ç:
    # - /perception/context_update (PerceptionEvent)
    # - /perception/user_speech (String)
```

**‚úÖ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
1. **Event-driven –ø—É–±–ª–∏–∫–∞—Ü–∏—è** - 2 Hz, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è —á–∞—Å—Ç–æ—Ç–∞
2. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –ø–æ —Ç–∏–ø–∞–º** - speech, robot_response, robot_thought, vision, system
3. **–°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ DeepSeek** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∂–∞—Ç–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ threshold
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤** - —Å–±–æ—Ä ERROR –∏ WARN –∏–∑ /rosout
5. **Sliding window memory** - –ø–∞–º—è—Ç—å —Å–æ–±—ã—Ç–∏–π –≤ —Ç–µ—á–µ–Ω–∏–µ 60 —Å–µ–∫—É–Ω–¥

**‚ùå –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**

#### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ù–ï–¢ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ ROS2 –Ω–æ–¥
**–û–ø–∏—Å–∞–Ω–∏–µ:** 
- –ê–≥—Ä–µ–≥–∞—Ç–æ—Ä –Ω–µ –∑–Ω–∞–µ—Ç, –∫–∞–∫–∏–µ –Ω–æ–¥—ã –∞–∫—Ç–∏–≤–Ω—ã, –∞ –∫–∞–∫–∏–µ —É–ø–∞–ª–∏
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Ç–æ–ø–∏–∫–∏ (–º–æ–≥—É—Ç –±—ã—Ç—å publishers, –Ω–æ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö)
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —á—Ç–æ –∫–∞–º–µ—Ä–∞ –∏–ª–∏ LIDAR –ø–µ—Ä–µ—Å—Ç–∞–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å

**–í–ª–∏—è–Ω–∏–µ:** 
- Reflection node –Ω–µ –∑–Ω–∞–µ—Ç –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –Ω–æ–¥–∞–º–∏
- –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —Å–±–æ–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è

#### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–ï–¢ –æ—Å–æ–∑–Ω–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
**–û–ø–∏—Å–∞–Ω–∏–µ:**
- –ê–≥—Ä–µ–≥–∞—Ç–æ—Ä –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç
- –ù–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫ (–¥–µ–Ω—å/–Ω–æ—á—å/—É—Ç—Ä–æ/–≤–µ—á–µ—Ä)
- –ù–µ—Ç —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞ –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫ —Å human-readable —Ñ–æ—Ä–º–∞—Ç–æ–º

**–í–ª–∏—è–Ω–∏–µ:**
- Reflection node –Ω–µ –º–æ–∂–µ—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å time-aware –æ—Ç–≤–µ—Ç—ã
- –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Ä–µ–º—è –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç ("—Å–µ–π—á–∞—Å –Ω–æ—á—å, –ø–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω–∞ —Ç–∏—Ö–∞—è –µ–∑–¥–∞")
- –ò—Å—Ç–æ—Ä–∏—è —Å–æ–±—ã—Ç–∏–π –∏–º–µ–µ—Ç —Ç–æ–ª—å–∫–æ Unix timestamps

#### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ù–ï–¢ –¥–µ—Ç–µ–∫—Ü–∏–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
**–û–ø–∏—Å–∞–Ω–∏–µ:**
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- DeepSeek API –º–æ–∂–µ—Ç —Ñ–µ–π–ª–∏—Ç—å—Å—è –±–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- –ù–µ—Ç fallback —Ä–µ–∂–∏–º–∞ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

**–í–ª–∏—è–Ω–∏–µ:**
- –ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- Dialogue node –∏ reflection node —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –Ω–µ—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω—ã–º–∏
- –ù–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ –ø—Ä–æ–±–ª–µ–º–µ

#### –ü—Ä–æ–±–ª–µ–º–∞ 4: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
**–û–ø–∏—Å–∞–Ω–∏–µ:**
- –¢–æ–ª—å–∫–æ battery –∏ temperature —á–µ—Ä–µ–∑ ESP32
- –ù–ï–¢ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–∞–º–µ—Ä—ã (OAK-D), LIDAR (LSLIDAR N10), –º–æ—Ç–æ—Ä–æ–≤ (VESC)
- –ù–ï–¢ –ø—Ä–æ–≤–µ—Ä–∫–∏ FPS –∫–∞–º–µ—Ä—ã, –∫–∞—á–µ—Å—Ç–≤–∞ SLAM, —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

**–í–ª–∏—è–Ω–∏–µ:**
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—é —Ä–∞–±–æ—Ç—ã –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
- –ù–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö –¥–æ –ø–æ–ª–Ω–æ–≥–æ —Å–±–æ—è

#### –ü—Ä–æ–±–ª–µ–º–∞ 5: –°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –±–µ–∑ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤
**–û–ø–∏—Å–∞–Ω–∏–µ:**
- –í—Å–µ —Å–æ–±—ã—Ç–∏—è —Å—É–º–º–∞—Ä–∏–∑–∏—Ä—É—é—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ
- –ù–µ—Ç –ø–æ–Ω—è—Ç–∏—è "–≤–∞–∂–Ω—ã—Ö" vs "–æ–±—ã—á–Ω—ã—Ö" —Å–æ–±—ã—Ç–∏–π
- Threshold —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (50 —Å–æ–±—ã—Ç–∏–π) –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤

**–í–ª–∏—è–Ω–∏–µ:**
- –í–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (–æ—à–∏–±–∫–∏, battery low) –º–æ–≥—É—Ç –ø–æ—Ç–µ—Ä—è—Ç—å—Å—è
- –ò–∑–ª–∏—à–Ω—è—è —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π (–æ–±—ã—á–Ω–∞—è –µ–∑–¥–∞)

### 2. reflection_node.py

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
class ReflectionNode(Node):
    # –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞:
    # - /perception/context_update (PerceptionEvent)
    # - /perception/user_speech (String)
    # - /voice/dialogue/response (String)
    
    # –ü—É–±–ª–∏–∫—É–µ—Ç:
    # - /reflection/internal_thought (String)
    # - /voice/tts/request (String)
    # - /voice/sound/trigger (String)
```

**‚úÖ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
1. **Event-driven —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è** - —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ —Å–æ–±—ã—Ç–∏—è, –∞ –Ω–µ —Ç–∞–π–º–µ—Ä
2. **Urgent response hook** - –¥–µ—Ç–µ–∫—Ü–∏—è –ª–∏—á–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
3. **Silence mode** - –∫–æ–º–∞–Ω–¥–∞ "–ø–æ–º–æ–ª—á–∏" –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è
4. **Speech debouncing** - –Ω–µ –≥–æ–≤–æ—Ä–∏—Ç —á–∞—â–µ 30 —Å–µ–∫—É–Ω–¥
5. **Emotion-based sounds** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–≤—É–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç–º–æ—Ü–∏–π

**‚ùå –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**

#### –ü—Ä–æ–±–ª–µ–º–∞ 6: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
**–û–ø–∏—Å–∞–Ω–∏–µ:**
- Reflection node —Ç–æ–ª—å–∫–æ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ —Å–æ–±—ã—Ç–∏—è, –Ω–æ –Ω–µ –ø—Ä–æ–∞–∫—Ç–∏–≤–µ–Ω
- –ù–µ—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (battery, temperature)
- –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã

**–í–ª–∏—è–Ω–∏–µ:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –Ω–∏–∑–∫–æ–º –∑–∞—Ä—è–¥–µ –¥–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è
- –ù–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö

#### –ü—Ä–æ–±–ª–µ–º–∞ 7: –ù–µ—Ç –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–∞–º—è—Ç–∏
**–û–ø–∏—Å–∞–Ω–∏–µ:**
- –ü–∞–º—è—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ 10 –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ –º—ã—Å–ª—è–º–∏ (recent_thoughts)
- –ù–µ—Ç –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π –æ —Å–∏—Å—Ç–µ–º–µ (–∫–æ–≥–¥–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑ –±—ã–ª mapping, –≥–¥–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –∑–æ–Ω—ã)
- –ù–µ—Ç –æ–±—É—á–µ–Ω–∏—è –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

**–í–ª–∏—è–Ω–∏–µ:**
- –†–æ–±–æ—Ç –Ω–µ "–ø–æ–º–Ω–∏—Ç" –ø—Ä–æ—à–ª—ã–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
- –ù–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏
- –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –æ—à–∏–±–∫–∏ –Ω–µ –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è

#### –ü—Ä–æ–±–ª–µ–º–∞ 8: –ü—Ä–æ—Å—Ç–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è –ª–∏—á–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
**–û–ø–∏—Å–∞–Ω–∏–µ:**
- Regex patterns –¥–ª—è –¥–µ—Ç–µ–∫—Ü–∏–∏ –ª–∏—á–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã
- –ù–µ—Ç semantic understanding (NLU)
- –ú–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏

**–í–ª–∏—è–Ω–∏–µ:**
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ª–∏—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è dialogue_node (–º–µ–¥–ª–µ–Ω–Ω–µ–µ)

#### –ü—Ä–æ–±–ª–µ–º–∞ 9: –ù–µ—Ç –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º
**–û–ø–∏—Å–∞–Ω–∏–µ:**
- Reflection node –Ω–µ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç—Ä–µ–Ω–¥—ã (—Ä–∞—Å—Ç—É—â–∏–µ –æ—à–∏–±–∫–∏, –ø–∞–¥–∞—é—â–∏–π –∑–∞—Ä—è–¥)
- –ù–µ—Ç –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Å–±–æ–µ–≤
- –ù–µ—Ç –∞–Ω–æ–º–∞–ª–∏-–¥–µ—Ç–µ–∫—Ü–∏–∏

**–í–ª–∏—è–Ω–∏–µ:**
- –†–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –Ω–∞ —É–∂–µ —Å–ª—É—á–∏–≤—à–∏–µ—Å—è –ø—Ä–æ–±–ª–µ–º—ã
- –ù–µ—Ç –ø—Ä–µ–≤–µ–Ω—Ç–∏–≤–Ω–æ–≥–æ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è

### 3. dialogue_node.py

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
class DialogueNode(Node):
    # State Machine: IDLE -> LISTENING -> DIALOGUE -> SILENCED
    # Wake words, silence commands, mapping commands
```

**‚úÖ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
1. **State Machine** - —á—ë—Ç–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–æ–º
2. **Wake word detection** - –∞–∫—Ç–∏–≤–∞—Ü–∏—è –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
3. **Streaming LLM responses** - DeepSeek streaming –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
4. **Mapping commands** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ RTABMap —á–µ—Ä–µ–∑ –≥–æ–ª–æ—Å
5. **Confirmation system** - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∫–æ–º–∞–Ω–¥

**‚ùå –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**

#### –ü—Ä–æ–±–ª–µ–º–∞ 10: –ù–ï–¢ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –æ—Ç reflection_node
**–û–ø–∏—Å–∞–Ω–∏–µ:**
- dialogue_node –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è –æ—Ç reflection_node
- –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ full_context() –∏–∑ context_aggregator
- LLM –Ω–µ –∑–Ω–∞–µ—Ç –æ —Ç–µ–∫—É—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Ä–æ–±–æ—Ç–∞

**–í–ª–∏—è–Ω–∏–µ:**
- –û—Ç–≤–µ—Ç—ã dialogue_node –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–≤—Å—ë —Ö–æ—Ä–æ—à–æ" –ø—Ä–∏ –Ω–∏–∑–∫–æ–º –∑–∞—Ä—è–¥–µ)
- –ù–µ—Ç unified knowledge base

#### –ü—Ä–æ–±–ª–µ–º–∞ 11: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞
**–û–ø–∏—Å–∞–Ω–∏–µ:**
- –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ conversation_history
- –ò—Å—Ç–æ—Ä–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏
- –ù–µ—Ç —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª–∏–Ω–Ω—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤

**–í–ª–∏—è–Ω–∏–µ:**
- –†–æ–±–æ—Ç "–∑–∞–±—ã–≤–∞–µ—Ç" –Ω–∞—á–∞–ª–æ –¥–ª–∏–Ω–Ω–æ–≥–æ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
- –ù–µ—Ç –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

### 4. health_monitor.py

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
class HealthMonitor(Node):
    # –ü—Ä–æ—Å—Ç–æ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ /rosout
    # –û—Ç—á—ë—Ç –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
```

**‚úÖ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
1. **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - –ª–µ–≥–∫–æ –ø–æ–Ω—è—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å
2. **Sound alerts** - –∑–≤—É–∫–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞

**‚ùå –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**

#### –ü—Ä–æ–±–ª–µ–º–∞ 12: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
**–û–ø–∏—Å–∞–Ω–∏–µ:**
- health_monitor –¥—É–±–ª–∏—Ä—É–µ—Ç —á–∞—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ context_aggregator
- –û–±–∞ –º–æ–Ω–∏—Ç–æ—Ä—è—Ç /rosout
- –ù–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –º–µ–∂–¥—É –Ω–∏–º–∏

**–í–ª–∏—è–Ω–∏–µ:**
- –ò–∑–±—ã—Ç–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–≥–æ–≤
- –ó–∞–ø—É—Ç–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

#### –ü—Ä–æ–±–ª–µ–º–∞ 13: –ù–ï–¢ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–æ–¥
**–û–ø–∏—Å–∞–Ω–∏–µ:**
- health_monitor –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å ROS2 –Ω–æ–¥
- –ù–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `ros2 node list` –∏–ª–∏ similar API

**–í–ª–∏—è–Ω–∏–µ:**
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —É–ø–∞–≤—à–∏–µ –Ω–æ–¥—ã

---

## üö® –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (–°–≤–æ–¥–∫–∞)

### –ö—Ä–∏—Ç–∏—á–Ω—ã–µ (High Priority)

1. **–ù–ï–¢ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ ROS2 –Ω–æ–¥** ‚ö†Ô∏è
   - –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —É–ø–∞–≤—à–∏–µ –Ω–æ–¥—ã
   - –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —Å–±–æ–∏

2. **–ù–ï–¢ –¥–µ—Ç–µ–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞** ‚ö†Ô∏è
   - DeepSeek API —Ñ–µ–π–ª–∏—Ç—Å—è –±–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
   - –ù–µ—Ç fallback —Ä–µ–∂–∏–º–∞

3. **–ù–ï–¢ –æ—Å–æ–∑–Ω–∞–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏** ‚ö†Ô∏è
   - –ù–µ—Ç time-aware –æ—Ç–≤–µ—Ç–æ–≤
   - –ù–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫

4. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è** ‚ö†Ô∏è
   - –¢–æ–ª—å–∫–æ battery –∏ temperature
   - –ù–ï–¢ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–∞–º–µ—Ä—ã, LIDAR, –º–æ—Ç–æ—Ä–æ–≤

### –°—Ä–µ–¥–Ω–∏–µ (Medium Priority)

5. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ reflection_node**
   - –ù–µ—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

6. **–ù–ï–¢ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–∞–º—è—Ç–∏**
   - –†–æ–±–æ—Ç "–∑–∞–±—ã–≤–∞–µ—Ç" –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

7. **dialogue_node –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ—Ç reflection**
   - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

8. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ health_monitor**
   - –ò–∑–±—ã—Ç–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–≥–æ–≤

### –ù–∏–∑–∫–∏–µ (Low Priority)

9. **–ü—Ä–æ—Å—Ç–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è –ª–∏—á–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤**
   - Regex patterns –≤–º–µ—Å—Ç–æ semantic understanding

10. **–ù–µ—Ç –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º**
    - –ù–µ—Ç ML –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Å–±–æ–µ–≤

11. **–°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –±–µ–∑ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤**
    - –í–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –º–æ–≥—É—Ç –ø–æ—Ç–µ—Ä—è—Ç—å—Å—è

---

## üí° –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### –£–ª—É—á—à–µ–Ω–∏–µ 1: Node Availability Monitor

**–¶–µ–ª—å:** –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ ROS2 –Ω–æ–¥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
class NodeAvailabilityMonitor:
    """–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ ROS2 –Ω–æ–¥"""
    
    def __init__(self, node: Node):
        self.node = node
        self.expected_nodes = [
            '/audio_node',
            '/stt_node',
            '/tts_node',
            '/dialogue_node',
            '/reflection_node',
            '/oak_d_node',
            '/lslidar_node',
            '/rtabmap',
            '/nav2',
            '/vesc_driver'
        ]
        self.node_status = {}  # node_name -> {'last_seen', 'status'}
        
        # –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
        self.check_timer = self.node.create_timer(5.0, self.check_nodes)
    
    def check_nodes(self):
        """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –æ–∂–∏–¥–∞–µ–º—ã—Ö –Ω–æ–¥"""
        import subprocess
        result = subprocess.run(
            ['ros2', 'node', 'list'],
            capture_output=True,
            text=True,
            timeout=2.0
        )
        
        active_nodes = result.stdout.strip().split('\n')
        
        for expected_node in self.expected_nodes:
            if expected_node in active_nodes:
                self.node_status[expected_node] = {
                    'status': 'active',
                    'last_seen': time.time()
                }
            else:
                # –ù–æ–¥–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
                if expected_node not in self.node_status:
                    self.node_status[expected_node] = {
                        'status': 'missing',
                        'last_seen': None
                    }
                else:
                    # –ù–æ–¥–∞ –ø—Ä–æ–ø–∞–ª–∞
                    self.node_status[expected_node]['status'] = 'failed'
    
    def get_failed_nodes(self) -> List[str]:
        """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —É–ø–∞–≤—à–∏—Ö –Ω–æ–¥"""
        return [
            node for node, status in self.node_status.items()
            if status['status'] == 'failed'
        ]
    
    def get_missing_nodes(self) -> List[str]:
        """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –Ω–æ–¥"""
        return [
            node for node, status in self.node_status.items()
            if status['status'] == 'missing'
        ]
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –≤ context_aggregator_node

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —É–ø–∞–≤—à–∏—Ö –Ω–æ–¥
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ PerceptionEvent.health_issues
- Reflection node –ø–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö

### –£–ª—É—á—à–µ–Ω–∏–µ 2: Internet Connectivity Monitor

**–¶–µ–ª—å:** –î–µ—Ç–µ–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –∏ fallback —Ä–µ–∂–∏–º

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
class InternetConnectivityMonitor:
    """–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞"""
    
    def __init__(self, node: Node):
        self.node = node
        self.is_online = None
        self.last_check_time = None
        self.check_interval = 30.0  # —Å–µ–∫—É–Ω–¥
        
        # –°–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
        self.test_hosts = [
            '8.8.8.8',  # Google DNS
            '1.1.1.1',  # Cloudflare DNS
        ]
        
        # –¢–∞–π–º–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏
        self.check_timer = self.node.create_timer(
            self.check_interval,
            self.check_connectivity
        )
    
    def check_connectivity(self) -> bool:
        """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞"""
        import subprocess
        
        for host in self.test_hosts:
            try:
                result = subprocess.run(
                    ['ping', '-c', '1', '-W', '2', host],
                    capture_output=True,
                    timeout=3.0
                )
                
                if result.returncode == 0:
                    # –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω
                    if self.is_online is False:
                        self.node.get_logger().info('‚úÖ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω')
                    
                    self.is_online = True
                    self.last_check_time = time.time()
                    return True
            
            except (subprocess.TimeoutExpired, Exception):
                continue
        
        # –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
        if self.is_online is True or self.is_online is None:
            self.node.get_logger().warn('‚ö†Ô∏è –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω')
        
        self.is_online = False
        self.last_check_time = time.time()
        return False
    
    def get_status(self) -> Dict:
        """–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"""
        return {
            'is_online': self.is_online,
            'last_check': self.last_check_time,
            'check_interval': self.check_interval
        }
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- –î–æ–±–∞–≤–∏—Ç—å –≤ context_aggregator_node
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `internet_available` –≤ PerceptionEvent
- dialogue_node –∏ reflection_node –∏—Å–ø–æ–ª—å–∑—É—é—Ç fallback –ø—Ä–∏ offline

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–æ—Ç–µ—Ä–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- Fallback —Ä–µ–∂–∏–º –¥–ª—è dialogue (–ª–æ–∫–∞–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–Ω–∞–µ—Ç –æ –ø—Ä–æ–±–ª–µ–º–µ

### –£–ª—É—á—à–µ–Ω–∏–µ 3: Time Awareness

**–¶–µ–ª—å:** –û—Å–æ–∑–Ω–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
from datetime import datetime
import pytz

class TimeAwarenessProvider:
    """–ü—Ä–æ–≤–∞–π–¥–µ—Ä –æ—Å–æ–∑–Ω–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏"""
    
    def __init__(self, timezone='Europe/Moscow'):
        self.timezone = pytz.timezone(timezone)
    
    def get_current_time_context(self) -> Dict:
        """–ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏"""
        now = datetime.now(self.timezone)
        
        hour = now.hour
        
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–µ—Ä–∏–æ–¥ —Å—É—Ç–æ–∫
        if 5 <= hour < 12:
            period = 'morning'
            period_ru = '—É—Ç—Ä–æ'
        elif 12 <= hour < 17:
            period = 'day'
            period_ru = '–¥–µ–Ω—å'
        elif 17 <= hour < 22:
            period = 'evening'
            period_ru = '–≤–µ—á–µ—Ä'
        else:
            period = 'night'
            period_ru = '–Ω–æ—á—å'
        
        return {
            'timestamp': now.timestamp(),
            'datetime': now.isoformat(),
            'human_readable': now.strftime('%Y-%m-%d %H:%M:%S'),
            'time_only': now.strftime('%H:%M'),
            'date_only': now.strftime('%Y-%m-%d'),
            'hour': hour,
            'minute': now.minute,
            'weekday': now.strftime('%A'),
            'weekday_ru': self._get_weekday_ru(now.weekday()),
            'period': period,
            'period_ru': period_ru,
            'timezone': str(self.timezone)
        }
    
    def _get_weekday_ru(self, weekday: int) -> str:
        """–ü–æ–ª—É—á–∏—Ç—å –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º"""
        days = {
            0: '–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫',
            1: '–í—Ç–æ—Ä–Ω–∏–∫',
            2: '–°—Ä–µ–¥–∞',
            3: '–ß–µ—Ç–≤–µ—Ä–≥',
            4: '–ü—è—Ç–Ω–∏—Ü–∞',
            5: '–°—É–±–±–æ—Ç–∞',
            6: '–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ'
        }
        return days.get(weekday, '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ')
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- –î–æ–±–∞–≤–∏—Ç—å –≤ context_aggregator_node
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –≤ PerceptionEvent:
  - `current_time_human` (String)
  - `time_period` (String) - morning/day/evening/night
  - `time_context_json` (String) - –ø–æ–ª–Ω—ã–π JSON –∫–æ–Ω—Ç–µ–∫—Å—Ç

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- Reflection node –º–æ–∂–µ—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å time-aware –æ—Ç–≤–µ—Ç—ã ("–°–µ–π—á–∞—Å –≤–µ—á–µ—Ä, —Å–∫–æ—Ä–æ –Ω–æ—á—å")
- dialogue_node –º–æ–∂–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å –≤—Ä–µ–º—è ("–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ!")
- –ò—Å—Ç–æ—Ä–∏—è —Å–æ–±—ã—Ç–∏–π —Å human-readable –≤—Ä–µ–º–µ–Ω–µ–º

### –£–ª—É—á—à–µ–Ω–∏–µ 4: Equipment Health Monitor

**–¶–µ–ª—å:** –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
class EquipmentHealthMonitor:
    """–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è"""
    
    def __init__(self, node: Node):
        self.node = node
        
        # –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
        self.equipment_status = {
            'oak_d_camera': {
                'status': 'unknown',
                'fps': 0.0,
                'last_frame_time': None,
                'issues': []
            },
            'lslidar': {
                'status': 'unknown',
                'scan_rate': 0.0,
                'last_scan_time': None,
                'issues': []
            },
            'vesc_motors': {
                'status': 'unknown',
                'left_rpm': 0.0,
                'right_rpm': 0.0,
                'last_update': None,
                'issues': []
            },
            'rtabmap_slam': {
                'status': 'unknown',
                'mapping_mode': False,
                'loop_closures': 0,
                'last_update': None,
                'issues': []
            }
        }
        
        # –ü–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Ç–æ–ø–∏–∫–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
        self._setup_subscriptions()
        
        # –¢–∞–π–º–µ—Ä –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ timeout-–æ–≤
        self.check_timer = self.node.create_timer(2.0, self.check_timeouts)
    
    def _setup_subscriptions(self):
        """–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Ç–æ–ø–∏–∫–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è"""
        # OAK-D Camera
        self.camera_sub = self.node.create_subscription(
            Image,
            '/camera/rgb/image_raw',
            self.on_camera_frame,
            10
        )
        
        # LSLIDAR
        self.lidar_sub = self.node.create_subscription(
            LaserScan,
            '/scan',
            self.on_lidar_scan,
            10
        )
        
        # VESC (odometry –∫–∞–∫ proxy –¥–ª—è –º–æ—Ç–æ—Ä–æ–≤)
        self.odom_sub = self.node.create_subscription(
            Odometry,
            '/odom',
            self.on_motor_odom,
            10
        )
        
        # RTABMap info
        self.rtabmap_info_sub = self.node.create_subscription(
            MapData,
            '/rtabmap/mapData',
            self.on_rtabmap_info,
            10
        )
    
    def on_camera_frame(self, msg: Image):
        """–ü–æ–ª—É—á–µ–Ω —Ñ—Ä–µ–π–º —Å –∫–∞–º–µ—Ä—ã"""
        now = time.time()
        status = self.equipment_status['oak_d_camera']
        
        # –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å
        status['status'] = 'active'
        status['last_frame_time'] = now
        
        # –í—ã—á–∏—Å–ª—è–µ–º FPS
        if hasattr(self, '_last_camera_time'):
            dt = now - self._last_camera_time
            status['fps'] = 1.0 / dt if dt > 0 else 0.0
        
        self._last_camera_time = now
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ FPS
        if status['fps'] < 15.0 and status['fps'] > 0:
            if 'low_fps' not in status['issues']:
                status['issues'].append('low_fps')
                self.node.get_logger().warn(f'‚ö†Ô∏è –ö–∞–º–µ—Ä–∞: –Ω–∏–∑–∫–∏–π FPS ({status["fps"]:.1f})')
        else:
            if 'low_fps' in status['issues']:
                status['issues'].remove('low_fps')
    
    def check_timeouts(self):
        """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å timeout-—ã –¥–ª—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è"""
        now = time.time()
        timeout = 5.0  # —Å–µ–∫—É–Ω–¥
        
        for equipment, status in self.equipment_status.items():
            last_update = status.get('last_frame_time') or status.get('last_scan_time') or status.get('last_update')
            
            if last_update and (now - last_update) > timeout:
                if status['status'] != 'timeout':
                    status['status'] = 'timeout'
                    status['issues'].append('no_data')
                    self.node.get_logger().warn(f'‚ö†Ô∏è {equipment}: timeout (–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö {timeout}s)')
            elif last_update:
                if 'no_data' in status['issues']:
                    status['issues'].remove('no_data')
                    self.node.get_logger().info(f'‚úÖ {equipment}: –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω')
    
    def get_summary(self) -> Dict:
        """–ü–æ–ª—É—á–∏—Ç—å —Å–≤–æ–¥–∫—É —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è"""
        healthy_count = sum(1 for s in self.equipment_status.values() if s['status'] == 'active')
        total_count = len(self.equipment_status)
        
        all_issues = []
        for equipment, status in self.equipment_status.items():
            if status['issues']:
                all_issues.append(f"{equipment}: {', '.join(status['issues'])}")
        
        return {
            'healthy_count': healthy_count,
            'total_count': total_count,
            'overall_status': 'healthy' if healthy_count == total_count else 'degraded',
            'equipment_details': self.equipment_status,
            'issues': all_issues
        }
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- –î–æ–±–∞–≤–∏—Ç—å –≤ context_aggregator_node
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –≤ PerceptionEvent:
  - `equipment_summary` (String) - JSON —Å–≤–æ–¥–∫–∞
  - –†–∞—Å—à–∏—Ä–∏—Ç—å `health_issues` –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–º–µ—Ä—ã (FPS, –Ω–∞–ª–∏—á–∏–µ –¥–∞–Ω–Ω—ã—Ö)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ LIDAR (scan rate, –Ω–∞–ª–∏—á–∏–µ –¥–∞–Ω–Ω—ã—Ö)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–æ—Ç–æ—Ä–æ–≤ (RPM, –æ–¥–æ–º–µ—Ç—Ä–∏—è)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ SLAM (loop closures, mapping mode)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö

### –£–ª—É—á—à–µ–Ω–∏–µ 5: Proactive Reflection

**–¶–µ–ª—å:** –ü—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–µ —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
class ProactiveReflectionTimer:
    """–ü—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–µ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è"""
    
    def __init__(self, reflection_node):
        self.node = reflection_node
        
        # –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–π
        self.proactive_rules = [
            {
                'name': 'battery_check',
                'interval': 60.0,  # –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
                'condition': self.check_battery_level,
                'action': self.warn_low_battery
            },
            {
                'name': 'equipment_check',
                'interval': 300.0,  # –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
                'condition': self.check_equipment_health,
                'action': self.report_equipment_issues
            },
            {
                'name': 'idle_greeting',
                'interval': 600.0,  # –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç
                'condition': self.check_idle_time,
                'action': self.idle_greeting
            }
        ]
        
        # –¢–∞–π–º–µ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞
        self.rule_timers = {}
        for rule in self.proactive_rules:
            timer = self.node.create_timer(
                rule['interval'],
                lambda r=rule: self.execute_rule(r)
            )
            self.rule_timers[rule['name']] = timer
    
    def execute_rule(self, rule: Dict):
        """–í—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ"""
        if rule['condition']():
            rule['action']()
    
    def check_battery_level(self) -> bool:
        """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –±–∞—Ç–∞—Ä–µ–∏"""
        if not self.node.last_context:
            return False
        
        battery = self.node.last_context.battery_voltage
        
        # –ö—Ä–∏—Ç–∏—á–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å: < 11.0V
        # –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: < 11.5V
        return battery > 0 and battery < 11.5
    
    def warn_low_battery(self):
        """–ü—Ä–µ–¥—É–ø—Ä–µ–¥–∏—Ç—å –æ –Ω–∏–∑–∫–æ–π –±–∞—Ç–∞—Ä–µ–µ"""
        battery = self.node.last_context.battery_voltage
        
        if battery < 11.0:
            speech = f"–í–Ω–∏–º–∞–Ω–∏–µ! –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –Ω–∏–∑–∫–∏–π –∑–∞—Ä—è–¥ –±–∞—Ç–∞—Ä–µ–∏: {battery:.1f} –≤–æ–ª—å—Ç. –¢—Ä–µ–±—É–µ—Ç—Å—è —Å—Ä–æ—á–Ω–∞—è –∑–∞—Ä—è–¥–∫–∞."
            self.node._publish_speech(speech)
        else:
            speech = f"–ë–∞—Ç–∞—Ä–µ—è –Ω–∞ –Ω–∏–∑–∫–æ–º —É—Ä–æ–≤–Ω–µ: {battery:.1f} –≤–æ–ª—å—Ç. –†–µ–∫–æ–º–µ–Ω–¥—É—é –∑–∞—Ä—è–¥–∫—É."
            self.node._publish_speech(speech)
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- –î–æ–±–∞–≤–∏—Ç—å –≤ reflection_node
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø—Ä–∞–≤–∏–ª–∞ —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö
- Idle greeting –¥–ª—è –≤–æ–≤–ª–µ—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –£–ª—É—á—à–µ–Ω–∏–µ 6: Long-term Memory (Optional)

**–¶–µ–ª—å:** –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –ø–∞–º—è—Ç—å –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
import sqlite3
from datetime import datetime

class LongTermMemory:
    """–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –ø–∞–º—è—Ç—å —Ä–æ–±–æ—Ç–∞"""
    
    def __init__(self, db_path='/maps/robot_memory.db'):
        self.db_path = db_path
        self._init_database()
    
    def _init_database(self):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö"""
        conn = sqlite3.connect(self.db_path)
        cursor = conn.cursor()
        
        # –¢–∞–±–ª–∏—Ü–∞ —Å–æ–±—ã—Ç–∏–π
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS events (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                timestamp REAL,
                event_type TEXT,
                content TEXT,
                importance INTEGER
            )
        ''')
        
        # –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS preferences (
                key TEXT PRIMARY KEY,
                value TEXT,
                last_updated REAL
            )
        ''')
        
        # –¢–∞–±–ª–∏—Ü–∞ –º—ã—Å–ª–µ–π —Ä–æ–±–æ—Ç–∞
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS thoughts (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                timestamp REAL,
                thought TEXT,
                context TEXT
            )
        ''')
        
        conn.commit()
        conn.close()
    
    def store_event(self, event_type: str, content: str, importance: int = 1):
        """–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ"""
        conn = sqlite3.connect(self.db_path)
        cursor = conn.cursor()
        
        cursor.execute(
            'INSERT INTO events (timestamp, event_type, content, importance) VALUES (?, ?, ?, ?)',
            (time.time(), event_type, content, importance)
        )
        
        conn.commit()
        conn.close()
    
    def get_recent_events(self, event_type: str = None, limit: int = 100) -> List[Dict]:
        """–ü–æ–ª—É—á–∏—Ç—å –Ω–µ–¥–∞–≤–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è"""
        conn = sqlite3.connect(self.db_path)
        cursor = conn.cursor()
        
        if event_type:
            cursor.execute(
                'SELECT * FROM events WHERE event_type = ? ORDER BY timestamp DESC LIMIT ?',
                (event_type, limit)
            )
        else:
            cursor.execute(
                'SELECT * FROM events ORDER BY timestamp DESC LIMIT ?',
                (limit,)
            )
        
        rows = cursor.fetchall()
        conn.close()
        
        return [
            {
                'id': row[0],
                'timestamp': row[1],
                'event_type': row[2],
                'content': row[3],
                'importance': row[4]
            }
            for row in rows
        ]
    
    def store_preference(self, key: str, value: str):
        """–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–µ"""
        conn = sqlite3.connect(self.db_path)
        cursor = conn.cursor()
        
        cursor.execute(
            'INSERT OR REPLACE INTO preferences (key, value, last_updated) VALUES (?, ?, ?)',
            (key, value, time.time())
        )
        
        conn.commit()
        conn.close()
    
    def get_preference(self, key: str) -> Optional[str]:
        """–ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–µ"""
        conn = sqlite3.connect(self.db_path)
        cursor = conn.cursor()
        
        cursor.execute('SELECT value FROM preferences WHERE key = ?', (key,))
        row = cursor.fetchone()
        
        conn.close()
        
        return row[0] if row else None
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è context_aggregator –∏ reflection_node
- SQLite –±–∞–∑–∞ –Ω–∞ /maps (persistent volume)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è (–ª—é–±–∏–º—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã, –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–π —Å—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è)
- –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –¥–ª—è –æ–±—É—á–µ–Ω–∏—è

### –£–ª—É—á—à–µ–Ω–∏–µ 7: Unified Context Provider

**–¶–µ–ª—å:** –ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
class UnifiedContextProvider:
    """–ï–¥–∏–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è –≤—Å–µ—Ö –Ω–æ–¥"""
    
    def __init__(self, node: Node):
        self.node = node
        
        # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
        self.node_monitor = NodeAvailabilityMonitor(node)
        self.internet_monitor = InternetConnectivityMonitor(node)
        self.time_provider = TimeAwarenessProvider()
        self.equipment_monitor = EquipmentHealthMonitor(node)
    
    def get_full_context(self) -> Dict:
        """–ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–∏—Å—Ç–µ–º—ã"""
        return {
            'timestamp': time.time(),
            'time_context': self.time_provider.get_current_time_context(),
            'internet': self.internet_monitor.get_status(),
            'nodes': {
                'active': [n for n, s in self.node_monitor.node_status.items() if s['status'] == 'active'],
                'failed': self.node_monitor.get_failed_nodes(),
                'missing': self.node_monitor.get_missing_nodes()
            },
            'equipment': self.equipment_monitor.get_summary(),
            'system_health': self._compute_overall_health()
        }
    
    def _compute_overall_health(self) -> str:
        """–í—ã—á–∏—Å–ª–∏—Ç—å –æ–±—â–∏–π —Å—Ç–∞—Ç—É—Å –∑–¥–æ—Ä–æ–≤—å—è"""
        issues_count = 0
        
        # –ò–Ω—Ç–µ—Ä–Ω–µ—Ç
        if not self.internet_monitor.is_online:
            issues_count += 1
        
        # –ù–æ–¥—ã
        failed_nodes = self.node_monitor.get_failed_nodes()
        if failed_nodes:
            issues_count += len(failed_nodes)
        
        # –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ
        equipment_summary = self.equipment_monitor.get_summary()
        if equipment_summary['overall_status'] != 'healthy':
            issues_count += len(equipment_summary['issues'])
        
        if issues_count == 0:
            return 'healthy'
        elif issues_count <= 2:
            return 'degraded'
        else:
            return 'critical'
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- –ó–∞–º–µ–Ω–∏—Ç—å —Ä–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ context_aggregator_node
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ dialogue_node –∏ reflection_node

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –£–ø—Ä–æ—â—ë–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º
- Consistency across nodes

---

## üìù –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (1-2 –Ω–µ–¥–µ–ª–∏)

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å `NodeAvailabilityMonitor` –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `context_aggregator_node`
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å `InternetConnectivityMonitor` –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å `TimeAwarenessProvider` –∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ `PerceptionEvent`
4. ‚úÖ –†–∞—Å—à–∏—Ä–∏—Ç—å `PerceptionEvent` message:
   ```
   # –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è:
   string current_time_human
   string time_period  # morning/day/evening/night
   string time_context_json
   bool internet_available
   string[] failed_nodes
   string[] missing_nodes
   ```
5. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å `reflection_node` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
6. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å `dialogue_node` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –†–æ–±–æ—Ç –æ—Å–æ–∑–Ω–∞—ë—Ç –≤—Ä–µ–º—è, –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–æ–¥
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö

### –≠—Ç–∞–ø 2: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (1-2 –Ω–µ–¥–µ–ª–∏)

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å `EquipmentHealthMonitor`
2. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `context_aggregator_node`
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –≤ `PerceptionEvent`:
   ```
   string equipment_summary_json
   ```
4. ‚úÖ –°–æ–∑–¥–∞—Ç—å `ProactiveReflectionTimer` –¥–ª—è `reflection_node`
5. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–º–µ—Ä—ã, LIDAR, –º–æ—Ç–æ—Ä–æ–≤, SLAM
- –ü—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö

### –≠—Ç–∞–ø 3: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (2-3 –Ω–µ–¥–µ–ª–∏)

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å `UnifiedContextProvider`
2. ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `context_aggregator_node` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `UnifiedContextProvider`
3. ‚úÖ –£–ø—Ä–æ—Å—Ç–∏—Ç—å –∏–ª–∏ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å `health_monitor` —Å `context_aggregator`
4. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å service –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è full context:
   ```python
   # ros2 service call /perception/get_full_context rob_box_perception_msgs/srv/GetFullContext
   ```
5. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å –µ–¥–∏–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- Service API –¥–ª—è –¥—Ä—É–≥–∏—Ö –Ω–æ–¥

### –≠—Ç–∞–ø 4: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ó–∞–¥–∞—á–∏:**
1. ‚ö™ –°–æ–∑–¥–∞—Ç—å `LongTermMemory` —Å SQLite
2. ‚ö™ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `context_aggregator` –∏ `reflection_node`
3. ‚ö™ –î–æ–±–∞–≤–∏—Ç—å NLU –¥–ª—è –¥–µ—Ç–µ–∫—Ü–∏–∏ –∏–Ω—Ç–µ–Ω—Ç–æ–≤ (–≤–º–µ—Å—Ç–æ regex)
4. ‚ö™ –î–æ–±–∞–≤–∏—Ç—å ML –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –∏ –æ–±—É—á–µ–Ω–∏–µ
- –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Å–±–æ–µ–≤

---

## üéØ –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π:

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

‚úÖ **–û—Å–æ–∑–Ω–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã:**
- –†–æ–±–æ—Ç –∑–Ω–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –∏ –ø–µ—Ä–∏–æ–¥ —Å—É—Ç–æ–∫
- –†–æ–±–æ—Ç –∑–Ω–∞–µ—Ç, –¥–æ—Å—Ç—É–ø–µ–Ω –ª–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
- –†–æ–±–æ—Ç –∑–Ω–∞–µ—Ç, –∫–∞–∫–∏–µ –Ω–æ–¥—ã –∞–∫—Ç–∏–≤–Ω—ã, –∞ –∫–∞–∫–∏–µ —É–ø–∞–ª–∏
- –†–æ–±–æ—Ç –∑–Ω–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è (–∫–∞–º–µ—Ä–∞, LIDAR, –º–æ—Ç–æ—Ä—ã, SLAM)

‚úÖ **–ü—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –Ω–∏–∑–∫–æ–º –∑–∞—Ä—è–¥–µ
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–∞–¥–µ–Ω–∏–∏ –Ω–æ–¥
- –ò–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ –ø–æ—Ç–µ—Ä–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è

‚úÖ **–£–ª—É—á—à–µ–Ω–Ω—ã–π –¥–∏–∞–ª–æ–≥:**
- Time-aware –æ—Ç–≤–µ—Ç—ã ("–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ!", "–°–µ–π—á–∞—Å –≤–µ—á–µ—Ä")
- Context-aware –æ—Ç–≤–µ—Ç—ã (—É—á—ë—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã)
- Fallback —Ä–µ–∂–∏–º –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

### –ö–∞—á–µ—Å—Ç–≤–æ

‚úÖ **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Å–±–æ–µ–≤
- Graceful degradation –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
- Resilience –∫ –ø–æ—Ç–µ—Ä–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

‚úÖ **Observability:**
- –ü–æ–ª–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
- –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- Service API –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É

‚úÖ **Maintainability:**
- –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –ï–¥–∏–Ω—ã–π `UnifiedContextProvider`
- –ß–∏—Å—Ç–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

---

## üìö –°—Å—ã–ª–∫–∏ –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

### –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **Robot Context Awareness:**
   - [An IoT Platform with Monitoring Robot Applying CNN-Based Context Awareness](https://www.mdpi.com/1424-8220/19/11/2525)
   - [Semantics-based platform for context-aware robot](https://www.sciencedirect.com/science/article/pii/S0164121218302553)

2. **ROS2 System Monitoring:**
   - [ROS2 Node Lifecycle Management](https://design.ros2.org/articles/node_lifecycle.html)
   - [ros2sysmon - System Monitor Tool](https://github.com/ros2/ros2_tracing)

3. **AI Internal Dialogue:**
   - [AI in Internal Communications Best Practices](https://cerkl.com/blog/ai-in-internal-communications/)
   - [Real-time Feedback Systems](https://www.simpplr.com/blog/ai-in-internal-communications/)

### –¢–µ–∫—É—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

- `docs/architecture/INTERNAL_DIALOGUE_VOICE_ASSISTANT.md` - –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- `docs/development/AGENT_GUIDE.md` - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤
- `docs/development/PYTHON_STYLE_GUIDE.md` - –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–¥–∞

---

## üîö –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è perception nodes –∏ voice assistant **—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –∏ —Ö–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∞**, –Ω–æ –∏–º–µ–µ—Ç **–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–µ–ª—ã** –≤ —Å–∏—Å—Ç–µ–º–Ω–æ–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ –∏ –æ—Å–æ–∑–Ω–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.

–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –æ—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ **–∏–Ω–¥—É—Å—Ç—Ä–∏–∞–ª—å–Ω—ã—Ö best practices** –∏ **–∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è—Ö** –≤ –æ–±–ª–∞—Å—Ç–∏ —Ä–æ–±–æ—Ç–æ—Ç–µ—Ö–Ω–∏–∫–∏ –∏ AI —Å–∏—Å—Ç–µ–º.

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π **–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–≤—ã—Å–∏—Ç** –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å, observability –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Ä–æ–±–æ—Ç–æ–º.

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è** –Ω–∞—á–∞—Ç—å —Å **–≠—Ç–∞–ø–∞ 1** (–∫—Ä–∏—Ç–∏—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è) –∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø—Ä–æ–¥–≤–∏–≥–∞—Ç—å—Å—è –∫ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º.

---

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –û–±—Å—É–¥–∏—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è —Å –∫–æ–º–∞–Ω–¥–æ–π
2. –í—ã–±—Ä–∞—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
3. –°–æ–∑–¥–∞—Ç—å sub-PR –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞
4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
5. –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
