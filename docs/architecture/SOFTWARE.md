# –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –†–û–ë–ë–û–ö–°

<div align="center">
  <strong>–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Ä–æ–±–æ—Ç–∞</strong>
  <br>
  <sub>–í–µ—Ä—Å–∏—è: 1.0.0 | –î–∞—Ç–∞: 2025-10-12</sub>
</div>

---

## üìñ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã](#1-–æ–±–∑–æ—Ä-–ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–π-–ø–ª–∞—Ç—Ñ–æ—Ä–º—ã)
2. [ROS 2 –ø–∞–∫–µ—Ç—ã](#2-ros-2-–ø–∞–∫–µ—Ç—ã)
3. [Docker —Å–µ—Ä–≤–∏—Å—ã](#3-docker-—Å–µ—Ä–≤–∏—Å—ã)
4. [Middleware –∏ —Å–≤—è–∑—å](#4-middleware-–∏-—Å–≤—è–∑—å)
5. [–ê–ª–≥–æ—Ä–∏—Ç–º—ã –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏](#5-–∞–ª–≥–æ—Ä–∏—Ç–º—ã-–∏-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏)
6. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã](#6-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-–∏-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã)

---

## 1. –û–±–∑–æ—Ä –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

### 1.1. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   Application Layer                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ Nav2      ‚îÇ  ‚îÇ RTAB-Map  ‚îÇ  ‚îÇAnimations ‚îÇ  ‚îÇ Behaviors ‚îÇ   ‚îÇ
‚îÇ  ‚îÇNavigation ‚îÇ  ‚îÇ   SLAM    ‚îÇ  ‚îÇ  Manager  ‚îÇ  ‚îÇ (Future)  ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚Üï
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  ROS 2 Middleware (Zenoh)                        ‚îÇ
‚îÇ   Topics  ‚îÇ  Services  ‚îÇ  Actions  ‚îÇ  Parameters  ‚îÇ  TF         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚Üï
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ               Drivers & Hardware Abstraction                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ  ‚îÇ LiDAR    ‚îÇ  ‚îÇ OAK-D    ‚îÇ  ‚îÇ  VESC    ‚îÇ  ‚îÇ  LED     ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ Driver   ‚îÇ  ‚îÇ Driver   ‚îÇ  ‚îÇ Driver   ‚îÇ  ‚îÇ Matrix   ‚îÇ       ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚Üï
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Hardware Layer                                ‚îÇ
‚îÇ   Sensors  ‚îÇ  Cameras  ‚îÇ  Motors  ‚îÇ  LED Panels                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 1.2. –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|------------|--------|------------|
| **OS** | Ubuntu Server | 22.04 ARM64 | –ë–∞–∑–æ–≤–∞—è –û–° –¥–ª—è Raspberry Pi |
| **ROS** | ROS 2 Humble | 2023 LTS | –†–æ–±–æ—Ç–æ—Ç–µ—Ö–∏—á–µ—Å–∫–∏–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ |
| **Middleware** | Zenoh | 0.11+ | –†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è —Å–≤—è–∑—å |
| **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è** | Docker | 24.0+ | –ò–∑–æ–ª—è—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ |
| **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è** | Docker Compose | 2.20+ | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ |
| **SLAM** | RTAB-Map | 0.21+ | –ö–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—è –∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è |
| **Navigation** | Nav2 | Humble | –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏ |
| **Vision** | DepthAI / OpenCV | Latest | –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π |
| **Build System** | colcon | Latest | –°–±–æ—Ä–∫–∞ ROS 2 –ø–∞–∫–µ—Ç–æ–≤ |

---

## 2. ROS 2 –ø–∞–∫–µ—Ç—ã

### 2.1. rob_box_bringup

**–û–ø–∏—Å–∞–Ω–∏–µ**: Launch-—Ñ–∞–π–ª—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã —Ä–æ–±–æ—Ç–∞.

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–∞
```
rob_box_bringup/
‚îú‚îÄ‚îÄ launch/
‚îÇ   ‚îú‚îÄ‚îÄ display.launch.py          # –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è URDF –≤ RViz
‚îÇ   ‚îú‚îÄ‚îÄ control.launch.py          # –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ full_system.launch.py      # –ü–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ rviz_config.rviz           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è RViz
‚îî‚îÄ‚îÄ package.xml
```

#### –û—Å–Ω–æ–≤–Ω—ã–µ launch-—Ñ–∞–π–ª—ã

**display.launch.py**
```python
# –ó–∞–ø—É—Å–∫ robot_state_publisher + joint_state_publisher + RViz
ros2 launch rob_box_bringup display.launch.py
```

**control.launch.py**
```python
# –ó–∞–ø—É—Å–∫ ros2_control –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
ros2 launch rob_box_bringup control.launch.py
```

#### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- `rob_box_description` (URDF –º–æ–¥–µ–ª—å)
- `robot_state_publisher`
- `joint_state_publisher`
- `rviz2`

---

### 2.2. rob_box_description

**–û–ø–∏—Å–∞–Ω–∏–µ**: URDF –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–æ–±–æ—Ç–∞ (–≥–µ–æ–º–µ—Ç—Ä–∏—è, –∫–∏–Ω–µ–º–∞—Ç–∏–∫–∞, —Å–µ–Ω—Å–æ—Ä—ã).

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–∞
```
rob_box_description/
‚îú‚îÄ‚îÄ urdf/
‚îÇ   ‚îú‚îÄ‚îÄ rob_box.urdf.xacro         # –ì–ª–∞–≤–Ω—ã–π URDF —Ñ–∞–π–ª
‚îÇ   ‚îú‚îÄ‚îÄ robot.gazebo.xacro         # Gazebo –ø–ª–∞–≥–∏–Ω—ã (future)
‚îÇ   ‚îî‚îÄ‚îÄ materials.xacro            # –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ meshes/
‚îÇ   ‚îú‚îÄ‚îÄ chassis.stl                # STL –º–æ–¥–µ–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ wheel_left.stl
‚îÇ   ‚îî‚îÄ‚îÄ wheel_right.stl
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ ros2_control.yaml          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ros2_control
‚îî‚îÄ‚îÄ package.xml
```

#### –ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã URDF

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|----------|
| `wheelbase` | 0.40 m | –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∫–æ–ª—ë—Å–∞–º–∏ |
| `wheel_radius` | 0.125 m | –†–∞–¥–∏—É—Å –∫–æ–ª–µ—Å–∞ |
| `wheel_width` | 0.05 m | –®–∏—Ä–∏–Ω–∞ –∫–æ–ª–µ—Å–∞ |
| `chassis_length` | 0.50 m | –î–ª–∏–Ω–∞ –∫–æ—Ä–ø—É—Å–∞ |
| `chassis_width` | 0.40 m | –®–∏—Ä–∏–Ω–∞ –∫–æ—Ä–ø—É—Å–∞ |
| `chassis_height` | 0.30 m | –í—ã—Å–æ—Ç–∞ –∫–æ—Ä–ø—É—Å–∞ |

#### –§—Ä–µ–π–º—ã (TF tree)
```
base_link (–∫–æ—Ä–Ω–µ–≤–æ–π —Ñ—Ä–µ–π–º)
‚îú‚îÄ‚îÄ base_footprint (–ø—Ä–æ–µ–∫—Ü–∏—è –Ω–∞ –∑–µ–º–ª—é)
‚îú‚îÄ‚îÄ left_wheel_link
‚îú‚îÄ‚îÄ right_wheel_link
‚îú‚îÄ‚îÄ lidar_link (—Å–µ–Ω—Å–æ—Ä LS LiDAR)
‚îú‚îÄ‚îÄ camera_link (OAK-D –∫–∞–º–µ—Ä–∞)
‚îÇ   ‚îú‚îÄ‚îÄ camera_rgb_frame
‚îÇ   ‚îî‚îÄ‚îÄ camera_depth_frame
‚îî‚îÄ‚îÄ imu_link (IMU - future)
```

---

### 2.3. rob_box_animations

**–û–ø–∏—Å–∞–Ω–∏–µ**: –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è LED-–∞–Ω–∏–º–∞—Ü–∏—è–º–∏ –¥–ª—è 381 NeoPixel LED (4√ó 8√ó8 + 5√ó 5√ó5).

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–∞
```
rob_box_animations/
‚îú‚îÄ‚îÄ rob_box_animations/               # Python –º–æ–¥—É–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ animation_loader.py           # –ó–∞–≥—Ä—É–∑—á–∏–∫ YAML –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ animation_player.py           # –î–≤–∏–∂–æ–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ frame_renderer.py             # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–∞–¥—Ä–æ–≤
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ animation_player_node.py      # ROS 2 –Ω–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ generate_animation_frames.py  # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä PNG –∫–∞–¥—Ä–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ visualize_animations.py       # –ü—Ä–µ–≤—å—é –∞–Ω–∏–º–∞—Ü–∏–π
‚îú‚îÄ‚îÄ animations/
‚îÇ   ‚îú‚îÄ‚îÄ manifests/                    # YAML –æ–ø–∏—Å–∞–Ω–∏—è (v2.5)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ emergency/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ police_lights.yaml
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ambulance.yaml
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ road_service.yaml
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ emotions/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ happy.yaml
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sad.yaml
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ angry.yaml
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ thinking.yaml
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ talking.yaml
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ navigation/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ turn_left.yaml
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ turn_right.yaml
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ braking.yaml
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ system/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ idle.yaml
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ charging.yaml
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ error.yaml
‚îÇ   ‚îî‚îÄ‚îÄ frames/                       # PNG –∫–∞–¥—Ä—ã (8√ó8, 25√ó5)
‚îÇ       ‚îú‚îÄ‚îÄ police/
‚îÇ       ‚îú‚îÄ‚îÄ emotions/
‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ launch/
‚îÇ   ‚îî‚îÄ‚îÄ animation_player.launch.py
‚îî‚îÄ‚îÄ package.xml
```

#### –§–∏–∑–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è LED

**Wheel Panels (4√ó 8√ó8 = 256 LED)**:
- **FL/FR** (Front Left/Right) ‚Äî –ü–µ—Ä–µ–¥–Ω–∏–µ "–≥–ª–∞–∑–∞" / —Ñ–∞—Ä—ã
- **RL/RR** (Rear Left/Right) ‚Äî –ó–∞–¥–Ω–∏–µ —Å—Ç–æ–ø-—Å–∏–≥–Ω–∞–ª—ã

**Main Display (5√ó 5√ó5 = 125 LED)**:
- –û–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤ 5√ó25 –ø–∏–∫—Å–µ–ª–µ–π
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ç–µ–∫—Å—Ç–∞, —ç–º–æ—Ü–∏–π, —Å–æ–æ–±—â–µ–Ω–∏–π

**–í—Å–µ–≥–æ: 381 –∞–¥—Ä–µ—Å—É–µ–º—ã—Ö LED**

#### –î–æ—Å—Ç—É–ø–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ (21+)

##### üö® Emergency (–≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ —Å–ª—É–∂–±—ã)
| –ê–Ω–∏–º–∞—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ |
|----------|----------|-------------|
| `police_lights` | –°–∏–Ω–∏–µ/–∫—Ä–∞—Å–Ω—ã–µ –º–∏–≥–∞–ª–∫–∏ + —Å—Ç–∞—Ç–∏—á–Ω—ã–π —Ç–µ–∫—Å—Ç "–ü–û–õ–ò–¶–ò–Ø" | Custom cyrillic font 3√ó5px |
| `ambulance` | –ö—Ä–∞—Å–Ω–æ-–±–µ–ª–∞—è –º–∏–≥–∞–ª–∫–∞ + –∫—Ä–µ—Å—Ç | –í—ã—Å–æ–∫–∞—è —è—Ä–∫–æ—Å—Ç—å |
| `fire_truck` | –ö—Ä–∞—Å–Ω–æ-–æ—Ä–∞–Ω–∂–µ–≤—ã–µ –æ–≥–Ω–∏ + "FIRE" | –≠—Ñ—Ñ–µ–∫—Ç –ø–ª–∞–º–µ–Ω–∏ |
| `road_service` | –ñ—ë–ª—Ç–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –ø—É–ª—å—Å–∞—Ü–∏—è | –Ø—Ä–∫–æ—Å—Ç—å 100-255 —Å–∏–Ω—É—Å–æ–∏–¥–∞ |

##### üß≠ Navigation (–ù–∞–≤–∏–≥–∞—Ü–∏—è)
| –ê–Ω–∏–º–∞—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | FPS |
|----------|----------|-----|
| `turn_left` | –õ–µ–≤—ã–π –ø–æ–≤–æ—Ä–æ—Ç–Ω–∏–∫ (FL/RL orange) + –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–µ–ª–∫–∞ | 10 |
| `turn_right` | –ü—Ä–∞–≤—ã–π –ø–æ–≤–æ—Ä–æ—Ç–Ω–∏–∫ (FR/RR orange) + –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–µ–ª–∫–∞ | 10 |
| `braking` | –ë–µ–ª—ã–µ —Ñ–∞—Ä—ã (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ) + –∫—Ä–∞—Å–Ω—ã–µ —Å—Ç–æ–ø-—Å–∏–≥–Ω–∞–ª—ã + "STOP" | 10 |
| `accelerating` | –ù–∞—Ä–∞—Å—Ç–∞—é—â–∏–µ —Ñ–∞—Ä—ã + –æ—Ä–∞–Ω–∂–µ–≤–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ | 10 |

##### üòä Emotions (–≠–º–æ—Ü–∏–∏)
| –ê–Ω–∏–º–∞—Ü–∏—è | –ì–ª–∞–∑–∞ (FL/FR) | –†–æ—Ç (Display) | –ó–∞–¥–Ω–∏–µ (RL/RR) |
|----------|---------------|---------------|----------------|
| `idle` | –≠—Ñ—Ñ–µ–∫—Ç –¥—ã—Ö–∞–Ω–∏—è (0.5‚Üí1.0) | –ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ | –ú—è–≥–∫–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ |
| `happy` | –†–∞–¥—É–∂–Ω—ã–µ –≥–ª–∞–∑–∞ | –£–ª—ã–±–∫–∞ | –†–∞–¥—É–∂–Ω–∞—è –ø—É–ª—å—Å–∞—Ü–∏—è |
| `sad` | –°–∏–Ω–∏–µ –≥—Ä—É—Å—Ç–Ω—ã–µ | –ì—Ä—É—Å—Ç–Ω—ã–π —Ä–æ—Ç | –°–∏–Ω–∏–π –ø—É–ª—å—Å |
| `angry` | –ö—Ä–∞—Å–Ω–∞—è –ø—É–ª—å—Å–∞—Ü–∏—è (255‚Üí150) | –°–µ—Ä–¥–∏—Ç–æ–µ –ª–∏—Ü–æ | –ö—Ä–∞—Å–Ω–∞—è –ø—É–ª—å—Å–∞—Ü–∏—è |
| `surprised` | –®–∏—Ä–æ–∫–æ –æ—Ç–∫—Ä—ã—Ç—ã–µ | O-–æ–±—Ä–∞–∑–Ω—ã–π —Ä–æ—Ç | –ñ—ë–ª—Ç–æ–µ –º–∏–≥–∞–Ω–∏–µ |
| `thinking` | –ë–æ–∫–æ–≤–æ–π –≤–∑–≥–ª—è–¥ | –¢–æ—á–∫–∏ "..." | –§–∏–æ–ª–µ—Ç–æ–≤–∞—è –ø—É–ª—å—Å–∞—Ü–∏—è |
| `talking` | –ú–æ—Ä–≥–∞–Ω–∏–µ | –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–æ—Ç | –¶–∏–∞–Ω–æ–≤–∞—è –ø—É–ª—å—Å–∞—Ü–∏—è |
| `victory` | –†–∞–¥—É–∂–Ω—ã–π —Ü–∏–∫–ª | –ì–∞–ª–æ—á–∫–∞ ‚úì | –†–∞–¥—É–∂–Ω—ã–π —Ü–∏–∫–ª |

##### ‚öôÔ∏è System (–°–∏—Å—Ç–µ–º–Ω—ã–µ)
| –ê–Ω–∏–º–∞—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|----------|----------|---------------|
| `sleep` | –ó–∞–∫—Ä—ã—Ç—ã–µ –≥–ª–∞–∑–∞ + ZZZ + —Ç—É—Å–∫–ª–∞—è –ø—É–ª—å—Å–∞—Ü–∏—è | –†–µ–∂–∏–º –æ–∂–∏–¥–∞–Ω–∏—è |
| `wakeup` | –û—Ç–∫—Ä—ã–≤–∞—é—â–∏–µ—Å—è –≥–ª–∞–∑–∞ + –∑–µ–≤–æ–∫ | –í—ã—Ö–æ–¥ –∏–∑ —Å–Ω–∞ |
| `charging` | –ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ –≥–ª–∞–∑–∞ + –±–∞—Ç–∞—Ä–µ—è | –ü—Ä–æ—Ü–µ—Å—Å –∑–∞—Ä—è–¥–∫–∏ |
| `low_battery` | –¢—É—Å–∫–ª–æ–µ –∫—Ä–∞—Å–Ω–æ–µ –º–∏–≥–∞–Ω–∏–µ + –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –±–∞—Ç–∞—Ä–µ—è | –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ |
| `error` | X-–≥–ª–∞–∑–∞ + "ERROR" + –∫—Ä–∞—Å–Ω–æ–µ –º–∏–≥–∞–Ω–∏–µ | –°–∏—Å—Ç–µ–º–Ω–∞—è –æ—à–∏–±–∫–∞ |

#### –§–æ—Ä–º–∞—Ç –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ (v2.5)

```yaml
name: "police_lights"
version: "2.5"
duration_ms: 1000
loop: true
fps: 10

panels:
  - logical_group: "wheel_front_left"    # 8√ó8 LED
    offset_ms: 0
    frames:
      - image: "frames/police/fl_01.png"
        duration_ms: 100

  - logical_group: "main_display"        # 25√ó5 LED
    offset_ms: 0
    frames:
      - image: "frames/police/display_01.png"
        duration_ms: 100

metadata:
  priority: "high"
  category: "emergency"
  tags: ["police", "lights", "emergency"]
```

#### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞–¥—Ä–æ–≤

```bash
# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∞–Ω–∏–º–∞—Ü–∏–∏ (600+ –∫–∞–¥—Ä–æ–≤)
python3 scripts/generate_animation_frames.py --animation all

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è
python3 scripts/generate_animation_frames.py --animation happy

# –ü—Ä–µ–≤—å—é –∞–Ω–∏–º–∞—Ü–∏–π
python3 scripts/visualize_animations.py
```

**Cyrillic Font**: Custom 3√ó5 pixel —à—Ä–∏—Ñ—Ç –¥–ª—è —Ç–µ–∫—Å—Ç–∞ "–ü–û–õ–ò–¶–ò–Ø"

#### ROS 2 –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

**–ü—É–±–ª–∏–∫—É–µ–º—ã–µ —Ç–æ–ø–∏–∫–∏**:
```
/panel_image (sensor_msgs/Image)
  - frame_id: "wheel_front_left", "wheel_front_right", –∏ —Ç.–¥.
  - encoding: rgb8
  - –†–∞–∑–º–µ—Ä—ã: 8√ó8 (wheels) –∏–ª–∏ 25√ó5 (display)
```

**–°–µ—Ä–≤–∏—Å—ã**:
```bash
# –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π
ros2 service call /animation_player/list_animations std_srvs/srv/Trigger

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é
ros2 service call /animation_player/load_animation std_msgs/srv/String \
  "data: 'police_lights'"

# –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
ros2 service call /animation_player/play std_srvs/srv/Trigger

# –°—Ç–æ–ø
ros2 service call /animation_player/stop std_srvs/srv/Trigger
```

**–¢–æ–ø–∏–∫–∏ —Å—Ç–∞—Ç—É—Å–∞**:
- `/animation_player/status` (std_msgs/String) ‚Äî –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–ª–µ–µ—Ä–∞
- `/animation_player/current_animation` (std_msgs/String) ‚Äî –ê–∫—Ç–∏–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è

---

### 2.4. robot_sensor_hub_msg

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ö–∞—Å—Ç–æ–º–Ω—ã–µ ROS 2 —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è ESP32 —Å–µ–Ω—Å–æ—Ä–Ω–æ–≥–æ —Ö–∞–±–∞.

#### –¢–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π

**DeviceData.msg**
```
uint8 device_type      # 0=AHT30, 1=HX711, 2=FAN
uint8 device_id        # ID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
uint8 data_type        # 1=temp, 2=humidity, 3=weight, 4=speed, 5=rpm
float32 value          # –ó–Ω–∞—á–µ–Ω–∏–µ
uint8 error_code       # 0=OK, >0=–æ—à–∏–±–∫–∞
```

**DeviceCommand.msg**
```
uint8 device_type      # –¢–∏–ø —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
uint8 device_id        # ID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
uint8 command_code     # 0=SET_SPEED, 1=TARE_SCALE
float32 param_1        # –ü–∞—Ä–∞–º–µ—Ç—Ä –∫–æ–º–∞–Ω–¥—ã
float32 param_2        # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
```

**DeviceSnapshot.msg**
```
int64 timestamp        # –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ (ns)
DeviceData[] devices   # –ú–∞—Å—Å–∏–≤ –¥–∞–Ω–Ω—ã—Ö –æ—Ç –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
```

#### ROS 2 —Ç–æ–ø–∏–∫–∏

**–ü—É–±–ª–∏–∫—É–µ–º—ã–µ ESP32**:
- `/device/snapshot` (robot_sensor_hub_msg/DeviceSnapshot) @ 1 Hz

**–ü–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—ã–µ ESP32**:
- `/device/command` (robot_sensor_hub_msg/DeviceCommand)

#### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö —Å–µ–Ω—Å–æ—Ä–æ–≤
ros2 topic echo /device/snapshot

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä–∞ 1 –Ω–∞ 75%
ros2 topic pub --once /device/command robot_sensor_hub_msg/msg/DeviceCommand \
  "{device_type: 2, device_id: 0, command_code: 0, param_1: 0.75, param_2: 0.0}"

# –û–±–Ω—É–ª–∏—Ç—å –≤–µ—Å—ã (tare)
ros2 topic pub --once /device/command robot_sensor_hub_msg/msg/DeviceCommand \
  "{device_type: 1, device_id: 0, command_code: 1, param_1: 0.0, param_2: 0.0}"
```

---

### 2.5. vesc_nexus (Git Submodule)

**–û–ø–∏—Å–∞–Ω–∏–µ**: –î—Ä–∞–π–≤–µ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è VESC –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏ –ø–æ CAN-—à–∏–Ω–µ.

#### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ VESC (–¥–æ 4+) –ø–æ CAN
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö CAN-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ (can0, can1)
- ‚úÖ –ü—Ä–∏—ë–º `/cmd_vel` ‚Üí –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ RPM/Current
- ‚úÖ –ü—É–±–ª–∏–∫–∞—Ü–∏—è –æ–¥–æ–º–µ—Ç—Ä–∏–∏ `/odom`
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–æ—Ç–æ—Ä–æ–≤ (—Ç–æ–∫, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ)

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (vesc_nexus_config.yaml)

```yaml
/**:
  ros__parameters:
    can_interface: "can0"
    vesc_ids: [0, 1]                # ID VESC –Ω–∞ CAN —à–∏–Ω–µ
    wheel_labels: ["left", "right"] # –ú–µ—Ç–∫–∏ –∫–æ–ª—ë—Å
    publish_rate: 50.0              # –ß–∞—Å—Ç–æ—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è (Hz)
    
    # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–æ–±–æ—Ç–∞
    wheel_radius: 0.125             # –†–∞–¥–∏—É—Å –∫–æ–ª–µ—Å–∞ (–º)
    wheelbase: 0.40                 # –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∫–æ–ª—ë—Å–∞–º–∏ (–º)
    gear_ratio: 1.0                 # –ü–µ—Ä–µ–¥–∞—Ç–æ—á–Ω–æ–µ —á–∏—Å–ª–æ —Ä–µ–¥—É–∫—Ç–æ—Ä–∞
    
    # –õ–∏–º–∏—Ç—ã
    speed_max: 23250.0              # –ú–∞–∫—Å RPM
    current_max: 10.0               # –ú–∞–∫—Å —Ç–æ–∫ (–ê)
    brake_max: 200000.0             # –ú–∞–∫—Å —Ç–æ—Ä–º–æ–∑
```

#### ROS 2 –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

**–ü–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—ã–µ —Ç–æ–ø–∏–∫–∏**:
- `/cmd_vel` (geometry_msgs/Twist) ‚Äî –ö–æ–º–∞–Ω–¥—ã —Å–∫–æ—Ä–æ—Å—Ç–∏

**–ü—É–±–ª–∏–∫—É–µ–º—ã–µ —Ç–æ–ø–∏–∫–∏**:
- `/odom` (nav_msgs/Odometry) @ 50 Hz ‚Äî –û–¥–æ–º–µ—Ç—Ä–∏—è
- `/vesc/sensors/core` (vesc_msgs/VescStateStamped) ‚Äî –°–æ—Å—Ç–æ—è–Ω–∏–µ –º–æ—Ç–æ—Ä–æ–≤
- `/joint_states` (sensor_msgs/JointState) ‚Äî –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—á–ª–µ–Ω–µ–Ω–∏–π

#### –ó–∞–ø—É—Å–∫
```bash
# –ü–æ–¥–Ω—è—Ç—å CAN –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
sudo ip link set can0 up type can bitrate 500000

# –ó–∞–ø—É—Å–∫ –¥—Ä–∞–π–≤–µ—Ä–∞
ros2 launch vesc_nexus vesc_driver.launch.py
```

---

### 2.6. ros2leds (Git Submodule)

**–û–ø–∏—Å–∞–Ω–∏–µ**: –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è NeoPixel LED –º–∞—Ç—Ä–∏—Ü–∞–º–∏ —á–µ—Ä–µ–∑ ROS 2 (Python/C).

**–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**: https://github.com/krikz/ros2leds

#### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 381 WS2812B LED (4√ó 8√ó8 + 5√ó 5√ó5)
- ‚úÖ SPI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–µ—Ä–µ–∑ GPIO 10 (MOSI)
- ‚úÖ 24-bit —Ü–≤–µ—Ç RGB (16.7 –º–ª–Ω —Ü–≤–µ—Ç–æ–≤)
- ‚úÖ –ö–æ–º–ø–æ–∑–∏—Ç–æ—Ä –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –ø–∞–Ω–µ–ª–µ–π –≤ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –≥—Ä—É–ø–ø—ã
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ snake/flip/arrangement —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
[Applications] 
    ‚îÇ /panel_image (sensor_msgs/Image)
    ‚îÇ frame_id = –ª–æ–≥–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∞
    ‚Üì
[led_matrix_compositor] 
    ‚îÇ - –ö–æ–º–ø–æ–∑–∏—Ç–æ—Ä –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –≥—Ä—É–ø–ø
    ‚îÇ - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ snake/flip/arrangement
    ‚îÇ - –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –ø–∞–Ω–µ–ª–µ–π
    ‚îÇ /led_matrix/data (std_msgs/Int8MultiArray)
    ‚Üì
[led_matrix_driver]
    ‚îÇ - –ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π SPI –¥—Ä–∞–π–≤–µ—Ä
    ‚îÇ - pi5neo –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ (Raspberry Pi 5)
    ‚Üì
[381 WS2812B LEDs]
```

#### –§–∏–∑–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**4√ó Headlight Panels (8√ó8) = 256 LEDs**
- Front Left, Front Right (–ø–µ—Ä–µ–¥–Ω–∏–µ —Ñ–∞—Ä—ã)
- Rear Left, Rear Right (–∑–∞–¥–Ω–∏–µ —Å—Ç–æ–ø-—Å–∏–≥–Ω–∞–ª—ã)

**5√ó Main Display Panels (5√ó5) = 125 LEDs**
- –û–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ: 5 —Å—Ç—Ä–æ–∫ √ó 25 –∫–æ–ª–æ–Ω–æ–∫
- –≠–º–æ—Ü–∏–∏, —Ç–µ–∫—Å—Ç, –∞–Ω–∏–º–∞—Ü–∏–∏

**–ò—Ç–æ–≥–æ: 381 LED**

#### ROS 2 –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

**Input —Ç–æ–ø–∏–∫–∏**:
```
/panel_image (sensor_msgs/Image, 8√ó8 –∏–ª–∏ 5√ó25, RGB8)
  - frame_id –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ª–æ–≥–∏—á–µ—Å–∫—É—é –≥—Ä—É–ø–ø—É
  - –ü—Ä–∏–º–µ—Ä—ã: "headlights_front", "main_display"
```

**Output —Ç–æ–ø–∏–∫**:
```
/led_matrix/data (std_msgs/Int8MultiArray)
  - –°—ã—Ä—ã–µ RGB –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Å–µ—Ö 381 LED (1143 –±–∞–π—Ç–∞)
```

**Services**:
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —è—Ä–∫–æ—Å—Ç—å (0-100%)
ros2 service call /led_matrix/set_brightness std_srvs/srv/SetInt "{data: 50}"

# –í—ã–∫–ª—é—á–∏—Ç—å –≤—Å–µ LED
ros2 service call /led_matrix/clear std_srvs/srv/Trigger
```

#### –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞
- **pi5neo**: Python –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è WS2812B –Ω–∞ Raspberry Pi 5
- **SPI —Å–∫–æ—Ä–æ—Å—Ç—å**: 800 kHz (—Å—Ç–∞–Ω–¥–∞—Ä—Ç WS2812B)
- **–ü–∏—Ç–∞–Ω–∏–µ**: –í–Ω–µ—à–Ω–∏–π –ë–ü 5V/25A (–ù–ï –æ—Ç Raspberry Pi!)

---

## 3. Docker —Å–µ—Ä–≤–∏—Å—ã

### 3.1. Main Pi —Å–µ—Ä–≤–∏—Å—ã

#### zenoh-router (eclipse/zenoh:latest)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–æ—É—Ç–µ—Ä –¥–ª—è —Å–≤—è–∑–∏ –º–µ–∂–¥—É Pi
- **–†–µ–∂–∏–º**: `peer` (–º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∞–≤—Ç–æ–Ω–æ–º–Ω–æ)
- **–ü–æ—Ä—Ç—ã**: 7447 (TCP/UDP), 8000 (HTTP REST API)
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: `config/zenoh_router_config.json5`
- **Healthcheck**: `wget http://localhost:8000/@/local/router`

#### twist-mux
- **–û–±—Ä–∞–∑**: `ghcr.io/krikz/rob_box:twist-mux-humble-latest`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ú—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã**: 1. Nav2, 2. Teleop, 3. Joystick
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: `config/twist_mux/twist_mux.yaml`

#### rtabmap
- **–û–±—Ä–∞–∑**: `ghcr.io/krikz/rob_box:rtabmap-humble-latest`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: SLAM –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—è –∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
- **–í—Ö–æ–¥—ã**: `/scan`, `/camera/color/image_raw`, `/camera/depth/image_rect_raw`, `/odom`
- **–í—ã—Ö–æ–¥—ã**: `/map`, `/rtabmap/localization_pose`, `/rtabmap/cloud_map`
- **Persistent –¥–∞–Ω–Ω—ã–µ**: `./maps:/root/.ros/rtabmap`

#### lslidar
- **–û–±—Ä–∞–∑**: `ghcr.io/krikz/rob_box:lslidar-humble-latest`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –î—Ä–∞–π–≤–µ—Ä LS LiDAR N10
- **–í—ã—Ö–æ–¥**: `/scan` (sensor_msgs/LaserScan) @ 10 Hz
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: `config/lslidar/lslidar.yaml`

#### nav2 (future)
- **–û–±—Ä–∞–∑**: `ghcr.io/krikz/rob_box:nav2-humble-latest`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–≤—Ç–æ–Ω–æ–º–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: planner, controller, bt_navigator, lifecycle_manager
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: `config/nav2/nav2_params.yaml`

#### vesc-driver
- **–û–±—Ä–∞–∑**: `ghcr.io/krikz/rob_box:vesc-humble-latest`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ VESC –ø–æ CAN
- **–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ**: `/dev/spidev0.0` (MCP2515 CAN hat)
- **Privileged**: –î–∞ (–¥–æ—Å—Ç—É–ø –∫ SPI)

#### micro-ros-agent
- **–û–±—Ä–∞–∑**: `ghcr.io/krikz/rob_box:micro-ros-agent-humble-latest`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ú–æ—Å—Ç –º–µ–∂–¥—É ESP32 (Micro-ROS) –∏ ROS 2
- **–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ**: `/dev/ttyUSB0` (ESP32 Serial)
- **–°–∫–æ—Ä–æ—Å—Ç—å**: 115200 baud

---

### 3.2. Vision Pi —Å–µ—Ä–≤–∏—Å—ã

#### zenoh-router (eclipse/zenoh:latest)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –õ–æ–∫–∞–ª—å–Ω—ã–π —Ä–æ—É—Ç–µ—Ä (client mode)
- **–†–µ–∂–∏–º**: `client` (–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Main Pi)
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: `config/zenoh_router_config.json5`
- **Connect**: `tcp/10.1.1.10:7447`

#### oak-d
- **–û–±—Ä–∞–∑**: `ghcr.io/krikz/rob_box:oak-d-humble-latest`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –î—Ä–∞–π–≤–µ—Ä OAK-D Lite –∫–∞–º–µ—Ä—ã
- **–í—ã—Ö–æ–¥—ã**: `/camera/color/image_raw`, `/camera/depth/image_rect_raw`, camera_info
- **–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞**: `/dev/bus/usb` (privileged mode)
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: `config/oak-d/oak_d_config.yaml`

#### apriltag
- **–û–±—Ä–∞–∑**: `ghcr.io/krikz/rob_box:apriltag-humble-latest`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –î–µ—Ç–µ–∫—Ü–∏—è AprilTag –º–∞—Ä–∫–µ—Ä–æ–≤
- **–í—Ö–æ–¥**: `/camera/color/image_raw`, `/camera/color/camera_info`
- **–í—ã—Ö–æ–¥—ã**: `/apriltag/detections`, `/tf` (—Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º—ã –º–∞—Ä–∫–µ—Ä–æ–≤)
- **–°–µ–º–µ–π—Å—Ç–≤–æ —Ç–µ–≥–æ–≤**: tag36h11

---

## 4. Middleware –∏ —Å–≤—è–∑—å

### 4.1. Zenoh

**–û–ø–∏—Å–∞–Ω–∏–µ**: –í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π pub/sub middleware –¥–ª—è ROS 2.

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
Main Pi (peer mode)                Vision Pi (client mode)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Zenoh Router    ‚îÇ‚óÑ‚îÄ‚îÄTCP/UDP‚îÄ‚îÄ‚îÄ‚îÄ‚î§ Zenoh Router    ‚îÇ
‚îÇ (10.1.1.10:7447)‚îÇ              ‚îÇ (10.1.1.11:7447)‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                                ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇROS Nodes ‚îÇ                     ‚îÇROS Nodes ‚îÇ
    ‚îÇ(Zenoh RMW‚îÇ                     ‚îÇ(Zenoh RMW‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îÇ TCP/TLS (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇzenoh.robbox.online‚îÇ (–û–±–ª–∞–∫–æ)
‚îÇ      :7447        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Zenoh
| –ö—Ä–∏—Ç–µ—Ä–∏–π | Zenoh | CycloneDDS |
|----------|-------|------------|
| **CPU overhead** | <5% | ~20% |
| **Bandwidth** | –°–∂–∞—Ç–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–æ | –ù–µ—Ç —Å–∂–∞—Ç–∏—è |
| **WAN** | –ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ | –°–ª–æ–∂–Ω–∞—è (multicast) |
| **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** | –°–æ—Ç–Ω–∏ —É–∑–ª–æ–≤ | 10-20 —É–∑–ª–æ–≤ |

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (zenoh_router_config.json5)

**Main Pi (peer mode)**:
```json5
{
  mode: "peer",
  listen: {
    endpoints: ["tcp/0.0.0.0:7447", "udp/0.0.0.0:7447"]
  },
  connect: {
    endpoints: ["tcp/zenoh.robbox.online:7447"]  // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  },
  scouting: {
    multicast: { enabled: false }
  }
}
```

**Vision Pi (client mode)**:
```json5
{
  mode: "client",
  connect: {
    endpoints: ["tcp/10.1.1.10:7447"]  // –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Main Pi
  }
}
```

---

### 4.2. rmw_zenoh_cpp

**–û–ø–∏—Å–∞–Ω–∏–µ**: ROS 2 Middleware implementation –¥–ª—è Zenoh.

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
sudo apt install ros-humble-rmw-zenoh-cpp
```

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Zenoh –∫–∞–∫ RMW
export RMW_IMPLEMENTATION=rmw_zenoh_cpp

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–¥—É
ros2 run <package> <node>
```

#### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
export RMW_IMPLEMENTATION=rmw_zenoh_cpp
export ROS_AUTOMATIC_DISCOVERY_RANGE=LOCALHOST
export ZENOH_CONFIG=/config/zenoh_session_config.json5
```

---

## 5. –ê–ª–≥–æ—Ä–∏—Ç–º—ã –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

### 5.1. RTAB-Map (SLAM)

**–û–ø–∏—Å–∞–Ω–∏–µ**: Real-Time Appearance-Based Mapping ‚Äî 3D SLAM —Å RGB-D –∏ LiDAR.

#### –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã
- **RGBD Mode**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RGB-D –∫–∞–º–µ—Ä—ã + 2D LiDAR
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: –°–Ω–∏–∂–µ–Ω–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∏ FPS –¥–ª—è Raspberry Pi

#### –ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

```yaml
Mem/ImagePreDecimation: 2           # –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
Mem/ImagePostDecimation: 1
Kp/MaxFeatures: 400                 # –í–∏–∑—É–∞–ª—å–Ω—ã–µ —Ñ–∏—á–∏ (–±—ã–ª–æ 1000)
Vis/MaxFeatures: 200                # Keypoints (–±—ã–ª–æ 400)
GFTT/MinDistance: 5                 # –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Ñ–∏—á–∞–º–∏
Vis/FeatureType: 6                  # GFTT (Fast, GPU-friendly)
Vis/CorType: 1                      # BRIEF –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä
Rtabmap/LoopThr: 0.11               # –ü–æ—Ä–æ–≥ loop closure
Rtabmap/TimeThr: 700                # Loop closure —Ä–∞–∑ –≤ 2 —Å–µ–∫
Mem/STMSize: 10                     # Short-term memory (–±—ã–ª–æ unlimited)
Grid/RangeMax: 5.0                  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–∞–ª—å–Ω–æ—Å—Ç—å —Å–µ—Ç–∫–∏
```

#### –í—Ö–æ–¥–Ω—ã–µ —Ç–æ–ø–∏–∫–∏
```
/scan                              (sensor_msgs/LaserScan)
/camera/color/image_raw            (sensor_msgs/Image)
/camera/depth/image_rect_raw       (sensor_msgs/Image)
/camera/color/camera_info          (sensor_msgs/CameraInfo)
/odom                              (nav_msgs/Odometry)
```

#### –í—ã—Ö–æ–¥–Ω—ã–µ —Ç–æ–ø–∏–∫–∏
```
/map                               (nav_msgs/OccupancyGrid) @ 1 Hz
/rtabmap/localization_pose         (geometry_msgs/PoseStamped)
/rtabmap/cloud_map                 (sensor_msgs/PointCloud2)
/rtabmap/odom                      (nav_msgs/Odometry)
```

---

### 5.2. Nav2 (Navigation Stack)

**–û–ø–∏—Å–∞–Ω–∏–µ**: –°—Ç–µ–∫ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –¥–ª—è ROS 2.

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **Planner Server**: –ì–ª–æ–±–∞–ª—å–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (A*, Dijkstra, Theta*)
- **Controller Server**: –õ–æ–∫–∞–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (DWB, TEB, RPP)
- **Behavior Server**: –ë–∞–∑–æ–≤—ã–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è (spin, backup, wait)
- **BT Navigator**: Behavior Tree –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- **Lifecycle Manager**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –Ω–æ–¥

#### –°—Ç–∞—Ç—É—Å
üöß **–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ** ‚Äî –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Ä–µ–ª–∏–∑–∞—Ö.

---

### 5.3. AprilTag Detection

**–û–ø–∏—Å–∞–Ω–∏–µ**: –î–µ—Ç–µ–∫—Ü–∏—è –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤ AprilTag –¥–ª—è —Ç–æ—á–Ω–æ–π –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏.

#### –°–µ–º–µ–π—Å—Ç–≤–æ —Ç–µ–≥–æ–≤
- **tag36h11** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ‚Äî 36-–±–∏—Ç–Ω—ã–µ —Ç–µ–≥–∏ —Å –≤—ã—Å–æ–∫–æ–π –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å—é
- –†–∞–∑–º–µ—Ä –º–∞—Ä–∫–µ—Ä–∞: –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è (–æ–±—ã—á–Ω–æ 0.15-0.20 –º)

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–µ–∫—Ü–∏–π
ros2 topic echo /apriltag/detections

# –ü—Ä–æ—Å–º–æ—Ç—Ä TF —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π
ros2 run tf2_tools view_frames
```

#### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ
- üéØ **–¢–æ—á–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: Dock —Å—Ç–∞–Ω—Ü–∏–∏, —Ü–µ–ª–µ–≤—ã–µ —Ç–æ—á–∫–∏
- üó∫Ô∏è **–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –∫–∞—Ä—Ç—ã**: –ü—Ä–∏–≤—è–∑–∫–∞ SLAM –∫–∞—Ä—Ç—ã –∫ —Ä–µ–∞–ª—å–Ω—ã–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
- ü§ù **Human-robot interaction**: –ú–µ—Ç–∫–∏ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

---

## 6. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

### 6.1. –û–±—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# ROS 2
export ROS_DOMAIN_ID=0
export ROS_LOCALHOST_ONLY=0
export ROS_AUTOMATIC_DISCOVERY_RANGE=LOCALHOST

# Zenoh
export RMW_IMPLEMENTATION=rmw_zenoh_cpp
export ZENOH_CONFIG=/config/zenoh_session_config.json5

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
export RUST_LOG=zenoh=info
export RCUTILS_LOGGING_BUFFERED_STREAM=1
```

### 6.2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

```
docker/main/config/
‚îú‚îÄ‚îÄ zenoh_router_config.json5       # Zenoh router (Main Pi)
‚îú‚îÄ‚îÄ zenoh_session_config.json5      # Zenoh session –¥–ª—è ROS –Ω–æ–¥
‚îú‚îÄ‚îÄ cyclonedds.xml                  # CycloneDDS (fallback)
‚îú‚îÄ‚îÄ twist_mux/
‚îÇ   ‚îî‚îÄ‚îÄ twist_mux.yaml
‚îú‚îÄ‚îÄ rtabmap/
‚îÇ   ‚îî‚îÄ‚îÄ rtabmap_config.yaml
‚îú‚îÄ‚îÄ lslidar/
‚îÇ   ‚îî‚îÄ‚îÄ lslidar.yaml
‚îú‚îÄ‚îÄ nav2/
‚îÇ   ‚îî‚îÄ‚îÄ nav2_params.yaml
‚îî‚îÄ‚îÄ vesc/
    ‚îî‚îÄ‚îÄ vesc_nexus_config.yaml
```

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](SYSTEM_OVERVIEW.md)
- [–ê–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ](HARDWARE.md)
- [API Reference](API_REFERENCE.md)
- [Deployment Guide](DEPLOYMENT.md)
- [Docker Standards](development/DOCKER_STANDARDS.md)

---

<div align="center">
  <sub>–í–µ—Ä—Å–∏—è: 1.0.0 | –î–∞—Ç–∞: 2025-10-12 | –ê–≤—Ç–æ—Ä: –ö–£–ö–û–†–ï–ö–ï–ù</sub>
</div>
