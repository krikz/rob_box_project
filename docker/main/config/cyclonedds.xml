<?xml version="1.0" encoding="UTF-8"?>
<CycloneDDS xmlns="https://cdds.io/config"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="https://cdds.io/config
https://raw.githubusercontent.com/eclipse-cyclonedds/cyclonedds/master/etc/cyclonedds.xsd">
  <Domain id="any">
    <General>
      <!-- Оптимизация для Raspberry Pi (RTAB-Map) -->
      <MaxMessageSize>65500B</MaxMessageSize>
      <FragmentSize>4096B</FragmentSize>
      <!-- Принудительно используем wlan0 для DDS -->
      <Interfaces>
        <NetworkInterface name="wlan0" priority="default"/>
      </Interfaces>
    </General>
    
    <Internal>
      <!-- Оптимизированные буферы для приема сжатых изображений (adjusted for system limits) -->
      <SocketReceiveBufferSize min="256kB" max="400kB"/>
      <SocketSendBufferSize min="256kB" max="400kB"/>
      
      <!-- Ограничиваем очередь -->
      <DeliveryQueueMaxSamples>20</DeliveryQueueMaxSamples>
    </Internal>
    
    <Discovery>
      <!-- Синхронизация с настройками vision Pi -->
      <ParticipantIndex>auto</ParticipantIndex>
      <MaxAutoParticipantIndex>10</MaxAutoParticipantIndex>
      <SPDPInterval>5s</SPDPInterval>
      <DSGracePeriod>10s</DSGracePeriod>
    </Discovery>
    
    <Tracing>
      <Verbosity>warning</Verbosity>
      <OutputFile>stdout</OutputFile>
    </Tracing>
  </Domain>
</CycloneDDS>