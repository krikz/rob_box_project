<?xml version="1.0" encoding="UTF-8"?>
<CycloneDDS xmlns="https://cdds.io/config"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="https://cdds.io/config
https://raw.githubusercontent.com/eclipse-cyclonedds/cyclonedds/master/etc/cyclonedds.xsd">
  <Domain id="any">
    <General>
      <!-- Оптимизация для Raspberry Pi -->
      <MaxMessageSize>65500B</MaxMessageSize>
      <FragmentSize>4096B</FragmentSize>
      <!-- Принудительно используем eth0 для DDS -->
      <Interfaces>
        <NetworkInterface name="eth0" priority="default"/>
      </Interfaces>
    </General>
    
    <Internal>
      <!-- Оптимизированные буферы для Pi (adjusted for system limits) -->
      <SocketReceiveBufferSize min="256kB" max="400kB"/>
      <SocketSendBufferSize min="256kB" max="400kB"/>
      
      <!-- Ограничиваем количество потоков -->
      <DeliveryQueueMaxSamples>10</DeliveryQueueMaxSamples>
    </Internal>
    
    <Discovery>
      <!-- Снижаем частоту discovery для экономии CPU -->
      <ParticipantIndex>auto</ParticipantIndex>
      <MaxAutoParticipantIndex>10</MaxAutoParticipantIndex>
      <SPDPInterval>5s</SPDPInterval>  <!-- Увеличено с 1s -->
      <DSGracePeriod>10s</DSGracePeriod>
    </Discovery>
    
    <Tracing>
      <Verbosity>info</Verbosity>  <!-- Временно info для отладки -->
      <OutputFile>stdout</OutputFile>
    </Tracing>
  </Domain>
</CycloneDDS>