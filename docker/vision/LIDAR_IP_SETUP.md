# Настройка IP адреса LSLIDAR N10

## Проблема
LSLIDAR N10 по умолчанию имеет IP: **192.168.1.200**  
Ваша сеть использует: **10.1.1.x**

**Нужно изменить IP LiDAR на 10.1.1.200**

## Способ 1: Web-интерфейс (рекомендуется)

### Шаг 1: Подключите LiDAR к компьютеру

На Windows:
```
1. Подключите LiDAR к ПК через Ethernet
2. Перейдите: Панель управления → Сеть → Ethernet → Свойства → IPv4
3. Установите:
   IP адрес: 192.168.1.100
   Маска: 255.255.255.0
```

### Шаг 2: Откройте web-интерфейс

```
Браузер: http://192.168.1.200
```

### Шаг 3: Измените IP

В настройках сети LiDAR:
```
IP Address:   10.1.1.200
Subnet Mask:  255.255.255.0
Gateway:      10.1.1.1
```

Нажмите **Save** и **Reboot**.

### Шаг 4: Верните настройки ПК

Включите DHCP обратно на компьютере.

### Шаг 5: Подключите к Vision Pi

Подключите LiDAR к роутеру или напрямую к Vision Pi (eth0).

Проверьте с Vision Pi:
```bash
ping 10.1.1.200
```

## Способ 2: Утилита конфигурации LSLIDAR

1. Скачайте **LSLiDAR Config Tool** с сайта:
   https://www.lslidar.com/

2. Подключите LiDAR к ПК (настройте ПК на 192.168.1.100)

3. Запустите утилиту, найдите LiDAR

4. Измените IP на `10.1.1.200`

5. Сохраните и перезагрузите LiDAR

## Способ 3: SSH команды (если доступен SSH на LiDAR)

Некоторые модели LSLIDAR имеют SSH (пароль обычно: lslidar/lslidar).

```bash
ssh lslidar@192.168.1.200

# Измените /etc/network/interfaces
sudo nano /etc/network/interfaces

# Установите:
auto eth0
iface eth0 inet static
    address 10.1.1.200
    netmask 255.255.255.0
    gateway 10.1.1.1

sudo reboot
```

## Проверка после настройки

На **Vision Pi** (10.1.1.21):

```bash
# Проверка связи
ping 10.1.1.200

# Должны видеть ответы:
# 64 bytes from 10.1.1.200: icmp_seq=1 ttl=64 time=0.5 ms

# Проверка UDP данных
sudo tcpdump port 2368 -c 5

# Должны видеть пакеты от 10.1.1.200:2368
```

## Если не получается изменить IP

**Вариант A: Reset LiDAR к заводским настройкам**

На корпусе LiDAR обычно есть кнопка RESET.
1. Удерживайте 10 секунд
2. LiDAR вернётся к 192.168.1.200
3. Повторите настройку

**Вариант B: Измените сеть Vision Pi (не рекомендуется)**

Если совсем не получается изменить IP LiDAR, можно добавить второй IP на Vision Pi:

```bash
# Добавить временный IP 192.168.1.100 на eth0
sudo ip addr add 192.168.1.100/24 dev eth0

# Проверить
ping 192.168.1.200

# После настройки LiDAR удалить:
sudo ip addr del 192.168.1.100/24 dev eth0
```

## Текущая сетевая схема

```
Router 10.1.1.1
    ├─ Main Pi:    10.1.1.20  (WiFi)
    ├─ Vision Pi:  10.1.1.21  (WiFi или Ethernet)
    └─ LSLIDAR:    10.1.1.200 (Ethernet) ← НАСТРОИТЬ!
```

После настройки IP запустите:
```bash
cd ~/rob_box_project/docker/vision
./setup_lidar.sh
```
