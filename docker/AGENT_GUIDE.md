# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è AI –∞–≥–µ–Ω—Ç–æ–≤ - Rob Box Project

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
- [–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](#–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã)
- [–î–æ—Å—Ç—É–ø –∫ Raspberry Pi](#–¥–æ—Å—Ç—É–ø-–∫-raspberry-pi)
- [–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏](#–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞-–∏-–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏)
- [–ê–Ω–∞–ª–∏–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π](#–∞–Ω–∞–ª–∏–∑-–ø–æ—Å–ª–µ–¥–Ω–∏—Ö-–∏–∑–º–µ–Ω–µ–Ω–∏–π)
- [–¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Zenoh](#—Ç–µ–∫—É—â–∞—è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-zenoh)
- [–°–∫—Ä–∏–ø—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è](#—Å–∫—Ä–∏–ø—Ç—ã-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è-–∏-—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è)

---

## –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

**Rob Box Project** - –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Ä–æ–±–æ—Ç –Ω–∞ –±–∞–∑–µ –¥–≤—É—Ö Raspberry Pi 4 —Å OAK-D Lite –∫–∞–º–µ—Ä–æ–π –∏ RTAB-Map SLAM.

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

**Vision Pi (10.1.1.11 eth0 / 10.1.1.21 wlan0)**
- OAK-D Lite –∫–∞–º–µ—Ä–∞ (Intel Movidius MyriadX)
- AprilTag –¥–µ—Ç–µ–∫—Ü–∏—è
- Zenoh router –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

**Main Pi (10.1.1.10 eth0 / 10.1.1.20 wlan0)**
- RTAB-Map SLAM —Å–∏—Å—Ç–µ–º–∞
- Zenoh router (—Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —É–∑–µ–ª)
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –≤–Ω–µ—à–Ω–µ–º—É —Å–µ—Ä–≤–µ—Ä—É zenoh.robbox.online:7447

### –°–µ—Ç–µ–≤–∞—è —Ç–æ–ø–æ–ª–æ–≥–∏—è

```
Vision Pi (eth0: 10.1.1.11)  ‚Üê‚Üí  Main Pi (eth0: 10.1.1.10)
     ‚Üì                                    ‚Üì
WiFi (wlan0: 10.1.1.21)         WiFi (wlan0: 10.1.1.20)
   (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)                        (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
                                         ‚Üì
                               zenoh.robbox.online:7447
```

**‚ö†Ô∏è –í–ê–ñ–ù–û**: 
- **Gigabit Ethernet (eth0)**: –¢–û–õ–¨–ö–û –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É Pi
- **WiFi (wlan0)**: –¢–û–õ–¨–ö–û –¥–ª—è SSH –¥–æ—Å—Ç—É–ø–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ö Zenoh router –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¢–û–õ–¨–ö–û Ethernet IP (10.1.1.10, 10.1.1.11)

---

## –î–æ—Å—Ç—É–ø –∫ Raspberry Pi

### Credentials

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Vision Pi | Main Pi |
|----------|-----------|---------|
| **Ethernet IP** | 10.1.1.11 | 10.1.1.10 |
| **WiFi IP** | 10.1.1.21 | 10.1.1.20 |
| **Username** | ros2 | ros2 |
| **Password** | open | open |

### SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```bash
# –ò–∑ Windows (PowerShell) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º sshpass —á–µ—Ä–µ–∑ WSL
wsl sshpass -p 'open' ssh -o StrictHostKeyChecking=no ros2@10.1.1.21  # Vision Pi
wsl sshpass -p 'open' ssh -o StrictHostKeyChecking=no ros2@10.1.1.20  # Main Pi

# –ü—Ä—è–º–æ–µ SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –¥–æ—Å—Ç—É–ø)
ssh ros2@10.1.1.21  # Vision Pi
ssh ros2@10.1.1.20  # Main Pi
```

### –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö Pi

```bash
# Vision Pi - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
wsl sshpass -p 'open' ssh -o StrictHostKeyChecking=no ros2@10.1.1.21 'docker ps'

# Main Pi - –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
wsl sshpass -p 'open' ssh -o StrictHostKeyChecking=no ros2@10.1.1.20 'docker logs rtabmap'

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
wsl sshpass -p 'open' ssh -o StrictHostKeyChecking=no ros2@10.1.1.21 \
  'cd ~/rob_box_project/docker/vision && git pull && docker-compose down && docker-compose up -d'
```

---

## –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### üìä –°–∫—Ä–∏–ø—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

#### 1. `docker/monitor_system.sh` - –û–±—â–∏–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `docker/monitor_system.sh`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ CPU, –ø–∞–º—è—Ç–∏, —Å–µ—Ç–∏, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –¥–ª—è –æ–±–æ–∏—Ö Pi  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
# –ù–∞ Vision Pi
ssh ros2@10.1.1.21
cd ~/rob_box_project/docker
./monitor_system.sh
```

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç**:
- –¢–∏–ø Pi (–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º)
- CPU –Ω–∞–≥—Ä—É–∑–∫–∞ (–æ–±—â–∞—è —Å–∏—Å—Ç–µ–º–∞ + –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)
- –ü–∞–º—è—Ç—å (–æ–±—â–∞—è + –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)
- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
- Throttling —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–ø–æ–Ω–∏–∂–µ–Ω–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, —á–∞—Å—Ç–æ—Ç–∞ –∏ —Ç.–¥.)
- –°–µ—Ç—å (RX/TX –Ω–∞ eth0 –∏ wlan0)
- –¢–æ–ø –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –°—Ç–∞—Ç—É—Å Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- ‚úÖ **–û–°–¢–ê–í–ò–¢–¨** - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- –ó–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏ –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–∏ –Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é

---

#### 2. `docker/vision/realtime_monitor.sh` - Real-time –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–º–µ—Ä—ã
**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `docker/vision/realtime_monitor.sh`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –î–µ—Ç–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç—ã OAK-D –∫–∞–º–µ—Ä—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
# –ù–∞ Vision Pi
cd ~/rob_box_project/docker/vision
./realtime_monitor.sh [duration_in_seconds]  # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 30 —Å–µ–∫—É–Ω–¥
```

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç** (–∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã):
- CPU (usr/sys/idle)
- –°–µ—Ç—å eth0 (RX/TX KB/s)
- RGB publisher count
- Depth publisher count
- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞
- Throttling —Å–æ—Å—Ç–æ—è–Ω–∏–µ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- ‚úÖ **–û–°–¢–ê–í–ò–¢–¨** - –∫–ª—é—á–µ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∫–∞–º–µ—Ä—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Ç–æ–ø–∏–∫–æ–≤
- –ó–∞–ø—É—Å–∫–∞—Ç—å –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–∞–º–µ—Ä—ã

---

#### 3. `docker/vision/monitor_camera_startup.sh` - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–ø—É—Å–∫–∞ –∫–∞–º–µ—Ä—ã
**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `docker/vision/monitor_camera_startup.sh`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–ø—É—Å–∫–∞ –∫–∞–º–µ—Ä—ã —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ª–æ–≥–æ–≤  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
# –ù–∞ Vision Pi
cd ~/rob_box_project/docker/vision
./monitor_camera_startup.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**:
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–∞–º–µ—Ä—É
- –§–æ–Ω–æ–≤—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ CPU (60 —Å–µ–∫—É–Ω–¥, –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã)
- –§–æ–Ω–æ–≤—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∏—Ç–∞–Ω–∏—è/throttling
- –§–æ–Ω–æ–≤—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ç–∏ eth0
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ROS 2 —Ç–æ–ø–∏–∫–æ–≤
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –ª–æ–≥–æ–≤ –≤ `/tmp/camera_monitor_YYYYMMDD_HHMMSS/`

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- ‚ö†Ô∏è **–£–°–¢–ê–†–ï–õ** - —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è `realtime_monitor.sh`
- üóëÔ∏è **–£–î–ê–õ–ò–¢–¨** –∏–ª–∏ **–û–ë–™–ï–î–ò–ù–ò–¢–¨** —Å `realtime_monitor.sh`
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –ø–æ–ª–µ–∑–Ω–æ, –Ω–æ –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–ø—Ü–∏–µ–π –≤ realtime_monitor

---

### üîç –°–∫—Ä–∏–ø—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

#### 4. `docker/diagnose_data_flow.sh` - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–≤—è–∑–∏ –º–µ–∂–¥—É Pi
**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `docker/diagnose_data_flow.sh`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ–≥–æ –ø—É—Ç–∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö: Vision Pi ‚Üí Main Pi  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ (Windows PowerShell)
cd d:\PROJECTS\rob_box_project\docker
wsl bash ./diagnose_data_flow.sh
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç**:
1. –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–∞–º–µ—Ä—ã —á–µ—Ä–µ–∑ docker-compose
2. Publisher count –Ω–∞ Vision Pi
3. –°–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫ eth0 –Ω–∞ Vision Pi
4. Subscriber count –Ω–∞ Main Pi
5. –ò—Ç–æ–≥–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- ‚úÖ **–û–°–¢–ê–í–ò–¢–¨** - –∫—Ä–∏—Ç–∏—á–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –º–µ–∂–ø–ª–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
- –ó–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–µ "Did not receive data since 5 seconds"
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º sshpass

---

#### 5. `docker/vision/diagnose.sh` - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–∞–º–µ—Ä—ã –Ω–∞ Vision Pi
**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `docker/vision/diagnose.sh`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–∞–º–µ—Ä—ã –∏ —Ç–æ–ø–∏–∫–æ–≤  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
# –ù–∞ Vision Pi
cd ~/rob_box_project/docker/vision
./diagnose.sh
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç**:
1. –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ oak-d
2. –õ–æ–≥–∏ –∫–∞–º–µ—Ä—ã (ERROR/WARN)
3. –°–ø–∏—Å–æ–∫ ROS 2 —Ç–æ–ø–∏–∫–æ–≤ –æ—Ç –∫–∞–º–µ—Ä—ã
4. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–ø–∏–∫–∞—Ö (compressed)
5. –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Ç–æ–ø–∏–∫–æ–≤ (5 —Å–µ–∫—É–Ω–¥)
6. –ù–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã (CPU/–ø–∞–º—è—Ç—å)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- ‚úÖ **–û–°–¢–ê–í–ò–¢–¨** - –±—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –Ω–∞ Vision Pi
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø–µ—Ä–≤–∏—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞–º–µ—Ä—ã

---

#### 6. `docker/vision/force_publish.sh` - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Ç–æ–ø–∏–∫–æ–≤
**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `docker/vision/force_publish.sh`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—Ç–∫–ª—é—á–µ–Ω–∏–µ lazy publisher –¥–ª—è OAK-D  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
# –ù–∞ Vision Pi
cd ~/rob_box_project/docker/vision
./force_publish.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**:
- –û—Ç–∫–ª—é—á–∞–µ—Ç `color.i_enable_lazy_publisher` 
- –û—Ç–∫–ª—é—á–∞–µ—Ç `depth.i_enable_lazy_publisher`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç publisher count

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- ‚ö†Ô∏è **–£–°–¢–ê–†–ï–õ** - `update_and_restart.sh` —É–∂–µ –≤–∫–ª—é—á–∞–µ—Ç —ç—Ç—É –ª–æ–≥–∏–∫—É
- üóëÔ∏è **–£–î–ê–õ–ò–¢–¨** - —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è, –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫

---

### üîß –°–∫—Ä–∏–ø—Ç—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

#### 7. `docker/tune.sh` - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –±—É—Ñ–µ—Ä–æ–≤ (CycloneDDS)
**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `docker/tune.sh`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö –±—É—Ñ–µ—Ä–æ–≤ –¥–ª—è CycloneDDS  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
# –ù–∞ –ª—é–±–æ–º Pi
cd ~/rob_box_project/docker
sudo bash tune.sh
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- ‚ö†Ô∏è **–£–°–¢–ê–†–ï–õ** - —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ—à–ª–∞ –Ω–∞ Zenoh, CycloneDDS –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- üóëÔ∏è **–£–î–ê–õ–ò–¢–¨** - –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –∫–∞–∫ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

---

### üöÄ –°–∫—Ä–∏–ø—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### 8. `docker/vision/update_and_restart.sh` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ Vision Pi
**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `docker/vision/update_and_restart.sh`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
# –ù–∞ Vision Pi
cd ~/rob_box_project/docker/vision
./update_and_restart.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**:
1. –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (`docker-compose down --remove-orphans`)
2. –û–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–¥ –∏–∑ GitHub (`git pull origin main`)
3. –ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (`docker-compose up -d`)
4. –û—Ç–∫–ª—é—á–∞–µ—Ç lazy publisher (force publish)
5. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ª–æ–≥–∏ –∫–∞–º–µ—Ä—ã

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- ‚úÖ **–û–°–¢–ê–í–ò–¢–¨** - –∫–ª—é—á–µ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è deployment
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–º–∏—Ç–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

---

#### 9. `docker/main/update_and_restart.sh` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ Main Pi
**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `docker/main/update_and_restart.sh`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ RTAB-Map  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
# –ù–∞ Main Pi
cd ~/rob_box_project/docker/main
./update_and_restart.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**:
1. –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (`docker-compose down --remove-orphans`)
2. –û–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–¥ –∏–∑ GitHub (`git pull origin main`)
3. –ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (`docker-compose up -d`)
4. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ª–æ–≥–∏ RTAB-Map

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- ‚úÖ **–û–°–¢–ê–í–ò–¢–¨** - –∫–ª—é—á–µ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è deployment
- –ó–∞–ø—É—Å–∫–∞—Ç—å –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Vision Pi

---

### üìù –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã (–≤ config/)

#### 10. `docker/vision/config/start_oak_d.sh` - –°—Ç–∞—Ä—Ç –∫–∞–º–µ—Ä—ã OAK-D
**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `docker/vision/config/start_oak_d.sh`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ó–∞–ø—É—Å–∫ –Ω–æ–¥—ã OAK-D –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞  
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- ‚úÖ **–û–°–¢–ê–í–ò–¢–¨** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Dockerfile –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∫–∞–º–µ—Ä—ã

#### 11. `docker/vision/config/start_apriltag.sh` - –°—Ç–∞—Ä—Ç AprilTag –¥–µ—Ç–µ–∫—Ü–∏–∏
**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `docker/vision/config/start_apriltag.sh`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ó–∞–ø—É—Å–∫ AprilTag –¥–µ—Ç–µ–∫—Ç–æ—Ä–∞ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞  
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- ‚úÖ **–û–°–¢–ê–í–ò–¢–¨** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Dockerfile –¥–ª—è –∑–∞–ø—É—Å–∫–∞ AprilTag

---

## –ê–Ω–∞–ª–∏–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ö–æ–º–º–∏—Ç—ã (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 7)

#### 1. `abd2629 - fixes`
**–î–∞—Ç–∞**: –ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç  
**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –£–¥–∞–ª–µ–Ω `docker/main/discovery/Dockerfile` (FastDDS discovery —Å–µ—Ä–≤–µ—Ä –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω)
- –û–±–Ω–æ–≤–ª–µ–Ω—ã `zenoh_router_config.json5` –¥–ª—è Vision –∏ Main Pi
- –û–±–Ω–æ–≤–ª–µ–Ω—ã `docker-compose.yaml` –¥–ª—è Vision –∏ Main Pi

**–ê–Ω–∞–ª–∏–∑**: –§–∏–Ω–∞–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ Zenoh. –£–¥–∞–ª–µ–Ω—ã –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã CycloneDDS/FastDDS.

---

#### 2. `4bd59ec - default zenoh configuration`
**–î–∞—Ç–∞**: –ü—Ä–µ–¥—ã–¥—É—â–∏–π –∫–æ–º–º–∏—Ç  
**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Zenoh router –∏ session –¥–ª—è –æ–±–æ–∏—Ö Pi
- –£–¥–∞–ª–µ–Ω `zenoh_local_session_config.json5` –Ω–∞ Vision Pi
- –û–±–Ω–æ–≤–ª–µ–Ω `Dockerfile` –¥–ª—è AprilTag

**–ê–Ω–∞–ª–∏–∑**: –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Zenoh (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏). –£–ø—Ä–æ—â–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

---

#### 3-7. `520457e - c1e3d7a` - Revert –∫–æ–º–º–∏—Ç—ã
**–î–∞—Ç–∞**: –û—Ç–∫–∞—Ç—ã –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –ø–æ–ø—ã—Ç–æ–∫  
**–ò–∑–º–µ–Ω–µ–Ω–∏—è**: –û—Ç–∫–∞—Ç –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `rmw_zenohd` (ROS 2 Zenoh router)

**–ê–Ω–∞–ª–∏–∑**: 
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–æ–¥—Ö–æ–¥–∞–º–∏:
1. –ü—ã—Ç–∞–ª—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `rmw_zenohd` (ROS 2 —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π Zenoh router)
2. –ü—ã—Ç–∞–ª—Å—è –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ `source setup.bash`
3. –ü—ã—Ç–∞–ª—Å—è —Å–æ–∑–¥–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ Dockerfiles –¥–ª—è —Ä–æ—É—Ç–µ—Ä–æ–≤ —Å `rmw_zenoh_cpp`
4. –ò—Å–ø—Ä–∞–≤–ª—è–ª GPG –∫–ª—é—á–∏ ROS 2 —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
5. –î–æ–±–∞–≤–ª—è–ª `LD_LIBRARY_PATH` –¥–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫ Zenoh

**–í –∏—Ç–æ–≥–µ**: –í—Å–µ –æ—Ç–∫–∞—Ç–∏–ª –∏ –ø–µ—Ä–µ—à—ë–ª –Ω–∞ **—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Zenoh router** (`eclipse/zenoh:latest`), –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–ø—Ä—è–º—É—é –±–µ–∑ ROS 2 –æ–±—ë—Ä—Ç–∫–∏.

---

### –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã –∏–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

1. **Zenoh router**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `eclipse/zenoh:latest`, –ù–ï `rmw_zenohd`
2. **FastDDS discovery**: –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—ë–Ω, –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
3. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Zenoh**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, –±–µ–∑ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–π
4. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —É–ø—Ä–æ—â–µ–Ω–∞**: –ú–µ–Ω—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –º–µ–Ω—å—à–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö Dockerfiles

---

## –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Zenoh

### Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### Vision Pi (`docker/vision/docker-compose.yaml`)

```yaml
services:
  zenoh-router:
    image: eclipse/zenoh:latest
    container_name: zenoh-router-vision
    network_mode: host
    environment:
      - RUST_LOG=zenoh=info
    volumes:
      - ./config/zenoh_router_config.json5:/zenoh_config.json5
      - /dev/shm:/dev/shm
    command: -c /zenoh_config.json5
    restart: unless-stopped
    healthcheck:
      test: ["CMD-SHELL", "wget -qO- http://localhost:8000/@/local/router || exit 1"]
      interval: 5s
      timeout: 10s
      retries: 20
      start_period: 30s

  oak-d:
    # ...
    environment:
      - RMW_IMPLEMENTATION=rmw_zenoh_cpp
      - ZENOH_ROUTER_CHECK_ATTEMPTS=10
      - RUST_LOG=zenoh=info
      - ROS_AUTOMATIC_DISCOVERY_RANGE=LOCALHOST
      - ZENOH_CONFIG=/config/zenoh_session_config.json5
    depends_on:
      - zenoh-router
```

#### Main Pi (`docker/main/docker-compose.yaml`)

```yaml
services:
  zenoh-router:
    image: eclipse/zenoh:latest
    container_name: zenoh-router
    network_mode: host
    environment:
      - RUST_LOG=zenoh=info
    volumes:
      - ./config/zenoh_router_config.json5:/zenoh_config.json5
    command: -c /zenoh_config.json5
    restart: unless-stopped
    healthcheck:
      test: ["CMD-SHELL", "wget -qO- http://localhost:8000/@/local/router || exit 1"]
      interval: 5s
      timeout: 10s
      retries: 20
      start_period: 30s

  rtabmap:
    # ...
    environment:
      - RMW_IMPLEMENTATION=rmw_zenoh_cpp
      - ZENOH_ROUTER_CHECK_ATTEMPTS=10
      - RUST_LOG=zenoh=info
      - ROS_AUTOMATIC_DISCOVERY_RANGE=LOCALHOST
      - ZENOH_CONFIG=/config/zenoh_session_config.json5
      - LD_LIBRARY_PATH=/opt/ros/humble/opt/zenoh_cpp_vendor/lib:/opt/ros/humble/lib/aarch64-linux-gnu:/opt/ros/humble/lib
    depends_on:
      - zenoh-router
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Zenoh

#### Router –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–¥–ª—è –æ–±–æ–∏—Ö Pi)
**–§–∞–π–ª—ã**: 
- `docker/vision/config/zenoh_router_config.json5`
- `docker/main/config/zenoh_router_config.json5`

**–ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**:
```json5
{
  mode: "router",
  connect: {
    endpoints: []  // –ó–∞–≤–∏—Å–∏—Ç –æ—Ç Pi
  },
  // ... —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ Zenoh –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
}
```

**Vision Pi router**: –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Main Pi router (–ø—É—Å—Ç–æ –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–≤—Ç–æ–æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ)  
**Main Pi router**: –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –≤–Ω–µ—à–Ω–µ–º—É —Å–µ—Ä–≤–µ—Ä—É `zenoh.robbox.online:7447`

#### Session –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–¥–ª—è ROS 2 –Ω–æ–¥)
**–§–∞–π–ª—ã**:
- `docker/vision/config/zenoh_session_config.json5`
- `docker/main/config/zenoh_session_config.json5`

**–ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**:
```json5
{
  mode: "peer",
  connect: {
    endpoints: ["tcp/localhost:7447"]  // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É router
  },
  // ... —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
}
```

---

## –°–∫—Ä–∏–ø—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### Workflow –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

#### 1. –õ–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (–Ω–∞ Windows)
```bash
cd d:\PROJECTS\rob_box_project
# –í–Ω–æ—Å–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥/–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
git add .
git commit -m "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
git push
```

#### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Vision Pi
```bash
# –£–¥–∞–ª—ë–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å Windows
wsl sshpass -p 'open' ssh -o StrictHostKeyChecking=no ros2@10.1.1.21 \
  'cd ~/rob_box_project/docker/vision && ./update_and_restart.sh'

# –ò–ª–∏ —á–µ—Ä–µ–∑ SSH
ssh ros2@10.1.1.21
cd ~/rob_box_project/docker/vision
./update_and_restart.sh
```

#### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Main Pi
```bash
# –£–¥–∞–ª—ë–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å Windows
wsl sshpass -p 'open' ssh -o StrictHostKeyChecking=no ros2@10.1.1.20 \
  'cd ~/rob_box_project/docker/main && ./update_and_restart.sh'

# –ò–ª–∏ —á–µ—Ä–µ–∑ SSH
ssh ros2@10.1.1.20
cd ~/rob_box_project/docker/main
./update_and_restart.sh
```

#### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
# Vision Pi
wsl sshpass -p 'open' ssh -o StrictHostKeyChecking=no ros2@10.1.1.21 'docker ps'

# Main Pi
wsl sshpass -p 'open' ssh -o StrictHostKeyChecking=no ros2@10.1.1.20 'docker ps'
```

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å–∫—Ä–∏–ø—Ç–∞–º

### ‚úÖ –û–°–¢–ê–í–ò–¢–¨ (–∫—Ä–∏—Ç–∏—á–Ω—ã–µ)
1. **docker/monitor_system.sh** - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
2. **docker/vision/realtime_monitor.sh** - –¥–µ—Ç–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–º–µ—Ä—ã
3. **docker/diagnose_data_flow.sh** - –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –º–µ–∂–ø–ª–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
4. **docker/vision/diagnose.sh** - –±—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–∞–º–µ—Ä—ã
5. **docker/vision/update_and_restart.sh** - deployment Vision Pi
6. **docker/main/update_and_restart.sh** - deployment Main Pi
7. **docker/vision/config/start_oak_d.sh** - –∑–∞–ø—É—Å–∫ –∫–∞–º–µ—Ä—ã (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Dockerfile)
8. **docker/vision/config/start_apriltag.sh** - –∑–∞–ø—É—Å–∫ AprilTag (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Dockerfile)

### ‚ö†Ô∏è –£–°–¢–ê–†–ï–õ–ò / –¢–†–ï–ë–£–Æ–¢ –ü–ï–†–ï–°–ú–û–¢–†–ê
1. **docker/vision/monitor_camera_startup.sh** - –¥—É–±–ª–∏—Ä—É–µ—Ç realtime_monitor.sh
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: —É–¥–∞–ª–∏—Ç—å –∏–ª–∏ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å —Å realtime_monitor.sh
2. **docker/vision/force_publish.sh** - –ª–æ–≥–∏–∫–∞ –≤ update_and_restart.sh
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: —É–¥–∞–ª–∏—Ç—å, –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫
3. **docker/tune.sh** - –¥–ª—è CycloneDDS (–±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: —É–¥–∞–ª–∏—Ç—å, –æ—Å—Ç–∞–≤–∏—Ç—å –≤ TROUBLESHOOTING.md –∫–∞–∫ –∏—Å—Ç–æ—Ä–∏—é

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
–¢–µ–∫—É—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–∞ –∏ —Ö–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∞:
- **ARCHITECTURE.md** - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- **TROUBLESHOOTING.md** - —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º (–æ–±–Ω–æ–≤–ª–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)
- **OPTIMIZATION_README.md** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–∞–º–µ—Ä—ã
- **QUICK_START_RU.md** - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- **README_RU.md** - –æ—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- **SYSTEM_TUNING.md** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã
- **CHANGES.md** - –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **CHECKLIST.md** - —á–µ–∫–ª–∏—Å—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **SUMMARY.md** - –∫—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤

### –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Å–∏—Å—Ç–µ–º–æ–π

1. **–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–∏—Ç—ã** –ø–µ—Ä–µ–¥ –≤–Ω–µ—Å–µ–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π
   ```bash
   git log -5 --oneline --name-status
   ```

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ IP –∞–¥—Ä–µ—Å–∞**:
   - SSH –¥–æ—Å—Ç—É–ø: WiFi IP (10.1.1.21, 10.1.1.20)
   - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Zenoh: Ethernet IP (10.1.1.11, 10.1.1.10)

3. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º**:
   - –°–Ω–∞—á–∞–ª–∞ `diagnose.sh` –Ω–∞ Vision Pi
   - –ó–∞—Ç–µ–º `diagnose_data_flow.sh` –¥–ª—è –º–µ–∂–ø–ª–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
   - `monitor_system.sh` –¥–ª—è –æ–±—â–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

4. **Deployment**:
   - –í—Å–µ–≥–¥–∞ `git push` –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º Pi
   - –û–±–Ω–æ–≤–ª—è–π—Ç–µ Vision Pi ‚Üí Main Pi –≤ —Ç–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ
   - –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

5. **Zenoh router**:
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `eclipse/zenoh:latest`
   - –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `rmw_zenohd` (–æ—Ç–∫–∞—á–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)
   - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ `zenoh_router_config.json5` –∏ `zenoh_session_config.json5`

---

## –ò—Å—Ç–æ—Ä–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ Zenoh

### –ë—ã–ª–æ (CycloneDDS)
- Multicast discovery –º–µ–∂–¥—É Pi
- –ü—Ä–æ–±–ª–µ–º—ã —Å –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ–º –Ω–æ–¥ (0 KB/s —Å–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫)
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å FastDDS discovery —Å–µ—Ä–≤–µ—Ä–∞

### –°—Ç–∞–ª–æ (Zenoh)
- Router-to-router –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- Vision Pi router ‚Üî Main Pi router ‚Üî zenoh.robbox.online
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `eclipse/zenoh:latest` router
- Peer mode –¥–ª—è ROS 2 –Ω–æ–¥ (–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ localhost:7447)

### –ü–æ–ø—ã—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è rmw_zenohd (–æ—Ç–∫–∞—á–µ–Ω—ã)
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–ª—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –¥–ª—è ROS 2 `rmw_zenohd` router:
- –°–æ–∑–¥–∞–≤–∞–ª –∫–∞—Å—Ç–æ–º–Ω—ã–µ Dockerfiles
- –ò—Å–ø—Ä–∞–≤–ª—è–ª GPG –∫–ª—é—á–∏ ROS 2
- –î–æ–±–∞–≤–ª—è–ª LD_LIBRARY_PATH –¥–ª—è Zenoh –±–∏–±–ª–∏–æ—Ç–µ–∫

**–í –∏—Ç–æ–≥–µ**: –û—Ç–∫–∞—Ç–∏–ª –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –ø–µ—Ä–µ—à—ë–ª –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Zenoh router, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ.

---

**–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω**: 2025-10-09  
**–í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã**: Zenoh architecture (–ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å CycloneDDS)  
**–ü–æ—Å–ª–µ–¥–Ω–∏–π –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–º–º–∏—Ç**: abd2629
