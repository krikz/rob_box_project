#!/bin/bash
# –ö—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞ –ø–æ —Å–∫—Ä–∏–ø—Ç–∞–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–∏—Ç–∞–Ω–∏—è

cat << 'EOF'
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë         –°–ö–†–ò–ü–¢–´ –ú–û–ù–ò–¢–û–†–ò–ù–ì–ê –ü–ò–¢–ê–ù–ò–Ø RASPBERRY PI             ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

üìã –î–û–°–¢–£–ü–ù–´–ï –°–ö–†–ò–ü–¢–´:

1Ô∏è‚É£  check_power_status.sh
   –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
   
   –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
   ./docker/scripts/check_power_status.sh
   
   –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç: —Ä–µ–∂–∏–º –ø–∏—Ç–∞–Ω–∏—è, —Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É, USB,
                –ø–∞–º—è—Ç—å, –¥–∏—Å–∫, —Å–µ—Ç—å

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

2Ô∏è‚É£  check_usb_devices.sh
   –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ USB —É—Å—Ç—Ä–æ–π—Å—Ç–≤
   
   –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
   ./docker/scripts/check_usb_devices.sh
   
   –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç: —Ç–æ–ø–æ–ª–æ–≥–∏—é USB, —ç–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ
                —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (OAK-D,
                LSLIDAR)

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

3Ô∏è‚É£  monitor_power_live.sh
   –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
   
   –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
   ./docker/scripts/monitor_power_live.sh [–∏–Ω—Ç–µ—Ä–≤–∞–ª_—Å–µ–∫]
   
   –ü—Ä–∏–º–µ—Ä—ã:
   ./docker/scripts/monitor_power_live.sh        # –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫
   ./docker/scripts/monitor_power_live.sh 5      # –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫
   
   –í—ã—Ö–æ–¥: Ctrl+C

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üîß –ë–´–°–¢–†–´–ï –ö–û–ú–ê–ù–î–´:

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥–∞:
  vcgencmd get_throttled

–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è:
  vcgencmd measure_volts

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã:
  vcgencmd measure_temp

–ü—Ä–æ–≤–µ—Ä–∫–∞ USB –ª–∏–º–∏—Ç–∞:
  vcgencmd get_config usb_max_current_enable

–°–ø–∏—Å–æ–∫ USB —É—Å—Ç—Ä–æ–π—Å—Ç–≤:
  lsusb

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üìö –ü–û–õ–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø:

‚Ä¢ POWER_MANAGEMENT.md - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∏—Ç–∞–Ω–∏–µ–º RPi5
  –†–µ–∂–∏–º—ã –ø–∏—Ç–∞–Ω–∏—è, —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —Ä–æ–±–æ—Ç–æ–≤

‚Ä¢ POWER_MONITORING_SCRIPTS.md - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–∫—Ä–∏–ø—Ç–∞–º
  –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‚öôÔ∏è  –ù–ê–°–¢–†–û–ô–ö–ê –ü–ò–¢–ê–ù–ò–Ø:

–í–∫–ª—é—á–∏—Ç—å –ø–æ–ª–Ω—ã–π USB —Ç–æ–∫ (–µ—Å–ª–∏ –ø–∏—Ç–∞–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç):
  sudo nano /boot/firmware/config.txt
  –î–æ–±–∞–≤–∏—Ç—å: usb_max_current_enable=1

–ù–∞—Å—Ç—Ä–æ–∏—Ç—å EEPROM –¥–ª—è –ø–∏—Ç–∞–Ω–∏—è —á–µ—Ä–µ–∑ GPIO:
  sudo rpi-eeprom-config --edit
  –î–æ–±–∞–≤–∏—Ç—å: PSU_MAX_CURRENT=5000

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üö® –†–ê–°–®–ò–§–†–û–í–ö–ê –¢–†–û–¢–¢–õ–ò–ù–ì–ê:

0x0      - –í—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ ‚úÖ
0x1      - Undervoltage detected (< 4.63V) üî¥
0x2      - ARM frequency capped üü°
0x4      - Currently throttled üî¥
0x8      - Soft temperature limit üü°
0x10000+ - –ü—Ä–æ–±–ª–µ–º—ã –±—ã–ª–∏ –≤ –ø—Ä–æ—à–ª–æ–º üü†

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üìû –£–î–ê–õ–ï–ù–ù–´–ô –ú–û–ù–ò–¢–û–†–ò–ù–ì:

Main Pi (10.1.1.20):
  ssh ros2@10.1.1.20 '/home/ros2/rob_box_project/docker/scripts/check_power_status.sh'

Vision Pi (10.1.1.21):
  ssh ros2@10.1.1.21 '/home/ros2/rob_box_project/docker/scripts/check_usb_devices.sh'

–ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
  watch -n 5 "ssh ros2@10.1.1.20 './docker/scripts/check_power_status.sh'"

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
EOF
